<html>
	<!-- $Id: ext_provider.html,v 1.1 2011/10/04 12:41:14 xbourgui Exp $ -->
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
		<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
		<title>OpenBet Administration</title>
		<script language=javascript>
			function fs(b,t)
			{
				b.form.action.value = t;
				b.form.submit();
				return true;
			}
			function wr_tr(status) {
				if (status == "A") {
					document.write('<tr class=active>');
				} else if (status == "S") {
					document.write('<tr class=suspended>');
				} else {
					document.write('<tr>');
				}
			}
		</script>
	</head>

	<body>

##TP_PLAY error_rpt.html##

		<form method="post" action="##TP_CGI_URL##">
		<input type="hidden" name="action" value="">
		<input type="hidden" name="prov_id" value="##TP_prov_id##">
		<table cellspacing="0" cellpadding="4" border="0">
			<tr>
				<th colspan="4" class="title">Verification Providers</th>
			</tr>
			<tr>
				<th>Provider</th>
				<td><input type="text" name="name" value="##TP_prov_name##" size="30"></td>
			</tr>
			<tr>
				<th>Short Code</th>
				<td><input type="text" name="code" value="##TP_prov_code##" size="16"></td>
			</tr>
			<tr>
				<th>Status</th>
				<td>
					<select name="status">
						<option value="A" ##TP_IF {[tpGetVar prov_status] == "A"}##selected##TP_ENDIF##>Active</option>
						<option value="S" ##TP_IF {[tpGetVar prov_status] == "S"}##selected##TP_ENDIF##>Suspended</option>
					</select>
				</td>
			</tr>
			<tr>
				<th>Priority</th>
				<td><input type="text" name="priority" value="##TP_prov_priority##" size="3"> <b>(0-999)</b></td>
			</tr>
			<tr>
				<th colspan="4" class="buttons">
	##TP_IF {[tpGetVar prov_id] == ""}##
					<input type="button" value="Add Provider" onclick="return fs(this, 'ADMIN::VERIFICATION::PROVIDER::DoAddProvider');">
	##TP_ELSE##
					<input type="button" value="Update Provider" onclick="return fs(this, 'ADMIN::VERIFICATION::PROVIDER::DoUpdProvider');">
	##TP_ENDIF##
					<input type="button" value="Back" onclick="return fs(this, 'ADMIN::VERIFICATION::PROVIDER::GoProviderList');">
				</th>
			</tr>
		</table>
		</form>

	##TP_IF {[tpGetVar prov_id] != ""}##
		<br>
		<br>

		<form method="post" action="##TP_CGI_URL##">
		<input type="hidden" name="action" value="">
		<input type="hidden" name="prov_id" value="##TP_prov_id##">
		<table cellspacing="0" cellpadding="4" border="0">
			<tr>
				<th colspan="4" class="title">Provider Connections</th>
			</tr>
			<tr>
				<th class="colhead">Action</th>
				<th class="colhead">Type</th>
				<th class="colhead"></th>
			</tr>
		##TP_IF {[tpBindGet num_conn] > 0}##
			##TP_LOOP conn_idx {[tpBindGet num_conn]}##
			<script>wr_tr("##TP_conn_status##")</script>
				<td><a href="##TP_CGI_URL##?action=ADMIN::VERIFICATION::PROVIDER::GoConn&conn_id=##TP_conn_id##">##TP_conn_action##</td>
				<td>##TP_conn_type_txt##</a></td>
				<td></td>
			</tr>
			##TP_ENDLOOP##
		##TP_ELSE##
			<tr>
				<td colspan="4">No Connections found!</td>
			</tr>
		##TP_ENDIF##
			<tr>
				<th colspan="4" class="buttons">
					<input type="button" value="Add Connection" onclick="return fs(this, 'ADMIN::VERIFICATION::PROVIDER::GoAddConn');">
				</th>
			</tr>
		</table>
		</form>

		<br>
		<br>

		<form method="post" action="##TP_CGI_URL##">
		<input type="hidden" name="action" value="">
		<input type="hidden" name="prov_id" value="##TP_prov_id##">
		<table cellspacing="0" cellpadding="4" border="0">
			<tr>
				<th colspan="4" class="title">External Profile / Check Mappings</th>
			</tr>
			<tr>
				<th class="colhead">Profile</th>
				<th class="colhead">Supported OVS Checks</th>
				<th class="colhead"></th>
			</tr>
		##TP_IF {[tpBindGet num_ext_profiles] > 0}##
			##TP_LOOP prfl_idx {[tpBindGet num_ext_profiles]}##
			<script>wr_tr("##TP_prfl_status##")</script>
				<td><a href="##TP_CGI_URL##?action=ADMIN::VERIFICATION::PROVIDER::GoProfile&prfl_id=##TP_prfl_id##">##TP_prfl_name##</td>
				<td>##TP_prfl_chk_name##</a></td>
				<td></td>
			</tr>
			##TP_ENDLOOP##
		##TP_ELSE##
			<tr>
				<td colspan="4">No External Profiles found!</td>
			</tr>
		##TP_ENDIF##
			<tr>
				<th colspan="4" class="buttons">
					<input type="button" value="Add Profile" onclick="return fs(this, 'ADMIN::VERIFICATION::PROVIDER::GoAddProfile');">
				</th>
			</tr>
		</table>
		</form>
	##TP_ENDIF##
	</body>
</html>
