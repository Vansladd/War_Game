<html>
<!-- $Id: iovation_control.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##" />
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet" />
<title>Iovation Control</title>
##TP_PLAY JS_WriteSelect.html##

<script language="JavaScript">
	function fs(b, t) {
		b.disabled = true;
		b.value = "Busy...";
		if (t != null) {
			b.form.SubmitName.value = t;
		}
		b.form.submit();
		return true;
	}
</script>

</head>
<body>
##TP_PLAY error_rpt.html##

##TP_IF {[OT_CfgGet FUNC_IOVATION_SNARE 0]}##

	##TP_IF {[op_allowed IovManageGlobal]}##
	<form action="##TP_CGI_URL##" method="get">
		<input type="hidden" name="action" value="ADMIN::IOVATION::DoControl"/>
		<table border="0" cellspacing="0" cellpadding="3">
			<tr>
				<th colspan="2" class="title">
					Iovation Settings
				</th>
			</tr>
		<!-- QC13913: temporary hiding max wait as it is not in use due to
			submit button reenabling issue by Iovation javascript
		-->
		<!--
			<tr>
				<td class="caption">Max Wait</td>
				<td>
					<input type="text" name="MaxWait" size="5" value="##TP_MaxWait##"/>
					<strong>(Maximum time to wait (in milliseconds) for a blackbox before submitting the form)</strong>
				</td>
			</tr>
		-->
			<tr>
				<td class="caption">Enabled</td>
				<td>
					<select name="Enabled">
						<script>
							write_select('##TP_Enabled##','Y','Yes','N','No')
						</script>
					</select>
				</td>
			</tr>
			<tr>
				<th class="buttons" colspan="2">
					<input type="button" class="btn_def" value="Update" onClick="return fs(this)"/>
				</th>
			</tr>
		</table>
	</form>
	##TP_ENDIF##

	##TP_IF {[op_allowed IovManageSystem]}##
	<form action="##TP_CGI_URL##" method="get">
		<input type="hidden" name="action"  value="ADMIN::IOVATION::DoControlTrig"/>
		<input type="hidden" name="NumTrig" value="##TP_TCL {tpGetVar NumTrig}##"/>
		<table border="0" cellspacing="0" cellpadding="3">
			<tr>
				<th class="title" colspan="4">Iovation Triggers Settings</th>
			</tr>
			<tr>
				<th class="colhead">Type</th>
				<th class="colhead">Enabled</th>
				<th class="colhead">Frequency</th>
				<th class="colhead">Max Count</th>
			</tr>
		##TP_LOOP trig_idx {[tpGetVar NumTrig]}##
			<input type="hidden" name="row_##TP_TCL {tpGetVar trig_idx}##" value="##TP_TrigType##"/>
			<tr>
				<td nowrap>##TP_TrigDesc##</td>
				<td>
					<select name="Enabled_##TP_TrigType##">
						<script>
							write_select('##TP_TrigEnabled##','Y','Yes','N','No')
						</script>
					</select>
				</td>
				<td nowrap>
					<input type="text" name="FreqStr_##TP_TrigType##" size="10" value="##TP_TrigFreqStr##"/>
				</td>
				<td nowrap>
					<input type="text" name="MaxCount_##TP_TrigType##" size="5" value="##TP_TrigMaxCount##"/>
				</td>
			</tr>
		##TP_ENDLOOP##
			<tr>
				<th class="buttons" colspan="4">
					<input type="button" class="btn_def" value="Update" onClick="return fs(this)"/>
				</th>
			</tr>
		</table>
	</form>
	##TP_ENDIF##

	##TP_IF {[op_allowed IovManageAccount]}##
	<form action="##TP_CGI_URL##" method="get">
		<input type="hidden" name="action" value="ADMIN::IOVATION::QueryControlCustTrig"/>
		<input type="hidden" name="SubmitName" value="">
		<table border="0" cellspacing="0" cellpadding="3">
			<tr>
				<th colspan=2 class=title>Account Level Trigger Search Criteria</th>
			</tr>
			<tr>
				<td class="captionindex">Username</td>
				<td>
					<input type="text" name="SR_Username" value="" size="32">
					&nbsp;(exact: <input type="checkbox" name="SR_ExactName" value="Y" ##TP_IF {[OT_CfgGet FUNC_DEF_CASE_INS_SEARCH 0] == 0}##checked##TP_ENDIF##/>&nbsp; case insensitive: <input type="checkbox" name="SR_Ignorecase" value="Y" ##TP_IF {[OT_CfgGet FUNC_DEF_CASE_INS_SEARCH 0] == 1}##checked##TP_ENDIF##/>)
				</td>
			</tr>
			<tr>
				<td class="caption">Trigger Type</td>
				<td>
					<select name="SR_TrigType">
						<option value="">-</option>
						##TP_LOOP ctrig_idx {[tpGetVar NumCustTrig]}##
							<option value="##TP_CustTrigType##">##TP_CustTrigDesc##</option>
						##TP_ENDLOOP##
					</select>
				</td>
			</tr>
			<tr>
				<td class="caption">Enabled</td>
				<td>
					<select name="SR_Enabled">
						<option value="">-</option>
						<option value="sys">System</option>
						<option value="Y">Yes</option>
						<option value="N">No</option>
					</select>
				</td>
			</tr>
			<tr>
				<td class="caption">Max Count between</td>
				<td>
					<input name="SR_MaxCount1" value="" size="5" type="text">
					&nbsp;and&nbsp;
					<input name="SR_MaxCount2" value="" size="5" type="text">
				</td>
			</tr>
			<tr>
				<th class="buttons" colspan="2">
					<input type=button class="btn_def" value="Find Customer Account Triggers" onClick="return fs(this,'Query')"/>
				</th>
			</tr>
		</table>
	</form>
	##TP_ENDIF##

	##TP_IF {[op_allowed IovManageGlobal] != 1 && [op_allowed IovManageSystem] != 1 && [op_allowed IovManageAccount] != 1}##
		<p>You do not have permission to manager Iovation settings.</p>
	##TP_ENDIF##

##TP_ELSE##
<p>This functionality is not enabled.</p>
##TP_ENDIF##

</body>
</html>
