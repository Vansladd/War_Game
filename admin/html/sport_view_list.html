<html>
<!-- $Id: sport_view_list.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>Sports View Config (##TP_SportView##)</title>

##TP_PLAY JS_WriteSelect.html##
<script type="text/javascript">

function fs(b,t)
{
	var change_list = new Array();
	b.disabled = true;

	if (b.tagName == 'INPUT') {
		/* Only set value to Busy if it's an input button */
		b.value = "Busy...";
	}

	b.form.SubmitName.value=t;

	if (t == "DoSportViewUpdate") {
		change_list = validate_update(b.form);
		if (change_list.length == 0) {
			alert ("Details are not changed, cannot update");
			b.disabled = false;
			b.value = "Update";
			return false;
		}
	b.form.id_list.value = change_list.join(" ");
	}

	if (t == 'GoToView') {
		// Override sport_view with the one selected in the dropdown
		b.form.sport_view.value = b.form.go_sport_view.value;
	}

	b.form.submit();
	return true;
}

function validate_update (f) {

	var has_changed = false;

	var id_list     = f.id_list.value.split(" ");
	var list_length = id_list.length;
	var to_process  = new Array();

	for (var i = 0; i < list_length ; i++)
	{
		sport_id = id_list[i];
		has_changed = false;

	if ( eval("f.prematch_disp_"+sport_id+".value") != eval("f.orig_prematch_disp_"+sport_id+".value")) {
			has_changed = true;
		} else if ( eval("f.inplay_disp_"+sport_id+".value") != eval("f.orig_inplay_disp_"+sport_id+".value")) {
			has_changed = true;
		} else if ( eval("f.nav_disp_"+sport_id+".value") != eval("f.orig_nav_disp_"+sport_id+".value")) {
			has_changed = true;
		} else if ( eval("f.ignore_home_"+sport_id+".value") != eval("f.orig_ignore_home_"+sport_id+".value")) {
			has_changed = true;
		}

		if (has_changed) { to_process.push(sport_id); }
	}
	return to_process;
}

function update_checkbox ( id ) {
	var f = document.forms['sport_view_list'];

	if (eval("f.chk_ignore_home_"+id+".checked")) {
		eval("f.ignore_home_"+id+".value = 'Y'");
	} else {
		eval("f.ignore_home_"+id+".value = 'N'");
	}
}



</script>



</head>
<body>
##TP_PLAY error_rpt.html##

<form name="sport_view_list" action="##TP_CGI_URL##" method="post">

<br/>

<table border="0" cellspacing="0" cellpadding="3" bgcolor="#10137c">
<input type="hidden" name="SubmitName" value=""/>
<input type="hidden" name="action" value="ADMIN::SPORT::DoSport"/>
<input type="hidden" name="id_list" value="##TP_IdList##" />
<input type="hidden" name="sport_view" value="##TP_SportView##"/>
<tr>
	<th class="title" colspan="4">
	Sports View Config (##TP_SportView##)
	</th>
	<th class="title" colspan="2">
		View
		<select name="go_sport_view" onChange="fs(this,'GoToView');">
			##TP_LOOP view_idx {[tpGetVar NumViews]}##
				<option value="##TP_ViewId##" ##TP_ViewSel##>##TP_ViewName##</option>
			##TP_ENDLOOP##
		</select>
	</th>
</tr>
<tr>
	<th><a href="##TP_CGI_URL##?action=ADMIN::SPORT::GoSportView&sport_view=##TP_SportView##&sport_sort=2">Sport</a></th>
	<th><a href="##TP_CGI_URL##?action=ADMIN::SPORT::GoSportView&sport_view=##TP_SportView##&sport_sort=4">Priority Disporder</a></th>
	<th><a href="##TP_CGI_URL##?action=ADMIN::SPORT::GoSportView&sport_view=##TP_SportView##&sport_sort=5">In-Play Disporder</a></th>
	<th><a href="##TP_CGI_URL##?action=ADMIN::SPORT::GoSportView&sport_view=##TP_SportView##&sport_sort=6">Nav Disporder</a></th>
	<th><a href="##TP_CGI_URL##?action=ADMIN::SPORT::GoSportView&sport_view=##TP_SportView##&sport_sort=3">Ignore On Homepage?</a></th>
</tr>
##TP_IF {[tpGetVar NumSports] > 0}##
	##TP_LOOP sport_idx {[tpGetVar NumSports]}##
	<tr>
		<td>##TP_SportName##</td>
		<td>
			<input name="prematch_disp_##TP_SportId##" type="text" size="3" value="##TP_PrematchDisp##" />
			<input name="orig_prematch_disp_##TP_SportId##" type="hidden" value="##TP_PrematchDisp##" />
		</td>
		<td>
			<input name="inplay_disp_##TP_SportId##" type="text" size="3" value="##TP_InplayDisp##" />
			<input name="orig_inplay_disp_##TP_SportId##" type="hidden" value="##TP_InplayDisp##" />
		</td>
		<td>
			<input name="nav_disp_##TP_SportId##" type="text" size="3" value="##TP_NavDisp##" />
			<input name="orig_nav_disp_##TP_SportId##" type="hidden" value="##TP_NavDisp##" />
		</td>
		<td>
			<input name="chk_ignore_home_##TP_SportId##" type="checkbox" ##TP_IF { [tpBindGet IgnoreHome] == "Y" }##checked="checked"##TP_ENDIF## / onchange="update_checkbox(##TP_SportId##);">
			<input name="orig_ignore_home_##TP_SportId##" type="hidden" value="##TP_IgnoreHome##"/>
			<input name="ignore_home_##TP_SportId##" type="hidden" value ="##TP_IgnoreHome##"/>
		</td>
	</tr>
	##TP_ENDLOOP##

	<tr>
		<th class="buttons">&nbsp;</th>
		<th class="buttons" colspan="2">
			<input type="button" class="btn_def" value="Update" onClick="return fs(this,'DoSportViewUpdate');">
		</th>
		<th class="buttons" colspan="2">
			<input type="button" class="btn_def" value="Cancel" onClick="return fs(this,'Back');">
		</th>
	</tr>
##TP_ELSE##
	<tr>
		<td colspan="4">There is no configuration available for view <strong>'##TP_SportView##'</strong></th>
	</tr>
##TP_ENDIF##
</form>
</table>

##TP_PLAY {menu_item_lang.html}##

</body>
</html>
