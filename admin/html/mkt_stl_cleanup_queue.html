<!-- $Id: mkt_stl_cleanup_queue.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $ -->

<html>

<head>

<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>OpenBet Administration</title>

<script language="Javascript">

	function fs(b,t) {

		b.disabled = true;
		b.value = "Busy...";
		b.form.SubmitName.value=t;
		if (t=="AddMarkets") {
			b.form.action.value="ADMIN::CLEANUP::GoUnstlEvSel";
		}
		b.form.submit();
		return true;
	}

	function set_checkboxes (checkbox_root, num_boxes,check_value)  {
		for( i=0 ; i<num_boxes; i++) {
			document.getElementById(checkbox_root+i).checked = check_value;
		}
	}

</script>

</head>

<body>

##TP_PLAY error_rpt.html##

<form method="post" name="mktstlqueueremove" action="##TP_CGI_URL##">
	<input type="hidden" name="action" value="ADMIN::CLEANUP::DoMktStlCleanup">
	<input type="hidden" name="SubmitName" value="">
	<input type="hidden" name="NumQueuedMkts" value="##TP_TCL {tpBufWrite [tpGetVar queue_rows]}##">
	<input type="hidden" name="BackType"  value="1">
	<input type="hidden" name="EventArgs"  value="##TP_EVENT_INFO##">

	<table cellspacing="0" cellpadding="2" border="0">
		<tr><th class="title" colspan="7">Event Markets Previously Queued for Settlement</th></tr>

		<tr>
			<th class="colhead">Event Type</th>
			<th class="colhead">Event</th>
			<th class="colhead">Market</th>
			<th class="colhead">Start Time</th>
			<th class="colhead">Remove</th>
		</tr>
		##TP_IF {[tpGetVar queue_rows 0]>0}##

		##TP_LOOP queue_idx {[tpGetVar queue_rows]}##
			<tr>
				<td>##TP_QueuedEvType##</td>
				<td><a href="##TP_CGI_URL##?action=ADMIN::EVENT::GoEv&EvId=##TP_QueuedEvId##">##TP_QueuedEvent##</a></td>
				<td><a href="##TP_CGI_URL##?action=ADMIN::MARKET::GoMkt&MktId=##TP_QueuedMktId##">##TP_QueuedMktName##</td>
				<td>##TP_QueuedStartTime##</td>
				<td align="middle"><input type=checkbox name="remove_##TP_QueuedMktId##" id="del_chkbox_##TP_TCL {tpBufWrite [tpGetVar queue_idx]}##" value="Y"></td>
				<input type="hidden" name="queue_mkt_id_##TP_TCL {tpBufWrite [tpGetVar queue_idx]}##" value="##TP_QueuedMktId##">
				<input type="hidden" name="queue_desc_##TP_QueuedMktId##" value="##TP_QueuedEvent##:##TP_QueuedMktName##">
			</tr>
		##TP_ENDLOOP##

		##TP_ELSE##
		<tr>
			<td colspan="4">No event markets are in the settlement queue.</td>
		</tr>
		##TP_ENDIF##
		<tr>
			<th class="buttons" colspan="2">
			<input type="button" onClick="return fs(this,'RemoveFromQueue')" value="Remove Markets">
			<input type="button" onClick="return fs(this,'AddMarkets')" value="Add Markets">
			##TP_IF {[reqGetArg BackType] != "X"}##
				<input type="button" onClick="return fs(this,'Back')" value="Back">
			##TP_ENDIF##
			</th>
			<th class="buttons" colspan="1">&nbsp;</th>
			<th class="buttons" colspan="2">Select: <a href="javascript:set_checkboxes('del_chkbox_',##TP_TCL {tpBufWrite [tpGetVar queue_rows]}##,true);">ALL</a> <a href="javascript:set_checkboxes('del_chkbox_',##TP_TCL {tpBufWrite [tpGetVar queue_rows]}##,false);">NONE</a></th>
		</tr>
	</table>
</form>
</body>

</html>
