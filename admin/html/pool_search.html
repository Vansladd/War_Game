<html>
	<!-- $Id: pool_search.html,v 1.1.1.1 2011/10/04 10:54:25 xbourgui Exp $ -->
	<head>
	  <meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
		<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
		  <title>OpenBet Database Viewer</title>
		  ##TP_PLAY JS_WriteSelect.html##
		  <script>
			var Types = new Object();
			var TypeIdx = new Array();

			##TP_LOOP idx {[tpGetVar NumSources]}##
			Types["##TP_SourceID##"] = new Object();
			Types["##TP_SourceID##"].desc = "##TP_SourceDesc##";
			Types["##TP_SourceID##"].content = new Array();
			TypeIdx[TypeIdx.length] = "##TP_SourceID##";
			##TP_ENDLOOP##

			##TP_LOOP idx {[tpGetVar NumTypes]}##
			var type = new Object();
			type.id = "##TP_TypeID##";
			type.name = "##TP_TypeName##";
			arr = Types["##TP_TypeSource##"].content;
			arr[arr.length] = type;
			##TP_ENDLOOP##

			function filter_types(s)
			{
				opt = s.options[s.selectedIndex].value;
				tform = s.form;
				bopts = tform.BetType.options;

				while(tform.BetType.length > 0)
				{
					bopts[0] = null;
				}

				if(opt == "-")
				{
					newOpt = new Option();
					newOpt.value = "-";
					newOpt.text = "Any";
					bopts[bopts.length] = newOpt;

					for(idx = 0; idx < TypeIdx.length; idx++)
					{
						content = Types[TypeIdx[idx]].content;

						for(i = 0; i < content.length; i++)
						{
							newOpt = new Option();
							newOpt.value = content[i].id;
							newOpt.text = content[i].name;
							bopts[bopts.length] = newOpt;
						}
					}
				}
				else
				{
					content = Types[opt].content;

					newOpt = new Option();
					newOpt.value = "-";
					newOpt.text = "Any";
					bopts[bopts.length] = newOpt;

					for(i = 0; i < content.length; i++)
					{
						newOpt = new Option();
						newOpt.value = content[i].id;
						newOpt.text = content[i].name;
						bopts[bopts.length] = newOpt;
					}
				}
			}

			function fs(b)
			{
				b.disabled = true;
				b.value = "Busy...";
				b.form.submit();
				return true;
			}

			function settleall(s)
			{
				s.form.settle.value = "Yes";
				return fs(s);
			}
		  </script>
	</head>

	<body>
	  ##TP_PLAY error_rpt.html##
	  <table border=0 cellspacing=0 cellpadding=3 bgcolor=#10137c>
		<form name="typeform" method=get action="##TP_CGI_URL##">
		  <tr>
			<th colspan=4 class=title>
			  Pari-Mutuel Pools Criteria
			</th>
		  </tr>
		  <tr>
			<td class=caption>Source</td>
			<td>
			  <select name=Source onchange="filter_types(this)">
				<script>
				  write_select('-',
				  '-', 'Any'
				  ##TP_LOOP idx {[tpGetVar NumSources]}##
				  ,'##TP_SourceID##', '##TP_SourceDesc##'
				  ##TP_ENDLOOP##
				  )
				</script>
			  </select>
			</td>
			<td class=caption>Bet type</td>
			<td>
			  <select name=BetType>
				<script>
				  write_select('-',
				  '-', 'Any'
				  ##TP_LOOP idx {[tpGetVar NumTypes]}##
				  ,'##TP_TypeID##', '##TP_TypeName##'
				  ##TP_ENDLOOP##
				  )
				</script>
			  </select>
			</td>
		  </tr>
		  <tr>
			<td class=caption>Tracks</td>
			<td>
			  <select name=Type>
				<option value="-">Any</option>
			##TP_LOOP idx {[tpGetVar NumEvTypes]}##
				<option value="##TP_EvTypeID##">##TP_EvTypeName##</option>
			##TP_ENDLOOP##
			  </select>

			</td>
			<td colspan=2>&nbsp;</td>
		  </tr>
		  <tr>
			<td class=caption>Date range</td>
			<td colspan=3>
			  <select name=date_range>
				<option value="-3">Last 7 days</option>
				<option value="-2">Last 3 days</option>
				<option value="-1">Yesterday</option>
				<option value="-">--</option>
				<option value="0" selected>Today</option>
				<option value="1">Tomorrow</option>
				<option value="2">Next 3 days</option>
				<option value="3">Next 7 days</option>
				<option value="4">In the future</option>
			  </select>&nbsp;&nbsp;or&nbsp;
			  <input type=text size=10 name=date_lo value="">&nbsp;to&nbsp;
				<input type=text size=10 name=date_hi value="">
			</td>
		  </tr>
		  <tr>
			<td class=caption>Settled</td>
			<td>
			  <select name=settled>
				<option value="-">Either</option>
				<option value="N" selected>No</option>
				<option value="Y">Yes</option>
			  </select>
			</td>
		  </tr>
		  <tr>
			<td class=caption>Status</td>
			<td>
			  <select name=status>
				<option value="-">Either</option>
				<option value="A" selected>Active</option>
				<option value="S">Suspended</option>
			  </select>
			</td>
		  </tr>
		  <tr>
			<th class=buttons colspan=3>
			  <input type=button class="btn_def" value="Show Pools" onClick="return fs(this)">
			</th>
			<th class=buttons colspan=1>
 			  <input type=button class="btn_def" value="Settle All" onClick="return settleall(this)">
			</th>
		  </tr>
		  <input type=hidden name=action value="ADMIN::POOLS::GoSearchPools">
			<input type=hidden name=settle value="No">
		</form>
	  </table>
	</body>
</html>

