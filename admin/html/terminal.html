<html>
<!-- $Id: terminal.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>Add/Modify Terminal</title>
##TP_PLAY JS_WriteSelect.html##
<script language="Javascript">
function validate(f,t)
{
	var b = document.forms[0];
	
	var err="";

	if (err != "") {
		alert(err);
	} else {
		fs(f,t);
	}
}
function fs(b,t)
{
	b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value=t;
	b.form.submit();
	return true;
}
</script>
</head>
<body>
##TP_PLAY error_rpt.html##
<table border=0 cellspacing=0 cellpadding=3>
<tr>
	<th colspan=2 class=title>
	##TP_TermCode## Terminal Details
	</th>
</tr>
<form ACTION="##TP_CGI_URL##" method=get>
##TP_IF {[tpGetVar opAdd 0]}##
<tr>
	<td class=caption>Code</td>
	<td>
	<input type=text name="TermCode" value="" size=20>
	</td>
</tr>
##TP_ENDIF##
<tr>
	<td class=caption>Name</td>
	<td>
	<input type="text" name="TermName" value="##TP_TermName##" size=40>
	</td>
</tr>
<tr>
	<td class=caption>Location</td>
	<td>
	<select name="TermLoc">
	<script>
	write_select("##TP_TermLoc##"
		##TP_LOOP loc_idx {[tpGetVar NumLocs]}##
			,"##TP_LocCode##","##TP_LocName##"
		##TP_ENDLOOP##
	);
	</script>
	</select>
	</td>
</tr>
<tr>
	<td class=caption>Department</td>
	<td>
	<select name="TermDept">
	<script>
	write_select("##TP_TermDept##"
		##TP_LOOP dept_idx {[tpGetVar NumDepts]}##
			,"##TP_DeptCode##","##TP_DeptName##"
		##TP_ENDLOOP##
	);
	</script>
	</select>
	</td>
</tr>
<tr>
	<td class=caption>Term Type</td>
	<td>
	<select name="TermType">
	<script>
	write_select("##TP_TermType##",'P','Telephone Betting','H','Hospitality');
	</script>
	</select>
	</td>
</tr>
<tr>
	<td class=caption>Identifier</td>
	<td>
	<input type="text" name="TermIdent" value="##TP_TermIdent##" size=24>
	</td>
</tr>
<tr>
	<td class=caption>Telephone</td>
	<td>
	<input type="text" name="TermTel" value="##TP_TermTel##" size=10>
	</td>
</tr>
<tr>
	<td class=caption>Status</td>
	<td>
	<select name="TermStatus">
	<script>
	write_select("##TP_TermStatus##",'S','Suspended','A','Active');
	</script>
	</select>
	</td>
</tr>
<tr>
	<td class=caption>Printer Type</td>
	<td>
	<select name="PrinterType">
	<script>
	write_select("##TP_PrinterType##",'','-','P','Printek','G','Gen2', 'K', 'Kube Lottery', 'R', 'Zebra R', 'L', 'Zebra LP 2844', 'B', 'Bixolon 350','T', 'TS700 Chinese');
	</script>
	</select>
	</td>
</tr>
<tr>
	<td class=caption>Printer Port</td>
	<td>
	<input type="text" name="PrinterPort" value="##TP_PrinterPort##" size=10>
	<i>COM1, COM2 etc</i></td>
</tr>
<tr>
	<td class=caption>Printer Baud Rate</td>
	<td>
	<input type="text" name="PrinterBaudRate" value="##TP_PrinterBaudRate##" size=10>
	<i> e.g. 57600 </i></td>
</tr>
<tr>
	<td class=caption>Card Reader Type</td>
	<td>
	<select name="CardReaderType">
	<script>
	write_select("##TP_CardReaderType##", '', '-', 'D', 'Dione', 'P', 'Printek MT2B');
	</script>
	</select>
	</td>
</tr>
<tr>
<tr>
	<td class=caption>Card Reader Port</td>
	<td>
	<input type="text" name="CardReaderPort" value="##TP_CardReaderPort##" size=10>
	<i>COM1, COM2 etc</i></td>
</tr>
<tr>
    <td class=caption>Display Type</td>
    <td>
    <select name="DisplayType">
    <script>
    write_select("##TP_DisplayType##",'','-','T','Tablet PC');
    </script>
    </select>
    </td>
</tr>
##TP_IF {[tpGetVar opAdd 0]==0 && [tpGetVar NumAccounts 0]>0}##
<tr>
	<td class=caption>Default Currency</td>
	<td>
		<select name="DefaultCurrency">
			<script>
			write_select("##TP_DefaultCurrency##"
				##TP_LOOP a_idx {[tpGetVar NumAccounts]}##
					,"##TP_CCYName##","##TP_CCYName##"											##TP_ENDLOOP##
    		);
			</script>
		</select>
	</td>
</tr>
##TP_ENDIF##
<tr>
	<td class=caption>Default Language</td>
	<td>
		<select name="DefaultLanguage">
			<script>
			write_select("##TP_DefaultLanguage##"
				##TP_LOOP lang_idx {[tpGetVar NumLangs]}##
					,"##TP_LangCode##","##TP_LangName##"
				##TP_ENDLOOP##
    		);
			</script>
		</select>
	</td>
</tr>
<tr>
<tr>
		<td class=caption>Payout Permission</td>
		<td>
			<select name="PayoutPerm">
				<script>
					write_select("##TP_PayoutPerm##",'','-','A','All Terminals','D','Terminal Dept','L','Terminal Location','O','Terminal Dept and Location Only');
				</script>
			</select>
		</td>
</tr>
<tr>
		<td class=caption>Payment Limit</td>
		<td>
			<input type="text" name="PayoutLimit" value="##TP_PayoutLimit##" size=10>
			<i> in GBP</i>
		</td>
	</tr>
</tr>

##TP_IF {[lsearch [OT_CfgGet TERM_TYPES_FOR_LOCAL_LOGGING {}] [tpBindGet TermType]] != -1}##
<tr>
	<td class=caption>Local logging</td>
	<td>
		<input type="checkbox" name="LocalLogging" value="Y"
			##TP_IF {[tpBindGet LocalLogging] == "Y"}##
				checked
			##TP_ENDIF##
			>
		</td>
</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGet TERM_LANGS 0]}##
<tr>
		<td class="caption">Languages</td>
		<td colspan="3">
			##TP_PLAY lang_sel.html##
		</td>
</tr>
##TP_ENDIF##
	<td class=caption>Channels</td>
	<td>
		<input type="hidden" name="TermChannels" value="##TP_TermChannels##" >
		##TP_LOOP channel_idx {[tpGetVar NumChannels]}##
		<input type="checkbox" value="##TP_C_ChannelId##"
			##TP_IF {[string first [tpBindGet C_ChannelId] [tpBindGet TermChannels]] >= 0}##checked##TP_ENDIF##
			onChange="if (this.checked) {
				this.form.elements['TermChannels'].value = this.form.elements['TermChannels'].value.replace(this.value, '') + this.value;
			} else {
				this.form.elements['TermChannels'].value = this.form.elements['TermChannels'].value.replace(this.value, '');
			}">
			##TP_C_Desc##
		##TP_ENDLOOP##
	</td>
</tr>
<tr>
	<th colspan=2 class=buttons>
	##TP_IF {[op_allowed ManageLDT]}##
		##TP_IF {[tpGetVar opAdd 0]}##
			<input type=button class="btn_def" value="Add Terminal" onClick="validate(this,'TermAdd');">
		##TP_ELSE##
			<input type=hidden name="TermCode" value="##TP_TermCode##">
			<input type=button class="btn_def" value="Modify Terminal" onClick="validate(this,'TermMod');">
			<input type=button class="btn_def" value="Delete Terminal" onClick="fs(this,'TermDel');">
			##TP_IF {![tpGetVar opAdd 0]}##
				<input type=button class="btn_def" value="Permissions" onClick="fs(this,'TermPerm');">
			##TP_ENDIF##
		##TP_ENDIF##
	##TP_ENDIF##
	<input type=button class="btn_def" value="Back" onClick="fs(this,'Back');">
	</th>
</tr>
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value="ADMIN::LDT::DoTerm">
</form>
</table>

<br />

##TP_IF {[tpGetVar opAdd 0]==0 && ([tpGetVar TermType] != "P")}##
	<table cellpadding="3" cellspacing="0" border="0">
	<tr>
		<th colspan=3 class=title>
			##TP_TermCode## Terminal Accounts
		</th>
		<tr>
			<th nowrap class=colhead>Currency</th>
			<th nowrap class=colhead>Public Account</th>
			<th nowrap class=colhead>Private Account</th>
		</tr>
		##TP_IF {[tpGetVar NumAccounts 0]>0}##
			##TP_LOOP a_idx {[tpGetVar NumAccounts]}##
				<tr>
					<td>##TP_CCYName##</td>
					<td><a href="##TP_CGI_URL##?action=ADMIN::CUST::GoCust&CustId=##TP_CustIdPub##">##TP_UserNamePub##</a></td>
					<td><a href="##TP_CGI_URL##?action=ADMIN::CUST::GoCust&CustId=##TP_CustIdPrv##">##TP_UserNamePrv##</a></td>
				</tr>
			##TP_ENDLOOP##
		##TP_ELSE##
			<tr>
				<td colspan=1>
				<b><i>No Registered Accounts</i></b>
				</td>
			</tr>
		##TP_ENDIF##

	</tr>
	</table>
	<br><br>
	<table cellpadding="3" cellspacing="0" border="0">
	<tr>
		<th colspan=2 class=title>
			##TP_TermCode## Register New Account
		</th>
		<form name="frm_terminal_accounts" ACTION="##TP_CGI_URL##" method=get>
		##TP_IF {[tpGetVar NumCCy 0]>0}##
		<tr>
			<td>Select Currency</td>
			<td>
				<select name="ccy_code">
					<script>
					write_select("##TP_CCY##"
						##TP_LOOP ccy_idx {[tpGetVar NumCCy]}##
							,"##TP_CCYCode##","##TP_CCYCode##"
						##TP_ENDLOOP##
					);
					</script>
				</select>
			</td>
		</tr>
		<tr>
			<th class=buttons colspan=2>
				<input type=hidden name="term_code" value="##TP_TermCode##">
				<input type=hidden name=SubmitName value="">
				<input type=hidden name=action value="ADMIN::LDT::DoAddTermAcct">
				<input type=button value="Register New Account" onClick="return fs(this,'AddTermAcct')">
			</th>
		</tr>
		##TP_ELSE##
			<tr>
				<td colspan=1>
				<b><i>No Currencies Remaining</i></b>
				</td>
			</tr>
		##TP_ENDIF##
		</form>
	</table>
##TP_ENDIF##

</body>
</html>
