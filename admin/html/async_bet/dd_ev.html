##TP_COMMENT $Id: dd_ev.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $##
##TP_COMMENT Copyright (c) 2005 Orbis Technology Ltd. All rights reserved.##

<!-- Drill-Down Event -->
<tr id="ev_##TP_leg_leg_no##_##TP_leg_part_no##" style="display:none">
	##TP_IF {$ASYNC(leg,[tpGetVar leg_idx],ev_update)}##
		<form action="##TP_CGI_URL##" name="ev_##TP_leg_leg_no##_##TP_leg_part_no##" method="get">
		<input type="hidden" name="action" value="ADMIN::ASYNC_BET::DoUpdDDEv">
		<input type="hidden" name="ev_id" value="##TP_leg_ev_id##">
		<input type="hidden" name="TypeId" value="##TP_leg_ev_type_id##">
		<input type="hidden" name="bet_id" value="##TP_bet_id##">
		<input type="hidden" name="bet_group_id" value="##TP_bet_group_id##">
		<input type="hidden" name="selected_leg" value="">
		<input type="hidden" name="selected_dd" value="">
	##TP_ENDIF##

	<td colspan="5" class="bordered_col">
		<table cellspacing="0" cellpadding="2" class="bordered_table" width="96%">

			##TP_IF {$ASYNC(leg,[tpGetVar leg_idx],ev_id) == [tpGetVar DD_EV_ID ""]}##
				##TP_IF {[tpGetVar IsError 0]}##
					<tr id="dd_update_msg_ev_##TP_leg_leg_no##_##TP_leg_part_no##">
						<th class="subcaption" colspan="2" style="color: red">
							Error: while updating ##TP_leg_ev_name## Event Details
							<br>##TP_ErrMsg## ##TP_ERROR## ##TP_ErrorSite##
						</td>
					</tr>
				##TP_ELSE##
					<tr id="dd_update_msg_ev_##TP_leg_leg_no##_##TP_leg_part_no##">
						<th class="subcaption" colspan="2" style="color: green">
							Successfully updated ##TP_leg_ev_name## Event Details
						</td>
					</tr>
				##TP_ENDIF##
			##TP_ENDIF##
			<tr id="dd_caption_ev_##TP_leg_leg_no##_##TP_leg_part_no##" ##TP_IF {$ASYNC(leg,[tpGetVar leg_idx],ev_id) == [tpGetVar DD_EV_ID ""]}##style="display:none"##TP_ENDIF##>
				<th class=subtitle colspan="2">
					##TP_leg_ev_name## Event Details
				</td>
			</tr>

			<tr>
				<td class="caption">Status</td>
				<td>
					##TP_IF {$ASYNC(leg,[tpGetVar leg_idx],ev_update)}##
						<select name="status">
							<script>
								write_select('##TP_leg_ev_status##','A','Active','S','Suspended')
							</script>
						</select>
					##TP_ELSEIF {$ASYNC(leg,[tpGetVar leg_idx],ev_settled) == "Y"}##
						Settled
					##TP_ELSE##
						Result Confirmed
					##TP_ENDIF##
				</td>
			</tr>

			##TP_IF {$ASYNC(leg,[tpGetVar leg_idx],ev_update)}##
				<tr>
					<td class="caption">Displayed</td>
					<td>
						<select name="displayed">
							<script>
								write_select('##TP_leg_ev_displayed##', 'Y','Yes','N','No');
							</script>
						</select>
					</td>
				</tr>

				##TP_IF {[string first DISP_ORDER [OT_CfgGet FUNC_EVENT_FIELDS ""]] >= 0}##
					<tr>
						<td class="caption">Disporder</td>
						<td>
							<input type="text" name="disporder" value="##TP_leg_ev_disporder##" size="8">
						</td>
					</tr>
				##TP_ELSE##
					<input type="hidden" name="disporder" value="##TP_leg_ev_disporder##">
				##TP_ENDIF##

				<tr>
					<td class="caption">Start Time</td>
					<td>
						<input name="start_time" type="text" size="19" value="##TP_leg_ev_start_time##">
						##TP_IF {[OT_CfgGet IS_OFF_ALL_CLASSES "N"] == "Y" || [string first $ASYNC(leg,[tpGetVar leg_idx],class_sort) "HA/HR/GR/PL"] >= 0}##
							&nbsp;&nbsp;&nbsp;<b>Off ?</b>
							<select name="is_off">
								<script>
									write_select('##TP_leg_ev_is_off##','-','N/A','N','No','Y','Yes')
								</script>
							</select>
						##TP_ELSE##
							<input type="hidden" name="is_off" value="-">
						##TP_ENDIF##
					</td>
				</tr>

				<tr>
					<td class="caption" valign="top">Suspend at</td>
					<td>
						<input name="suspend_at" type="text" size="19" value="##TP_leg_ev_suspend_at##">
						<br>Date Format: yyyy-mm-dd hh:dd:ss
					</td>
				</tr>

				<tr>
					<td class="caption">Betting</td>
					<td>
						Min Bet:&nbsp;<input name="ev_min_bet" type="text" size="12" value="##TP_leg_ev_min_bet##">
						&nbsp;##TP_IF {[OT_CfgGet FUNC_VARIABLE_MAX_STAKES_BY_TIME 0] && ([lsearch [OT_CfgGet VAR_MAX_STAKE_CLASSES ""] $ASYNC(leg,[tpGetVar leg_idx],ev_class_id)] != -1)}##Standard ##TP_ENDIF##Max Bet&nbsp;
						<input name="ev_max_bet" type="text" size="12" value="##TP_leg_ev_max_bet##">
						&nbsp;
						##TP_IF {[OT_CfgGet FUNC_MAX_WIN_MULTIPLES 0]}##
						Max Multiple Bet:&nbsp;<input name="ev_max_mult_bet" type="text" size=12 value="##TP_leg_ev_max_mult_bet##" />
						##TP_ELSE##
						<input name="ev_max_mult_bet" type="hidden" value="##TP_leg_ev_max_mult_bet##">
						##TP_ENDIF##
					</td>
				</tr>
				##TP_IF {[OT_CfgGet FUNC_LAY_TO_LOSE 0] && [OT_CfgGet FUNC_LAY_TO_LOSE_EV 0]}##
				<tr>
					<td class="caption">Lay to Lose</td>
					<td>
						Least Max Bet:&nbsp;<input name="LeastMaxBet" type="text" size="12" value="##TP_leg_ev_least_max_bet##" />&nbsp;
						Most Max Bet:&nbsp;<input name="MostMaxBet" type="text" size="12" value="##TP_leg_ev_most_max_bet##" />&nbsp;
						Lay To Lose:&nbsp;<input name="LayToLose" type="text" size="12" value="##TP_leg_ev_lay_to_lose##" />
					</td>
				</tr>
				##TP_ENDIF##
				<tr>
					<td class="caption">Liability Limit</td>
					<td>
						<input name="Liability" type="text" size="12" value="##TP_leg_ev_liability##" />
					</td>
				</tr>
			##TP_ENDIF ev_update##

			##TP_IF {[op_allowed ManageEv] && $ASYNC(leg,[tpGetVar leg_idx],ev_update)}##
			<tr>
				<th colspan="4" class=buttons>
					<input type="button" class="btn_def" value="Update" onclick="updDDEv(this, 'ev_##TP_leg_leg_no##_##TP_leg_part_no##')">&nbsp;&nbsp;&nbsp;&nbsp;
				</th>
			</tr>
			##TP_ENDIF##

		</table>
	</td>

	##TP_IF {$ASYNC(leg,[tpGetVar leg_idx],ev_update)}##
	</form>
	##TP_ENDIF##

</tr>
<!-- End of Drill-Down Event -->
