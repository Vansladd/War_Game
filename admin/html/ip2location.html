<html>
<!-- $Id: ip2location.html,v 1.1.1.1 2011/10/04 10:54:25 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>OpenBet Administration</title>
##TP_PLAY JS_WriteSelect.html##
<script>
function isValidIP(b,act)
{
	var ipaddr = document.forms[1].elements["IPAddress"].value;
	
	var exp = /^\s*(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\s*$/;
	
	if (!exp.test(ipaddr)) {
		alert("Invalid IP address");
		return false;
	} else {
		fs(b,act);
		return true;
	}
}

function fs(b,act)
{
	b.disabled = true;
	b.value = "Busy...";
	b.form.action.value=act;
	b.form.submit();
	return true;
}
</script>
</head>
<body>
##TP_PLAY error_rpt.html##
##TP_IF {[tpGetVar IPAdded 0]}##
<h3><font color=green>New IP Added</font></h3>
##TP_ENDIF##
##TP_IF {[tpGetVar IPUpdated 0]}##
<h3><font color=green>IP(s) Updated/Deleted</font></h3>
##TP_ENDIF##
<form method=form action="##TP_CGI_URL##" onsubmit="return false;">
<input type="hidden" name="action" value="">
<table cellspacing=0 cellpadding=2 border=0>
<tr>
	<th colspan=6 class=title>IP Allowed</th>
</tr>
<tr>
	<th class=colhead>IP</th>
	<th class=colhead>Active</th>
	<th class=colhead>Delete</th>
	<th class=colhead>Country Code</th>
	<th class=colhead>Country Name</th>
	<th class=colhead>ISP</th>
</tr>
##TP_IF {[tpGetVar NumIPs 0]==0}##
<tr>
	<td colspan=6>No Allowed IP's have been added</td>
</tr>
##TP_ELSE##
##TP_LOOP ip_idx {[tpGetVar NumIPs 0]}##
<tr>
	<td>##TP_IPAddress##</td>
	<td><input type="checkbox" value="Y" name="active_##TP_AllowId##" ##TP_IF {[tpBindGet Status]=="A"}##checked##TP_ENDIF##></td>
	<td><input type="checkbox" value="Y" name="del_##TP_AllowId##"></td>
	<td>##TP_CntryCode##</td>
	<td>##TP_CntryName##</td>
	<td>##TP_ISPName##</td>
</tr>
##TP_ENDLOOP##
##TP_ENDIF##
<tr>
	<th colspan=6 class=buttons>
	<input type="text" size=16 maxlength=15 name="NewIPAddress">
	<input type="button" class="btn_def" value="Add" onClick="return fs(this,'ADMIN::IP2LOCATION::AddIPAllow');">
	<input type="button" class="btn_def" value="Update" onClick="return fs(this,'ADMIN::IP2LOCATION::UpdIPAllow');">
</tr>
</table>
</br>
</br>
</form>
<form method=form action="##TP_CGI_URL##" onsubmit="return false;">
<input type="hidden" name="action" value="">
<table cellspacing=0 cellpadding=2 border=0>
<tr>
	<th colspan=6 class=title>Search for IP country</th>
</tr>
<tr>
	<th colspan=2 class=buttons>
	<td>IP Address :</td>
	<td>
	<input type="text" size=16 maxlength=15 name="IPAddress">
	<input type="button" class="btn_def" value="Search" onClick="return isValidIP(this,'ADMIN::IP2LOCATION::DoIPSearch');">
	</td>
</tr>
</table>
</form>
</body>
</html>
