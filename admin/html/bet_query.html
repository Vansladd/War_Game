<html>
<!-- $Id: bet_query.html,v 1.1.1.1 2011/10/04 10:54:25 xbourgui Exp $ -->
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##" />
		<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet" />
		<title>OpenBet Administration</title>
##TP_PLAY header_cal.html##
<script>
function fs(b,t)
{
	var label = b.value;

	b.disabled=true;
	b.value = "Busy...";

	##TP_IF {[OT_CfgGet VALIDATE_BET_SEARCHES 0]  && [tpGetVar QUERY_TYPE ""]!="birfail"}##
	// Validate to make sure we have a sensible search
	if (b.form.name == "Bet_Search_Criteria" && !validate()) {
		b.disabled = false;
		b.value = label;
		return false;
	}
	##TP_ENDIF##

	b.form.SubmitName.value=t;
	b.form.submit();
	return true;
}



##TP_IF {[OT_CfgGet VALIDATE_BET_SEARCHES 0] && [tpGetVar QUERY_TYPE ""]!="birfail"}##
function validate()
{
	var bet_placed_1      = document.forms.Bet_Search_Criteria.BetDate1.value,
		bet_placed_2      = document.forms.Bet_Search_Criteria.BetDate2.value,
		bet_placed_from   = document.forms.Bet_Search_Criteria.BetPlacedFrom.value,
		bet_settled_1     = document.forms.Bet_Search_Criteria.StlDate1.value,
		bet_settled_2     = document.forms.Bet_Search_Criteria.StlDate2.value,
		date_fields       = bet_placed_1 + bet_placed_2 + bet_settled_1 + bet_settled_2,
		receipt           = document.forms.Bet_Search_Criteria.Receipt.value,
		compulsory_fields = document.forms.Bet_Search_Criteria.Customer.value + document.forms.Bet_Search_Criteria.RepCode.value,
		extras = "", hours = 0, date_1, date_2, receipt_re = "",
		date_unit = 1000*60*60; // This is the number of milliseconds in an hour (unit of time for config item)

	##TP_IF {[OT_CfgGetTrue FUNC_BET_NAME_SEARCH]}##
		compulsory_fields += document.forms.Bet_Search_Criteria.LName.value;
	##TP_ENDIF##

	##TP_IF {[OT_CfgGetTrue FUNC_BET_EMAIL_SEARCH]}##
		compulsory_fields += document.forms.Bet_Search_Criteria.Email.value;
	##TP_ENDIF##

	##TP_IF {[OT_CfgGetTrue FUNC_BET_ACCTNO_SEARCH]}##
		compulsory_fields += document.forms.Bet_Search_Criteria.AcctNo.value;
	##TP_ENDIF##

	##TP_IF {([OT_CfgGetTrue FUNC_SHOP_FIELDING_ACCOUNTS] || [OT_CfgGetTrue FUNC_SHOP_ACCOUNTS]) && [tpGetVar QUERY_TYPE ""] == "sports"}##
	compulsory_fields += document.forms.Bet_Search_Criteria.ShopNumber.value;
	extras += "\n\t- Shop Number";
	##TP_ENDIF##

	##TP_IF {[reqGetArg type] != "iballs"}##
	compulsory_fields += document.forms.Bet_Search_Criteria.Receipt.value;
	extras += "\n\t- Receipt";
	receipt_re = new RegExp("O\/\\d{7,}\/\\d{0,}");
	##TP_ENDIF##

	##TP_IF {[reqGetArg type] == "pools"}##
	compulsory_fields += document.forms.Bet_Search_Criteria.TSN.value;
	extras += "\n\t- TSN";
	receipt_re = new RegExp("P\/\\d{7,}\/\\d{0,}");
	##TP_ELSEIF {[reqGetArg type] == "xgame"}##
	receipt_re = new RegExp("L\/\\d{7,}\/\\d{0,}");
	##TP_ENDIF##

	// If we've got no dates and no compulsory fields, then we shouldn't run the search
	if (compulsory_fields == "") {
		if (date_fields == "") {
			// Drop down still counts as a date.
			if (bet_placed_from == 0) {
				alert("The search you have entered will return a LOT of bets.  Please redefine it to include at least one of the following fields:\n\t- Username\n\t- Surname\n\t- Email\n\t- Account No\n\t- Rep Code\n\t- Date (bet placement or settlement)" + extras);
				return 0;
			} else {
				date_1 = new Date();
				switch (parseInt(bet_placed_from)) {
				case 1:
					hours = 1;
					break;
				case 2:
					hours = date_1.getHours();
					break;
				case 3:
					hours = date_1.getHours() + 24;
					break;
				case 4:
					hours = date_1.getHours() + 72;
					break;
				case 5:
					hours = date_1.getHours() + 168;
					break;
				case 6:
					date_2 = new Date(date_1.getFullYear(),date_1.getMonth(),1);
					hours = Math.ceil( (date_1.getTime() - date_2.getTime())/date_unit );
					break;
				}
			}
		} else {
			// Set the number of hours between the dates specified
			var re = new RegExp("[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}");
			if (bet_placed_1 != "" && bet_placed_2 != "") {

				if (!re.test(bet_placed_1)) {
					alert("First 'Bet placed between' date is invalid");
					return 0;
				} else if (!re.test(bet_placed_2)) {
					alert("Second 'Bet placed between' date is invalid");
					return 0;
				}

				date_1 = new Date(bet_placed_1.substring(0,4),parseInt(bet_placed_1.substring(5,7)) - 1,parseInt(bet_placed_1.substring(8,10)));
				date_2 = new Date(bet_placed_2.substring(0,4),parseInt(bet_placed_2.substring(5,7)) - 1,parseInt(bet_placed_2.substring(8,10)));

				date_1.setUTCHours(parseInt(bet_placed_1.substring(11,13)));
				date_1.setMinutes(parseInt(bet_placed_1.substring(14,16)));
				date_1.setSeconds(parseInt(bet_placed_1.substring(17,19)));
				date_2.setUTCHours(parseInt(bet_placed_2.substring(11,13)));
				date_2.setMinutes(parseInt(bet_placed_2.substring(14,16)));
				date_2.setSeconds(parseInt(bet_placed_2.substring(17,19)));

			} else if (bet_settled_1 != "" && bet_settled_2 != "") {

				if (!re.test(bet_settled_1)) {
					alert("First 'Settled date between' is invalid");
					return 0;
				} else if (!re.test(bet_settled_2)) {
					alert("Second 'Settled date between' is invalid");
					return 0;
				}

				date_1 = new Date(bet_settled_1.substring(0,4),parseInt(bet_settled_1.substring(5,7)) - 1,parseInt(bet_settled_1.substring(8,10)));
				date_2 = new Date(bet_settled_2.substring(0,4),parseInt(bet_settled_2.substring(5,7)) - 1,parseInt(bet_settled_2.substring(8,10)));

				date_1.setUTCHours(parseInt(bet_settled_1.substring(11,13)));
				date_1.setMinutes(parseInt(bet_settled_1.substring(14,16)));
				date_1.setSeconds(parseInt(bet_settled_1.substring(17,19)));
				date_2.setUTCHours(parseInt(bet_settled_2.substring(11,13)));
				date_2.setMinutes(parseInt(bet_settled_2.substring(14,16)));
				date_2.setSeconds(parseInt(bet_settled_2.substring(17,19)));

			} else {
				alert("Please enter both a from and to date.");
				return 0;
			}

			// Actually do the calculation and set the number of hours
			hours = Math.ceil( (date_2.getTime() - date_1.getTime())/date_unit );
		}

		if (hours <= ##TP_TCL {tpBufWrite [OT_CfgGet BET_SEARCH_HOUR_LIMIT 99999]}##) {
			// The hours are beneath the limit we've set so it's ok to do the search
			return 1;
		} else if (confirm("The date range you have specified will return a large number of bets.  As a result, it may take some time to return results and impact the speed of the database for other users.  Continue?")) {
			return 1;
		} else {
			return 0;
		}
	} else if (typeof receipt != 'undefined' && receipt != "") {
		// If we've got a receipt, check it's valid.
		if (receipt_re.test(receipt)) {
			return 1;
		} else {
			##TP_IF {[reqGetArg type] == "pools"}##
			alert("Please enter a valid receipt, of the form P/XXXXXXX/YYYYYYY, where the Y's are optional.")
			##TP_ELSEIF {[reqGetArg type] == "xgame"}##
			alert("Please enter a valid receipt, of the form L/XXXXXXX/YYYYYYY, where the Y's are optional.")
			##TP_ELSE##
			alert("Please enter a valid receipt, of the form O/XXXXXXX/YYYYYYY, where the Y's are optional.")
			##TP_ENDIF##
			return 0;
		}
	} else {
		// We've got something in the compulsory fields somewhere
		return 1;
	}
}
##TP_ENDIF##



function greyReceiptField(button, bool) {
	button.form.Receipt.readOnly=bool;
	button.form.Receipt.disabled=bool;
	if(bool){
		button.form.Receipt.value="";
	}
}

function displayCalendars() {

	new Calendar(document.forms.Bet_Search_Criteria.BetDate1, null, true, "lo");
	new Calendar(document.forms.Bet_Search_Criteria.BetDate2, null, true, "lo");

	##TP_IF {[tpGetVar QUERY_TYPE ""]!="birfail"}##
	new Calendar(document.forms.Bet_Search_Criteria.StlDate1, null, true, "lo");
	new Calendar(document.forms.Bet_Search_Criteria.StlDate2, null, true, "lo");
	##TP_ENDIF##

	##TP_IF {[tpGetVar QUERY_TYPE ""]=="sports"}##
		new Calendar(document.forms.Bets_manual_settlement.BetDate1,null,false);
		new Calendar(document.forms.Bets_manual_settlement.BetDate2,null,false);
	##TP_ENDIF##

	##TP_IF {[tpGetVar QUERY_TYPE ""]!="birfail"}##
	new Calendar(document.forms.Bets_pending_settlement.BetDate1, null, false);
	new Calendar(document.forms.Bets_pending_settlement.BetDate2, null, false);
	##TP_ENDIF##

	##TP_IF {[tpGetVar QUERY_TYPE ""]!="birfail"}##
		##TP_IF {[OT_CfgGet ALLOW_RETRO_BETS 0] == 1}##
			##TP_IF {[tpGetVar QUERY_TYPE ""]=="xgame" || [tpGetVar QUERY_TYPE ""]=="sports"}##
				new Calendar(document.forms.Retrospective_Bets.BetDate1,null,false,"lo");
				new Calendar(document.forms.Retrospective_Bets.BetDate2,null,false,"lo");
			##TP_ENDIF##

			new Calendar(document.forms.Retrospective_Override.ev_date_lo,null,false,"lo");
			new Calendar(document.forms.Retrospective_Override.ev_date_hi,null,false,"lo");
		##TP_ENDIF##

		##TP_IF {[OT_CfgGet ALLOW_BET_HEDGING 0] == 1}##
			new Calendar(document.forms.Bets_hedged.BetDate1,null,false,"lo");
			new Calendar(document.forms.Bets_hedged.BetDate2,null,false,"lo");
		##TP_ENDIF##

		##TP_IF {[OT_CfgGet ALLOW_BET_FIELDING 0] == 1}##
			new Calendar(document.forms.Bets_fielded.BetDate1,null,false,"lo");
			new Calendar(document.forms.Bets_fielded.BetDate2,null,false,"lo");
		##TP_ENDIF##
	##TP_ENDIF##

	}

##TP_IF {[tpGetVar QUERY_TYPE ""]=="sports" && [OT_CfgGet NO_UNVETTED_BET_DESCRIPTION 0] == 1}##
function selectManualBets() {
	if (document.forms.Bet_Search_Criteria.UnvettedManualBetDesc.checked==true) {
		var bet_type_sel = document.forms.Bet_Search_Criteria.BetType;

		for (var i = 0; i < bet_type_sel.length; i++) {
			if (bet_type_sel[i].value == "MAN") {
				bet_type_sel[i].selected = true;
			}
		}
		document.forms.Bet_Search_Criteria.BetTypeOp.value = 1;
	}
}

function uncheckManualBetDesc() {
	if (document.forms.Bet_Search_Criteria.BetType.value!="MAN") {
		document.forms.Bet_Search_Criteria.UnvettedManualBetDesc.checked=false;
	}
}

function setShopNumberDisplay(){

	var shopCheck = document.getElementById("LBOCheck");
	var shopRow   = document.getElementById("LBONumberRow");

	if (shopCheck.checked) {
		shopRow.style.display = "";
	} else {
		shopRow.style.display = "none";
	}
}
function disableClassSelect() {
	var Wins1 = document.getElementById("W1");
	var Wins2 = document.getElementById("W2");
	var UStakes1 = document.getElementById("US1");
	var UStakes2 = document.getElementById("US2");
	var Stakes1 = document.getElementById("S1")
	var Stakes2 = document.getElementById("S2")
	if (Wins1.value=="" && Wins2.value=="" && UStakes1.value=="" && UStakes2.value=="" && Stakes1.value=="" && Stakes2.value=="") {
		document.forms.Bet_Search_Criteria.EvClassId.disabled=true
		document.forms.Bet_Search_Criteria.EvClassId.options[0].selected = true;
	} else {
		document.forms.Bet_Search_Criteria.EvClassId.disabled=false
	}
}

##TP_ENDIF##
		</script>
	</head>
	<body onload="displayCalendars();">
##TP_PLAY error_rpt.html##

		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Bet_Search_Criteria" method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">
					##TP_IF {[tpGetVar QUERY_TYPE ""] != "birfail"}##
						##TP_XL {Admin.Bet_Search.BET_SEARCH_CRITERIA}##
					##TP_ELSE##
						##TP_XL {Admin.Bet_Search.FAILED_BET_SEARCH_CRITERIA}##
					##TP_ENDIF##
					</th>
				</tr>
				<!-- optional - showed for xgame bet search -->
##TP_IF {[tpGetVar QUERY_TYPE ""]=="xgame"}##
				<tr>
					<td class="caption">Sort by</td>
					<td>
						<input type="radio" name="UseSub" value="Sub" checked onclick="greyReceiptField(this, false);" \>&nbsp;Subscriptions
						&nbsp;&nbsp;
						<input type="radio" name="UseSub" value="Bet" onclick="greyReceiptField(this, true);" \>&nbsp;Bets
					</td>
				</tr>
##TP_ENDIF##
				<!-- end bet search optional bit -->
##TP_IF {[OT_CfgGet FUNC_SHOW_CUST_TITLE 1]}##
				<tr class="subtitle">
					<th colspan="2" align="left">##TP_XL {Admin.Bet_Search.CUST_INFO}##</th>
				</tr>
##TP_ENDIF##
				<tr>
##TP_IF {![OT_CfgGetTrue FUNC_HIDE_USERNAMES]}##
					<td class="captionindex">##TP_XL {Admin.Bet_Search.USERNAME_LIKE}##</td>
					<td>
						<input type="text" name="Customer" value="" size="32" \>&nbsp;
						(##TP_XL {Admin.CASE_INSENSITIVE}##&nbsp;
						<input type="checkbox" name="UpperCust" value="Y"##TP_IF {[OT_CfgGet FUNC_DEF_CASE_INS_SEARCH 0] == 1}## checked##TP_ENDIF## />
	##TP_IF {[OT_CfgGetTrue FUNC_SHOP_FIELDING_ACCOUNTS] && [tpGetVar QUERY_TYPE ""] == "sports"}##
						&nbsp;&nbsp;##TP_XL {Admin.Bet_Search.LBO_ACCOUNT}##:
						<input type="checkbox" id="LBOCheck" name="LBOSearch" value="Y" onclick="setShopNumberDisplay();" />
	##TP_ENDIF##
						&nbsp;)
					</td>
##TP_ENDIF##
				</tr>
##TP_IF {([OT_CfgGetTrue FUNC_SHOP_FIELDING_ACCOUNTS] || [OT_CfgGetTrue FUNC_SHOP_ACCOUNTS]) && [tpGetVar QUERY_TYPE ""] == "sports"}##
				<tr id="LBONumberRow" style="display:none">
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.SHOP_NUMBER}##</td>
					<td>
						<input type="text" name="ShopNumber" value="" maxlength="6" size="6" />
						( ##TP_XL {Admin.EXACT}## :
						<input type="checkbox" name="full_shop_no" value="yes" checked />
						&nbsp;)
					</td>
				</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGetTrue FUNC_BET_NAME_SEARCH]}##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.BETTOR_NAME}##</td>
					<td>
						<input type="text" name="FName" value="" size="16" />
						&nbsp;&nbsp;
						<input type="text" name="LName" value="" size="16" />
					</td>
				</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGetTrue FUNC_BET_EMAIL_SEARCH]}##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.EMAIL_LIKE}##</td>
					<td><input type="text" name="Email" value="" size="40" /></td>
				</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGetTrue FUNC_BET_ACCTNO_SEARCH]}##
				<tr>
					<td class="captionindex">##TP_XL {Admin.Bet_Search.ACCT_NO}##</td>
					<td><input type="text" name="AcctNo" value="##TP_AcctNo##" size="32" /></td>
				</tr>
##TP_ENDIF##
##TP_IF {[op_allowed SearchElite] && [op_allowed EliteCustAccess]}##
				<tr>
			        <td class="caption">##TP_XL {Admin.Bet_Search.ELITE_ONLY}##</td>
			        <td><input type="checkbox" name="EliteSearch" value="Y" />&nbsp;</td>
				</tr>
##TP_ENDIF##
				<tr class="subtitle">
					<th colspan="2" align="left">
						##TP_IF {[tpGetVar QUERY_TYPE ""] != "birfail"}##
							##TP_XL {Admin.Bet_Search.BET_DETAILS}##
						##TP_ELSE##
							##TP_XL {Admin.Bet_Search.FAILED_BET_DETAILS}##
						##TP_ENDIF##
					</th>
				</tr>
				<!-- Only show draw number for iballs -->
##TP_IF {[tpGetVar QUERY_TYPE ""] == "iballs"}##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.IBALL_DRAW_NR}##</td>
					<td><input type="text" name="DrawNo" value="" size="9" /></td>
				</tr>
##TP_ELSEIF {[tpGetVar QUERY_TYPE ""] != "birfail"}##
				<!-- No receipt for iballs subscription -->
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.RECEIPT_LIKE}##</td>
					<td><input type="text" name="Receipt" value="" size="32" /></td>
				</tr>
	##TP_IF {[reqGetArg type] == "pools"}##
				<tr>
					<td class="caption">TSN</td>
					<td>
						<input type="text" name="TSN" value="" size="16" maxlength="16" title="The Tote Ticket Serial Number" />
						<small>Tote only</small>
					</td>
				</tr>
	##TP_ENDIF##
##TP_ENDIF##
##TP_IF {[tpGetVar QUERY_TYPE ""]=="xgame"}##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.XGAME_COMP_NO}##</td>
					<td><input type="text" name="CompNo" value="" size="4" /></td>
				</tr>
##TP_ENDIF##
				<tr>
					<td class="captionindex">##TP_XL {Admin.Bet_Search.BET_PLACED_BETWEEN}##</td>
					<td>
						<input type="text" name="BetDate1" value="" size="19" />
						&nbsp;##TP_XL {and}##&nbsp;
						<input type="text" name="BetDate2" value="" size="19" />
					</td>
				</tr>
				<tr>
					<td class="captionindex">##TP_XL {Admin.Bet_Search.BET_PLACED_BETWEEN}##</td>
					<td>
						<select name="BetPlacedFrom">
							<option value="0">##TP_XL {N/A}##</option>
							<option value="1" selected>##TP_XL {Last hour}##</option>
							<option value="2">##TP_XL {Today}##</option>
							<option value="3">##TP_XL {Yesterday}##</option>
							<option value="4">##TP_XL {Last 3 Days}##</option>
							<option value="5">##TP_XL {Last 7 Days}##</option>
							<option value="6">##TP_XL {Current Month}##</option>
						</select>&nbsp;
					</td>
				</tr>
##TP_IF {[tpGetVar QUERY_TYPE ""] != "birfail"}##
				<tr>
					<td class="captionindex">##TP_XL {Admin.Bet_Search.SETTLED_DATE_BETWEEN}##</td>
					<td>
						<input type="text" name="StlDate1" value="" size="19" />
						&nbsp;##TP_XL {and}##&nbsp;
						<input type="text" name="StlDate2" value="" size="19" />
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.STAKE_BETWEEN}##</td>
					<td>
						<input type="text" name="Stake1" value="" size="10" />
						&nbsp;##TP_XL {and}##&nbsp;
						<input type="text" name="Stake2" value="" size="10" />
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.UNIT_STAKE_BETWEEN}##</td>
					<td>
					<input type="text" name="UStake1" value="" size="10" />
					&nbsp;##TP_XL {and}##&nbsp;
					<input type="text" name="UStake2" value="" size="10" />
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.WINNINGS_BETWEEN}##</td>
					<td>
					<input type="text" name="Wins1" value="" size="10" />
					&nbsp;##TP_XL {and}##&nbsp;
					<input type="text" name="Wins2" value="" size="10" />
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.BET_IS}##</td>
					<td>
						<select name="Settled">
							<option value="">##TP_XL {N/A}##</option>
							<option value="Y">##TP_XL {Admin.Bet_Search.SETTLED}##</option>
							<option value="N">##TP_XL {Admin.Bet_Search.NOT_SETTLED}##</option>
						</select>&nbsp;
					</td>
				</tr>
##TP_ENDIF##
##TP_IF {[tpGetVar QUERY_TYPE ""] == "pools"}##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.BET_STATUS_IS}##</td>
					<td>
						<select name="BetStatus">
							<option value="">##TP_XL {N/A}##</option>
							<option value="Y">##TP_XL {Admin.BET_STATUS_ACTIVE}## (##TP_XL {Admin.Bet_Search.NOTE_NORMAL}##)</option>
							<option value="W">##TP_XL {Admin.BET_STATUS_PENDING}##</option>
							<option value="X">##TP_XL {Admin.BET_STATUS_CANCELLED}##</option>
						</select>&nbsp;
					</td>
				</tr>
##TP_ENDIF##
##TP_IF {[tpGetVar QUERY_TYPE ""] == "sports"}##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.INCLUDE_VOID_BETS}##</td>
					<td><input type="checkbox" name="CancelBet" value="cancel" size="10" /></td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.SETTLEMENT}##</td>
					<td>
						<select name="SettleHow">
							<option value="">##TP_XL {N/A}##</option>
							<option value="S">##TP_XL {Admin.Bet_Search.BY_SETTLER}##</option>
							<option value="M">##TP_XL {Admin.Bet_Search.MANUALLY_SETTLED}##</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.EVENT_STATUS_IS}##</td>
					<td>
						<select name="EvStatus">
							<option value="" selected>##TP_XL {N/A}##</option>
							<option value="A">##TP_XL {Admin.EVENT_STATUS_ACTIVE}##</option>
							<option value="S">##TP_XL {Admin.EVENT_STATUS_SUSP}##</option>
						</select>
					</td>
				</tr>
	##TP_IF {[OT_CfgGet FUNC_ANTEPOST 0]}##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.ANTEPOST_BET}##</td>
					<td>
						<select name="Antepost">
							<option value="">##TP_XL {N/A}##</option>
							<option value="N">##TP_XL {Admin.Bet_Search.ANTEPOST_BET_UNPAID}##</option>
							<option value="A">##TP_XL {Admin.Bet_Search.ANTEPOST_BET_PAID}##</option>
						</select>
					</td>
				</tr>
	##TP_ENDIF##
	##TP_IF {[OT_CfgGet BF_ACTIVE 0]}##
		<tr>
			<td class=caption>Betfair Pass Through Bets</td>
			<td>
				<select name="BFPassThru">
					<option value="NA" selected>N/A</option>
					<option value="Y">Yes</option>
					<option value="N">No</option>
		 		</select>
		 	</td>
		</tr>
		<tr>
			<td class=caption>Betfair Risk Reduced Bets</td>
			<td>
				<select name="BFRiskReduce">
					<option value="NA" selected>N/A</option>
					<option value="Y">Yes</option>
					<option value="N">No</option>
		 		</select>
			</td>
		</tr>
	##TP_ENDIF##
##TP_ENDIF##
##TP_IF {[tpGetVar QUERY_TYPE ""] != "pools"}##
				<tr>
					<td class="caption" valign="center">
	##TP_IF {[tpGetVar QUERY_TYPE ""]=="xgame"}##
						##TP_XL {Admin.Bet_Search.XGAME_SORT}##
	##TP_ELSE##
						##TP_XL {Admin.Bet_Search.BET_TYPE}##
	##TP_ENDIF##
					</td>
					<td valign="center" class="table">
						<table cellspacing="0" cellpadding="2" border="0">
							<tr>
								<td valign="center">
									<select name="BetTypeOp">
										<option value="">##TP_XL {N/A}##</option>
										<option value="1">##TP_XL {is}##</option>
										<option value="0">##TP_XL {is not}##</option>
									</select>
									&nbsp;
								</td>
								<td>
									<select multiple name="BetType" size="8"##TP_IF {[tpGetVar QUERY_TYPE ""]=="sports" && [OT_CfgGet NO_UNVETTED_BET_DESCRIPTION 0] == 1}## onchange="uncheckManualBetDesc()"##TP_ENDIF##>
	##TP_LOOP bet_type_idx {[tpGetVar bet_type_rows]}##
										<option value="##TP_BetType##">##TP_BetName##</option>
	##TP_ENDLOOP bet_type_idx##
	##TP_IF {[tpGetVar QUERY_TYPE ""]!="xgame" && [OT_CfgGet FUNC_CUST_MANUAL_BETS 0]}##
										<option value="MAN">*##TP_XL {Admin.Bet_Search.MANUAL_BET}##</option>
	##TP_ENDIF##
									</select>
									<br><font color="green">* ##TP_XL {Admin.Bet_Search.DENOTES_MAN_SETTLEMENT}##</font>
								</td>
							</tr>
						</table>
					</td>
				</tr>
##TP_ELSE##
				<tr>
					<td class="caption" valign="center">##TP_XL {Admin.Bet_Search.POOL_TYPE}##</td>
					<td valign="center" class="table">
						<table cellspacing="0" cellpadding="2" border="0">
							<tr>
							<td valign=center>
								<select name="PoolTypeOp">
									<option value="">##TP_XL {N/A}##</option>
									<option value="1">##TP_XL {is}##</option>
									<option value="0">##TP_XL {is not}##</option>
								</select>
								&nbsp;
							</td>
							<td>
								<select multiple name="PoolType" size=8>
	##TP_LOOP pool_type_idx {[tpGetVar pool_type_rows]}##
									<option value="##TP_PoolType##">##TP_PoolName##</option>
	##TP_ENDLOOP pool_type_idx##
								</select>
							</td>
						</table>
					</td>
				</tr>
				<tr>
					<td class="caption" valign="center">##TP_XL {Admin.Bet_Search.MEETING}##</td>
					<td valign="center" class="table">
						<table cellspacing="0" cellpadding="2" border="0">
							<tr>
								<td>
									<select name="MeetingTypeOp">
										<option value="">##TP_XL {N/A}##</option>
										<option value="1">##TP_XL {is}##</option>
										<option value="0">##TP_XL {is not}##</option>
									</select>
									&nbsp;
								</td>
								<td>
									<select multiple name="PoolMeeting" size="8">
	##TP_LOOP pool_meeting_idx {[tpGetVar pool_meeting_rows]}##
										<option value="##TP_MeetingType##">##TP_MeetingName##</option>
	##TP_ENDLOOP pool_meeting_idx##
									</select>
								</td>
							</tr>
						</table>
					</td>
				</tr>
##TP_ENDIF##
				<tr>
					<td class="caption" valign="center">##TP_XL {Admin.Bet_Search.CHANNEL}##</td>
					<td valign="center" class="table">
						<table cellspacing="0" cellpadding="2" border="0">
							<tr>
								<td valign="center">
									<select name="ChannelOp">
										<option value="">##TP_XL {N/A}##</option>
										<option value="1">##TP_XL {is from}##</option>
										<option value="0">##TP_XL {is not from}##</option>
									</select>
									&nbsp;
								</td>
								<td>
									<select multiple name="ChannelName" size="8">
##TP_LOOP bc_idx {$BET_CHANNELS(NumBetChannels)}##
										<option value="##TP_BetChannel##">##TP_BetChannelDesc##</option>
##TP_ENDLOOP bc_idx##
									</select>
								</td>
							</tr>
						</table>
					</td>
				</tr>

##TP_IF {[OT_CfgGet ON_COURSE_BETTING 0]}##
<tr>
	<td class=caption valign=center>On-Course</td>
	<td valign=center class="table">
	<table cellspacing=0 cellpadding=2 border=0>
		<tr>
		<td valign=center>
		<select name="OnCourseOp">
			<option value="">N/A</option>
			<option value="1">is from</option>
			<option value="0">is not from</option>
		</select>
		&nbsp;
		</td>
		<td>
		<select multiple name="CourseType" size=8 >
			<option value="B">Book</option>
			<option value="H">Hedging</option>
			<option value="C">Card</option>
		</select>
		</td>
		</tr>
      </table>
	</td>
</tr>
##TP_ENDIF##
##TP_IF {[tpGetVar QUERY_TYPE ""]=="sports" && [OT_CfgGet NO_UNVETTED_BET_DESCRIPTION 0] == 1}##
				<tr>
					<td class="caption" valign="center">##TP_XL {Admin.Bet_Search.UNVETTED_MAN_BET_DESCS}##</td>
					<td valign="center">
						<input type="checkbox" name="UnvettedManualBetDesc" value="Y" onclick="selectManualBets();" />
					</td>
				</tr>
##TP_ENDIF##
<tr>
	<td class="caption" valign="center">Rep Code</td>
	<td valign="center">
		<input type="field" name="RepCode" value="">
	</td>
</tr>

				<tr>
					<th class="buttons" colspan="2">
						<input type="button" class="btn_def" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets')" />
					</th>
				</tr>
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="action" value="ADMIN::BET::DoBetQuery" />
				<input type="hidden" name="QueryType" value="##TP_TCL {tpBufWrite [tpGetVar QUERY_TYPE ""]}##" />
			</form>
		</table>
		<br />
##TP_IF {[tpGetVar QUERY_TYPE ""] == "sports"}##
	##TP_IF {[OT_CfgGet FUNC_CUST_MANUAL_BETS 0]}##
		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Bets_manual_settlement" method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">
						##TP_XL {Admin.Bet_Search.BETS_TO_BE_STLD_MANUALLY}##
					</th>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.ORDER_BY_BET_WITH}##</td>
					<td><input type="radio" name="ManBetOrd" value="R" checked />&nbsp; ##TP_XL {Admin.Bet_Search.MOST_RECENT_STLD_SELN}##</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
					<td><input type="radio" name="ManBetOrd" value="E" />&nbsp; ##TP_XL {Admin.Bet_Search.EARLIEST_SELN}##</td>
				</tr>
				<tr>
					<td>&nbsp;</td>
					<td><input type="radio" name="ManBetOrd" value="L" />&nbsp; ##TP_XL {Admin.Bet_Search.LATEST_SELN}##</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.SETTLEMENT_EXPECTED_BETWEEN}##</td>
					<td>
					<input type="text" name="BetDate1" value="" size="10" />
					&nbsp;##TP_XL {and}##&nbsp;
					<input type="text" name="BetDate2" value="" size="10" />
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.BATCH_REF}##</td>
					<td><input type="text" name="batch_ref_id" /></td>
				</tr>
				<tr>
					<th class="buttons" colspan="2">
						<input type="button" class="btn_def" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets');" />
					</th>
				</tr>
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="action" value="ADMIN::BET::DoManualBetQuery" />
			</form>
		</table>
		<br>
	##TP_ENDIF##
		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Bets_pending_settlement" method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">
						##TP_XL {Admin.Bet_Search.BETS_PENDING_SETTLEMENT}##
					</th>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.SETTLEMENT_DATE_BETWEEN}##</td>
					<td>
						<input type="text" name="BetDate1" value="" size="10" />
						&nbsp;##TP_XL {and}##&nbsp;
						<input type="text" name="BetDate2" value="" size="10" />
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.WINNINGS_GREATER_THAN}##</td>
					<td><input type="text" name="WinThresh" value="##TP_WinThresh##" size="10" /></td>
				</tr>
				<tr>
					<th class="buttons" colspan="2">
						<input type="button" class="btn_def" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets')" />
					</th>
				</tr>
				<input type="hidden" name="QueryType" value="##TP_TCL {tpBufWrite [tpGetVar QUERY_TYPE ""]}##" />
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="action" value="ADMIN::BET::DoStlPendQuery" />
			</form>
		</table>
	##TP_IF {[OT_CfgGet ALLOW_RETRO_BETS 0] == 1}##
		<br />
		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Retrospective_Bets" method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">##TP_XL {Admin.Bet_Search.RETRO_BETS}##</th>
				</tr>
				<tr>
					<td class=caption>##TP_XL {Admin.Bet_Search.EVENT_DATE_BETWEEN}##</td>
					<td>
						<input type="text" name="BetDate1" value="" size="10" />
						&nbsp;##TP_XL {and}##&nbsp;
						<input type="text" name="BetDate2" value="" size="10" />
					</td>
				</tr>
		##TP_IF {[info exists RETRO_CHAN] && $RETRO_CHAN(num) > 0}##
				<tr>
					<td valign="center">##TP_XL {Admin.Bet_Search.CHANNEL}##</td>
					<td>
						<select name="RetroChannel">
			##TP_LOOP retro_chan_idx {$RETRO_CHAN(num)}##
							<option value="##TP_retro_chan_code##">##TP_retro_chan_name##</option>
			##TP_ENDLOOP retro_chan_idx##
						</select>
					</td>
				</tr>
		##TP_ENDIF##
				<tr>
					<th class="buttons" colspan="2">
						<input type="button" class="btn_def" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets')" />
					</th>
				</tr>
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="action" value="ADMIN::BET::DoRetroBet" />
			</form>
		</table>
		<br />
		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Retrospective_Override"  method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">
						##TP_XL {Admin.Bet_Search.RETRO_BETS_OVERRIDE}##
					</th>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.OVERRIDE_DATE}##</td>
					<td>
						<select name="ev_date_range">
							<option value="YEAR">##TP_XL {So Far this Year}##</option>
							<option value="MONTH">##TP_XL {So Far this Month}##</option>
							<option value="WEEK">##TP_XL {In the last Week}##</option>
							<option value="3DAYS">##TP_XL {In the last 3 days}##</option>
							<option value="YESTERDAY">##TP_XL {Yesterday}##</option>
							<option value="TODAY" selected="true">##TP_XL {Today}##</option>
							<option value="-">--##TP_XL {Please Specify}##--></option>
						</select>&nbsp;&nbsp;or&nbsp;
						<input type="text" name="ev_date_lo" value="" size="10" />&nbsp;##TP_XL {to}##&nbsp;
						<input type="text" name="ev_date_hi" value="" size="10" />
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.SETTLED}## </td>
					<td>
					<select name="settled">
						<option value="-" selected="true">##TP_XL {Either}##</option>
						<option value="N">##TP_XL {No}##</option>
						<option value="Y">##TP_XL {Yes}##</option>
					</select>
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.OVERRIDE_TYPE}## </td>
					<td>
						<select name="override_type">
							<option value="" selected="true">##TP_XL {Admin.Bet_Search.ALL}##</option>
							<option value="PriceOverride">##TP_XL {Admin.Bet_Search.SYSTEM_PRICE}##</option>
							<option value="CredLimOverride">##TP_XL {Admin.Bet_Search.CREDIT_LIMIT}##</option>
							<option value="PmtReferOverride">##TP_XL {Admin.Bet_Search.PMT_REFERRAL}##</option>
							<option value="EvStartOverride">##TP_XL {Admin.Bet_Search.ALLOW_STARTED_EVS_IN_BET}##</option>
							<option value="LowFundsOverride">##TP_XL {Admin.Bet_Search.DEP_ACCT_WITH_LOW_FUNDS}##</option>
							<option value="MaxBetOverride">##TP_XL {Admin.Bet_Search.OVERRIDE_MAX_BET_AMOUNT}##</option>
							<option value="MinBetOverride">##TP_XL {Admin.Bet_Search.OVERRIDE_MIN_BET_AMOUNT}##</option>
							<option value="AuthAskOverride">##TP_XL {Admin.Bet_Search.LOGIN_RESTRICTED_STATUS_FLAG}##</option>
							<option value="MonitorOverride">##TP_XL {Admin.Bet_Search.MONITOR_BETS_STATUS_FLAG}##</option>
							<option value="NoBetOverride">##TP_XL {Admin.Bet_Search.BLOCKED_BETS_STATUS_FLAG}##</option>
							<option value="AuthTradeOverride">##TP_XL {Admin.Bet_Search.RESTRICTED_BETTING_TO_SUPERVISOR_FLAG}##</option>
							<option value="NoDepositOverride">##TP_XL {Admin.Bet_Search.DEP_NOT_ALLOWED_FLAG}##</option>
							<option value="NoWithDrawOverride">##TP_XL {Admin.Bet_Search.WTD_BLOCKED_FLAG}##</option>
							<option value="FailedFraudOverride">##TP_XL {Admin.Bet_Search.FAILED_FRAUD_FLAG}##</option>
							<option value="NoPmtConnOverride">##TP_XL {Admin.Bet_Search.NO_PMT_GWAY_CONN}##</option>
							<option value="SelnSuspOverride">##TP_XL {Admin.Bet_Search.ALLOW_SUSP_SELNS_IN_BET}##</option>
						</select>
					</td>
				</tr>
		##TP_IF {[op_allowed SearchElite] && [op_allowed EliteCustAccess]}##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.ELITE_ONLY}## </td>
					<td><input type="checkbox" name="EliteSearch" value="Y" />&nbsp;</td>
				</tr>
		##TP_ENDIF##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.DISP_ORIGINAL_PRICE}## </td>
					<td>
						<input type="checkbox" name="DispOrigPrice" value="Y" />&nbsp;<i>(##TP_XL {Admin.Bet_Search.ONLY_FOR_SYS_PRICE_OVERRIDES}##)</i>
					</td>
				</tr>
				<tr>
					<th class="buttons" colspan="2">
						<input type="button" class="btn_def" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets')" />
					</th>
				</tr>
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="action" value="ADMIN::BET::DoRetroOverBet" />
			</form>
		</table>
	##TP_ENDIF##
##TP_ENDIF##
##TP_IF {[tpGetVar QUERY_TYPE ""] == "pools"}##
		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Bets_pending_settlement" method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">
						##TP_XL {Admin.Bet_Search.BETS_PENDING_SETTLEMENT}##
					</th>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.SETTLEMENT_DATE_BETWEEN}##</td>
					<td>
						<input type="text" name="BetDate1" value="" size="10" />
						&nbsp;##TP_XL {and}##&nbsp;
						<input type="text" name="BetDate2" value="" size="10" />
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.WINNINGS_GREATER_THAN}##</td>
					<td>
						<input type="text" name="WinThresh" value="##TP_WinThresh##" size="10" />
					</td>
				</tr>
				<tr>
					<th class="buttons" colspan="2">
					<input type="button" class="btn_def" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets')" />
					</th>
				</tr>
				<input type="hidden" name="QueryType" value="##TP_TCL {tpBufWrite [tpGetVar QUERY_TYPE ""]}##" />
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="action" value="ADMIN::BET::DoStlPendQuery" />
			</form>
		</table>
		<br />
		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Retrospective_Override" method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">
						##TP_XL {Admin.Bet_Search.RETRO_BETS_OVERRIDE}##
					</th>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.OVERRIDE_DATE}##</td>
					<td>
						<select name="ev_date_range">
							<option value="YEAR">##TP_XL {So Far this Year}##</option>
							<option value="MONTH">##TP_XL {So Far this Month}##</option>
							<option value="WEEK">##TP_XL {In the last Week}##</option>
							<option value="3DAYS">##TP_XL {In the last 3 days}##</option>
							<option value="YESTERDAY">##TP_XL {Yesterday}##</option>
							<option value="TODAY" selected="true">##TP_XL {Today}##</option>
							<option value="-">--##TP_XL {Please Specify}##--></option>
						</select>&nbsp;&nbsp;##TP_XL {or}##&nbsp;
						<input type="text" name="ev_date_lo" value="" size="10" />&nbsp;##TP_XL {to}##&nbsp;
						<input type="text" name="ev_date_hi" value="" size="10" />
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.SETTLED}## </td>
					<td>
						<select name="settled">
							<option value="-" selected="true">##TP_XL {Either}##</option>
							<option value="N">##TP_XL {No}##</option>
							<option value="Y">##TP_XL {Yes}##</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.OVERRIDE_TYPE}##</td>
					<td>
						<select name="override_type">
							<option value="" selected="true">##TP_XL {Admin.Bet_Search.ALL}##</option>
							<option value="PriceOverride">##TP_XL {Admin.Bet_Search.SYSTEM_PRICE}##</option>
							<option value="CredLimOverride">##TP_XL {Admin.Bet_Search.CREDIT_LIMIT}##</option>
							<option value="PmtReferOverride">##TP_XL {Admin.Bet_Search.PMT_REFERRAL}##</option>
							<option value="EvStartOverride">##TP_XL {Admin.Bet_Search.ALLOW_STARTED_EVS_IN_BET}##</option>
							<option value="LowFundsOverride">##TP_XL {Admin.Bet_Search.DEP_ACCT_WITH_LOW_FUNDS}##</option>
							<option value="MaxBetOverride">##TP_XL {Admin.Bet_Search.OVERRIDE_MAX_BET_AMOUNT}##</option>
							<option value="MinBetOverride">##TP_XL {Admin.Bet_Search.OVERRIDE_MIN_BET_AMOUNT}##</option>
							<option value="AuthAskOverride">##TP_XL {Admin.Bet_Search.LOGIN_RESTRICTED_STATUS_FLAG}##</option>
							<option value="MonitorOverride">##TP_XL {Admin.Bet_Search.MONITOR_BETS_STATUS_FLAG}##</option>
							<option value="NoBetOverride">##TP_XL {Admin.Bet_Search.BLOCKED_BETS_STATUS_FLAG}##</option>
							<option value="AuthTradeOverride">##TP_XL {Admin.Bet_Search.RESTRICTED_BETTING_TO_SUPERVISOR_FLAG}##</option>
							<option value="NoDepositOverride">##TP_XL {Admin.Bet_Search.DEP_NOT_ALLOWED_FLAG}##</option>
							<option value="NoWithDrawOverride">##TP_XL {Admin.Bet_Search.WTD_BLOCKED_FLAG}##</option>
							<option value="FailedFraudOverride">##TP_XL {Admin.Bet_Search.FAILED_FRAUD_FLAG}##</option>
							<option value="NoPmtConnOverride">##TP_XL {Admin.Bet_Search.NO_PMT_GWAY_CONN}##</option>
							<option value="SelnSuspOverride">##TP_XL {Admin.Bet_Search.ALLOW_SUSP_SELNS_IN_BET}##</option>
						</select>
					</td>
				</tr>
	##TP_IF {[op_allowed SearchElite] && [op_allowed EliteCustAccess]}##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.ELITE_ONLY}## </td>
					<td>
						<input type="checkbox" name="EliteSearch" value="Y" />&nbsp;
					</td>
				</tr>
	##TP_ENDIF##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.DISP_ORIGINAL_PRICE}## </td>
					<td>
						<input type="checkbox" name="DispOrigPrice" value="Y" />&nbsp;<i>(##TP_XL {Admin.Bet_Search.ONLY_FOR_SYS_PRICE_OVERRIDES}##)</i>
					</td>
				</tr>
				<tr>
					<th class="buttons" colspan="2">
						<input type="button" class="btn_def" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets')" />
					</th>
				</tr>
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="action" value="ADMIN::BET::DoPoolsRetroOverBet" />
			</form>
		</table>
##TP_ENDIF##
		<br />
##TP_IF {[tpGetVar QUERY_TYPE ""] == "xgame"}##
		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Retrospective_Bets" method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">
						##TP_XL {Admin.Bet_Search.RETRO_BETS}##
					</th>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.EVENT_DATE_BETWEEN}##</td>
					<td>
						<input type="text" name="BetDate1" value="" size="10" />
						&nbsp;##TP_XL {and}##&nbsp;
						<input type="text" name="BetDate2" value="" size="10" />
					</td>
				</tr>
	##TP_IF {[op_allowed SearchElite] && [op_allowed EliteCustAccess]}##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.ELITE_ONLY}## </td>
					<td>
						<input type="checkbox" name="EliteSearch" value="Y" >&nbsp;
					</td>
				</tr>
	##TP_ENDIF##
				<tr>
					<th class="buttons" colspan="2">
						<input type="button" class="btn_def" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets')" />
					</th>
				</tr>
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="action" value="ADMIN::BET::DoXGRetroBet" />
			</form>
		</table>
		<br />
		<br />
		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Retrospective_Override" method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">
						##TP_XL {Admin.Bet_Search.RETRO_BETS_OVERRIDE}##
					</th>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.OVERRIDE_DATE}##</td>
					<td>
						<select name="ev_date_range">
							<option value="YEAR">##TP_XL {So Far this Year}##</option>
							<option value="MONTH">##TP_XL {So Far this Month}##</option>
							<option value="WEEK">##TP_XL {In the last Week}##</option>
							<option value="3DAYS">##TP_XL {In the last 3 days}##</option>
							<option value="YESTERDAY">##TP_XL {Yesterday}##</option>
							<option value="TODAY" selected="true">##TP_XL {Today}##</option>
							<option value="-">--##TP_XL {Please Specify}##--></option>
						</select>&nbsp;&nbsp;##TP_XL {or}##&nbsp;
						<input type="text" name="ev_date_lo" value="" size="10" />&nbsp;##TP_XL {to}##&nbsp;
						<input type="text" name="ev_date_hi" value="" size="10" />
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.SETTLED}## </td>
					<td>
						<select name="settled">
							<option value="-" selected="true">##TP_XL {Either}##</option>
							<option value="N">##TP_XL {No}##</option>
							<option value="Y">##TP_XL {Yes}##</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.OVERRIDE_TYPE}## </td>
					<td>
						<select name="override_type">
							<option value="" selected="true">All</option>
							<option value="PriceOverride">System Price</option>
							<option value="CredLimOverride">Credit Limit</option>
							<option value="PmtReferOverride">Payment Referral</option>
							<option value="EvStartOverride">Allow started events in bet</option>
							<option value="LowFundsOverride">Deposit account bet with low funds</option>
							<option value="XGameStakeOverride">Override the stake amount for selections</option>
							<option value="AuthAskOverride">LOGIN restricted Status Flag </option>
							<option value="MonitorOverride">MONITOR Bets Status Flag</option>
							<option value="NoBetOverride">BLOCKED Bets Status Flag</option>
							<option value="AuthTradeOverride">RESTRICTED Betting to supervisors Status Flag</option>
							<option value="NoDepositOverride">DEPOSITS not allowed Status Flag</option>
							<option value="NoWithDrawOverride">WITHDRAWALS blocked Status Flag</option>
							<option value="FailedFraudOverride">FRAUD check failed Status Flag</option>
							<option value="NoPmtConnOverride">No payment gateway connection</option>
							<option value="XGameSuspOverride">Allow suspended selections in bet</option>
						</select>
					</td>
				</tr>
	##TP_IF {[op_allowed SearchElite] && [op_allowed EliteCustAccess]}##
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.ELITE_ONLY}##</td>
					<td>
						<input type="checkbox" name="EliteSearch" value="Y" />&nbsp;
					</td>
				</tr>
	##TP_ENDIF##
				<tr>
					<th class="buttons" colspan="2">
						<input type="button" class="btn_def" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets')" />
					</th>
				</tr>
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="action" value="ADMIN::BET::DoXGameRetroOverBet" />
			</form>
		</table>
		<br />
		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Bets_pending_settlement" method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">
						##TP_XL {Admin.Bet_Search.BETS_PENDING_SETTLEMENT}##
					</th>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.SETTLEMENT_DATE_BETWEEN}##</td>
					<td>
						<input type="text" name="BetDate1" value="" size="10" />
						&nbsp;##TP_XL {and}##&nbsp;
						<input type="text" name="BetDate2" value="" size="10" />
					</td>
				</tr>
				<tr>
					<td class="caption">##TP_XL {Admin.Bet_Search.WINNINGS_GREATER_THAN}##</td>
					<td>
						<input type="text" name="WinThresh" value="" size="10" />
					</td>
				</tr>
				<tr>
					<th class="buttons" colspan="2">
						<input type="button" class="btn_def" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets')" />
					</th>
				</tr>
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="action" value="ADMIN::BET::GetParkedXGBets" />
			</form>
		</table>
##TP_ENDIF##
##TP_IF {[OT_CfgGet ALLOW_BET_HEDGING 0] == 1 && [tpGetVar QUERY_TYPE ""] != "birfail"}##
		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Bets_hedged" method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">
						##TP_XL {Admin.Bet_Search.HEDGED_BETS}##
					</th>
				</tr>
				<tr>
					<td class="captionindex">##TP_XL {Admin.Bet_Search.BET_PLACED_BETWEEN}##</td>
					<td>
						<input type="text" name="BetDate1" value="" size="19" />
						&nbsp;##TP_XL {and}##&nbsp;
						<input type="text" name="BetDate2" value="" size="19" />
					</td>
				</tr>
				<tr>
					<td class="captionindex">##TP_XL {Admin.Bet_Search.BET_PLACED_BETWEEN}##</td>
					<td>
						<select name="BetPlacedFrom">
							<option value="0">##TP_XL {N/A}##</option>
							<option value="1" selected>##TP_XL {Today}##</option>
							<option value="2">##TP_XL {Yesterday}##</option>
							<option value="3">##TP_XL {Last 3 Days}##</option>
							<option value="4">##TP_XL {Last 7 Days}##</option>
							<option value="5">##TP_XL {Last Month}##</option>
						</select>&nbsp;
					</td>
				</tr>
				<tr>
					<th class="buttons" colspan="2">
						<input type="button" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets')" />
					</th>
				</tr>
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="HedgeField" value="Y" />
				<input type="hidden" name="action" value="ADMIN::BET::DoHedgeFieldBetQuery" />
			</form>
		</table>
##TP_ENDIF##
##TP_IF {[OT_CfgGet ALLOW_BET_FIELDING 0] == 1 && [tpGetVar QUERY_TYPE ""] != "birfail"}##
		<table cellspacing="0" cellpadding="2" border="0">
			<form name="Bets_fielded" method="get" action="##TP_CGI_URL##">
				<tr>
					<th colspan="2" class="title">
						##TP_XL {Admin.Bet_Search.FIELDED_BETS}##
					</th>
				</tr>
				<tr>
					<td class="captionindex">##TP_XL {Admin.Bet_Search.BET_PLACED_BETWEEN}##</td>
					<td>
						<input type="text" name="BetDate1" value="" size="19" />
						&nbsp;##TP_XL {and}##&nbsp;
						<input type="text" name="BetDate2" value="" size="19" />
					</td>
				</tr>
				<tr>
					<td class=captionindex>##TP_XL {Admin.Bet_Search.BET_PLACED_BETWEEN}##</td>
					<td>
						<select name="BetPlacedFrom">
							<option value="0">##TP_XL {N/A}##</option>
							<option value="1" selected>##TP_XL {Today}##</option>
							<option value="2">##TP_XL {Yesterday}##</option>
							<option value="3">##TP_XL {Last 3 Days}##</option>
							<option value="4">##TP_XL {Last 7 Days}##</option>
							<option value="5">##TP_XL {Last Month}##</option>
						</select>&nbsp;
					</td>
				</tr>
				<tr>
					<th class="buttons" colspan="2">
						<input type="button" value="##TP_XL {Admin.Bet_Search.FIND_BETS_BUTTON}##" onclick="return fs(this,'FindBets')" />
					</th>
				</tr>
				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="HedgeField" value="F" />
				<input type="hidden" name="action" value="ADMIN::BET::DoHedgeFieldBetQuery" />
			</form>
		</table>
##TP_ENDIF##
	</body>
</html>
