<html>
<head> 
	<title> Add New Bir Template Market Map </title>  
	<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##"></meta>
	<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet"></link>

	<script language=JavaScript>

	function DelSelMktMap(chosen) {
		if (chosen == "") {
			alert("No market group was selected to Remove.");
		} else {
			document.EditTemplMap.DelMktName.value = chosen;
			document.EditTemplMap.SubmitName.value = "BIRDoDelTabMkt";
			document.EditTemplMap.submit();
		}
	}	

	
	function GoBack()
	{
		parent.MainArea.location.href="##TP_CGI_URL##?action=ADMIN::BIR::go_bir_tab_detail&TabId=##TP_TabId##"
	}

	function fs(b,t)
	{

		if (!validate(b.form))
		{
			return 0;
		}

		b.disabled = true;
		b.value = "Busy...";
		b.form.SubmitName.value=t;
		b.form.submit();

		return true;
	}

	function validate(f)
	{
		var error_text = "";

		var dispOrder = f.DispOrder.value;
		var mktName   = f.MktName.value;

		if (dispOrder.length == 0)
		{
			error_text = "\nDisplay order is empty.";
		}

		if(mktName.length == 0)
		{
			error_text += "\nNo market chosen.";
		}

		if (error_text != "")
		{
			alert('There has been errors :'+error_text);
			return 0;
		}

		

		return 1;
	}


	</script>

</head>
<body>
<h2>##TP_SportName## (##TP_TabLang##) --> ##TP_TemplName##</h2>
<form name="EditTemplMap"  action="##TP_CGI_URL##" method=get>

<table width=300px border=0 cellspacing=0 cellpadding=3>
	<tr>
		<th colspan=5 class=title>
			Template Market Mappings
		</th>
	</tr>
	<tr>
		<th class="colhead">Market Name</th>
		<th class="colhead">Display Order</th>
		<th class="colhead"></th>
	</tr>
	##TP_LOOP tatempl_idx {[tpGetVar NumberTabMktMaps]}##
	<tr>
		<td>##TP_tatempl_MktName##</td>
		<td>##TP_tatempl_MktDispOrder##</td>
		<td><a href="#" onClick="return DelSelMktMap('##TP_tatempl_MktName##')" >Delete</a></td>
	</tr>
	##TP_ENDLOOP##
</table>




<table width=300px border=0 cellspacing=0 cellpadding=3>

	<tr>
		<th colspan=5 class=title>
			Add New Template Map
		</th>
	</tr>

	<tr>

		<td>
			<select name=MktName>
				##TP_LOOP marks_idx {[tpGetVar NumberMarketNames]}##
				<option value="##TP_marks_MktName##"  ##TP_marks_Selected## > ##TP_marks_MktName## </option>
				##TP_ENDLOOP##
			</select>
		</td>

		<td>
			<input type=field name=DispOrder value='##TP_templ_DispOrder##' size=3>
		</td>

	</tr>

	<th class="buttons" colspan=4>
		<input type=button value="Add" OnClick="return fs(this,'BIRMktMapUpdate')">
		<input type=button value="Back" OnClick="return GoBack()">
	</th>

</table>

<input type=hidden name="action" value="ADMIN::BIR::do_bir">
<input type=hidden name=SubmitName value="">

<input type=hidden name=TemplId value="##TP_TemplId##">
<input type=hidden name=DelMktName value="">

<input type=hidden name=TabId value="##TP_TabId##">
<input type=hidden name=ObId value="##TP_ObId##">
<input type=hidden name=ObLevel value="##TP_ObLevel##">
</form>
