<html>
<!-- $Id: card_query.html,v 1.1.1.1 2011/10/04 10:54:25 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>OpenBet Administration</title>
<script>
function fs(b,t)
{
	if (t == "BinQry") {
		var v = b.form.CardBin.value;
		if (v.length < 4 || v.length > 6) {
			alert("Please enter a bin number of between 4 and 6 digits");
			return false;
		}
	}
	b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value=t;
	b.form.submit();
	return true;
}
</script>
</head>
<body>
##TP_PLAY msg_rpt.html##
##TP_PLAY error_rpt.html##
<table cellspacing=0 cellpadding=2 border=0>
<form method=get action=##TP_CGI_URL##>
<tr>
	<th colspan=2 class=title>
	Card Range Criteria
	</th>
</tr>
<tr>
	<td class=caption>Card bin</td>
	<td>
	<input type="text" name="CardBin" size=6>
	</td>
</tr>
<tr>
	<th class=buttons colspan=2>
	<input type=button class="btn_def" value="Show Range" onClick="return fs(this,'BinQry')">
	##TP_IF {[op_allowed ManageCardBin]}##
		<input type=button class="btn_def" value="Add Range" onClick="return fs(this,'BinAdd')">
	##TP_ENDIF##
	</th>
</tr>
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value="ADMIN::CARD::DoCardQuery">
</form>
</table>
<br>
<table cellspacing=0 cellpadding=2 border=0>
<form method=get action=##TP_CGI_URL##>
<tr>
	<th colspan=2 class=title>
	Card Block Query
	</th>
</tr>
<tr>
	<td class=caption>Card prefix</td>
	<td>
	<input type="text" name="CardBlockNo" size=20>
	</td>
</tr>
<tr>
	<th class=buttons colspan=2>
	<input type=button class="btn_def" value="Show Blocks" onClick="return fs(this,'BlockQry')">
	##TP_IF {[op_allowed ManageCardBin]}##
		<input type=button class="btn_def" value="Add Block" onClick="return fs(this,'BlockAdd')">
	##TP_ENDIF##
	</th>
</tr>
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value="ADMIN::CARD::DoBlockQuery">
</form>
</table>
<br>
<table cellspacing=0 cellpadding=2 border=0>
<form method=get action=##TP_CGI_URL##>
<tr>
	<th colspan=2 class=title>
	Card Range Requirements
	</th>
</tr>
<tr>
	<td class=caption>Card bin</td>
	<td>
	<input type="text" name="CardBin" size=6>
	</td>
</tr>
<tr>
    <th class=buttons colspan=2>
    <input type=button name="CardReqQry" class="btn_def" value="Show Range" onClick="return fs(this,'CardReqQry')">
    <input type=button name="AllCardReqQry" class="btn_def" value="Show All Ranges" onClick="return fs(this,'AllCardReqQry')">
    <input type=button name="CardReqAdd" class="btn_def" value="Add Range" onClick="return fs(this,'CardReqAdd')">
    </th>
</tr>
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value="ADMIN::CARD::GoCardReqList">
</form>
</table>
<br>
<table cellspacing=0 cellpadding=2 border=0>
<form method="get"  action=##TP_CGI_URL##>
<tr>
	<th colspan="4" class="title">Card Schemes</th>
</tr>
<tr>
	<th class="colhead">Scheme</th>
	<th class="colhead">Type</th>
	<th class="colhead">Deposit Allowed</th>
	<th class="colhead">Withdrawal Allowed</th>
</tr>
##TP_LOOP card_idx {[tpGetVar CardBlocks]}##
<tr>
	<td>##TP_CardSchemeName##</td>
	<td>
		##TP_IF {[tpBindGet CardSchemeType] == "C"}##
			Credit
		##TP_ELSE##
			Debit
		##TP_ENDIF##
	</td>
	<td>
		<select name="deposit_allowed_##TP_CardScheme##">
			<option value="Y" ##TP_IF {[tpBindGet CardSchemeDepAllowed] == "Y"}##selected##TP_ENDIF##>Yes</option>
			<option value="N" ##TP_IF {[tpBindGet CardSchemeDepAllowed] == "N"}##selected##TP_ENDIF##>No</option>
		</select>
	</td>
	<td>
		<select name="withdrawals_allowed_##TP_CardScheme##">
			<option value="Y" ##TP_IF {[tpBindGet CardSchemesWithdrawAllowed] == "Y"}##selected##TP_ENDIF##>Yes</option>
			<option value="N" ##TP_IF {[tpBindGet CardSchemesWithdrawAllowed] == "N"}##selected##TP_ENDIF##>No</option>
		</select>
	</td>
</tr>
##TP_ENDLOOP##
<tr>
	<td colspan="4" class="buttons"><input type=button name="CardSchemeUpd" class="btn_def" value="Update" onClick="return fs(this,'CardSchemeUpd')"></td>
</tr>
	<input type=hidden name=SubmitName value="">
	<input type="hidden" name="action" value="ADMIN::CARD::DoSchemeUpd"/>
</form>
</table>
</body>
</html>
