<html>
<!-- $Id: cust_lvl_limit.html,v 1.1.1.1 2011/10/04 10:54:25 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>Event Level Customer Settings</title>
##TP_PLAY JS_WriteSelect.html##
<script>
function fs(b,t)
{
	if (t == 'InsLimit' && b.form.liab_group_id.selectedIndex == 0) {
		alert('Please choose a liability group from the list');
		return false;
	}

	b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value=t;
	b.form.submit();
	return true;
}
function go_dd_popup() {
	popup = window.open("##TP_CGI_URL##?action=ADMIN::BESTBETS::go_bbet_dd&bet_id=&bet_level=CATEGORY&type=CustLimit",
		"popup",
		"toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,height=480,width=400");
	popup.focus();
}
function set_vals(level, id, name) {
	
	f = document.cust_limit;
	
	if (!f) {
		alert("unable to find form");
		return;
	}
	f.BetLevel.value = level;
	f.BetId.value   = id;
	f.BetLevelDesc.value  = name;

}
</script>
</head>
<body>
##TP_PLAY error_rpt.html##
##TP_PLAY msg_rpt.html##
<form name="cust_limit" action="##TP_CGI_URL##" method=post>
<table border=0 cellspacing=0 cellpadding=1>
<tr>
	<th colspan=3 class=title>
	Customer Settings by Event Level 
	</th>
</tr>
<tr>
	<th nowrap class=colhead>Description</th>
	<th nowrap class=colhead>Liability Group</th>
	<th nowrap class=colhead>Stake Factor</th>
</tr>
##TP_LOOP limit_idx {[tpGetVar NumCustLimit]}##
<tr bgcolor=###TP_TCL {expr {[tpGetVar limit_idx]%2==0?"cccccc":"999999"}}##>
	<td>##TP_Name##</td>
	<td><select name="liab_grp_##TP_TCL {tpBufWrite [tpGetVar limit_idx]}##">
		<script>
		write_select("##TP_LiabGrp##" ##TP_LOOP liab_groups_idx {[tpGetVar LiabGroupsCount]}##
			,"##TP_LiabGroupId##","##TP_LiabDesc##"
			##TP_ENDLOOP##);
		</script>
	</select></td>
	<td><input type=text name="msf_##TP_TCL {tpBufWrite [tpGetVar limit_idx]}##" size="5" value="##TP_MSF##">&nbsp;
	<a href="##TP_CGI_URL##?action=ADMIN::CUST::DoCustLvlLimit&CustId=##TP_CustId##&Level=##TP_Level##&Id=##TP_Id##&OldStk=##TP_MSF##&SubmitName=DelLimit">(Remove)</a>
	</td>
	<input type="hidden" name="level_##TP_TCL {tpBufWrite [tpGetVar limit_idx]}##" value="##TP_Level##">
	<input type="hidden" name="id_##TP_TCL {tpBufWrite [tpGetVar limit_idx]}##" value="##TP_Id##">
	<input type="hidden" name="old_liab_grp_##TP_TCL {tpBufWrite [tpGetVar limit_idx]}##" value="##TP_LiabGrp##">
	<input type="hidden" name="old_msf_##TP_TCL {tpBufWrite [tpGetVar limit_idx]}##" value="##TP_MSF##">
</tr>
##TP_ENDLOOP##
##TP_IF {[tpGetVar NumCustLimit 0]==0}##
<tr>
	<td colspan=3 align=left>
	<font color=white size=+1>
	<b><i>There are event level settings defined</i></b>
	</font>
	</td>
</tr>
##TP_ELSE##
<tr>
	<th class=buttons colspan=3>
	<input type=button value="Update Customer Setting" onClick="return fs(this,'UpdLimit')">
	<input type=button value="Back" onClick="return fs(this,'Back')">
	</th>
</tr>
##TP_ENDIF##
<tr>
	<th nowrap class=colhead colspan="3">Add Customer Setting</th>
</tr>
<tr>
	<td align="left">Liability Group</td>
	<td><select name="liab_group_id">
		<script>
		write_select('##TP_liab_group_id##','','-'
			##TP_LOOP liab_groups_idx {[tpGetVar LiabGroupsCount]}##
			,"##TP_LiabGroupId##","##TP_LiabDesc##"
			##TP_ENDLOOP##);
		</script>
	</select></td>
</tr>
<tr>
	<td align="left">Stake Factor</td>
	<td><input type=text name="max_stake_factor" size="5" value=""></td>
</tr>
<tr>
	<td align="left">Bet Level</td>
	<td><input type=text name="BetLevel" size="10" value=""/>&nbsp;
	<a href="javascript:go_dd_popup()">(Change)</a></td>
</tr>
<tr>
	<td align="left">Bet Id</td>
	<td><input type=text name="BetId" size="5" value=""></td>
</tr>
<tr>
<td colspan =3><i>(An empty stake factor or liability group inherits parent setting)</i></td>
</tr>
<tr>
	<th class=buttons colspan=3>
	<input type=button value="Add Customer Setting" onClick="return fs(this,'InsLimit')">
	<input type=button value="Back" onClick="return fs(this,'Back')">
	</th>
	<input type=hidden name="NumCustLimit" value="##TP_TCL {tpBufWrite [tpGetVar NumCustLimit]}##">
	<input type=hidden name="BetLevelDesc" value="">
	<input type=hidden name=CustId value="##TP_CustId##">
	<input type=hidden name=SubmitName value="">
	<input type=hidden name=action value=ADMIN::CUST::DoCustLvlLimit>
</tr>
</table>
</form>
</body>
</html>
