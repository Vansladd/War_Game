<html>
<!-- $Id: display_sorts_list.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>Display Sorts</title>

##TP_PLAY JS_WriteSelect.html##

<script language="JavaScript">

function fs(b,t)
{
	b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value=t;
	b.form.submit();
	return true;
}

function select_change() {
	document.sportFm.action.value="ADMIN::DISPLAYSORT::GoDisplaySortList";
	document.sportFm.submit();
}

function delete_disp_sorts(b) {

	numDelBoxes = b.form.delBoxes.length ;
	delDispOrderList = "" ;

	if (!numDelBoxes ) {
		// We only have 1 entry, the delBoxes.length check picks up nothing
		// so access the one field manually
		if ( b.form.delBoxes.checked ) {
			delDispOrderList = delDispOrderList + b.form.delBoxes.value ;
		}
	} else {
		// deal with multiple check boxes
		for (i = 0; i < numDelBoxes; i++) {
			if ( b.form.delBoxes[i].checked ) {
				delDispOrderList = delDispOrderList + b.form.delBoxes[i].value + "," ;
			}
		}
	}

	if ( delDispOrderList == "" ) {
		alert ("There are no display sorts selected for delete.") ;
	} else {
		action = "ADMIN::DISPLAYSORT::DelDisplaySort&SportId=##TP_TCL {tpBufWrite [tpGetVar SportId]} ##&delDispOrderList=" + delDispOrderList ;

		url = "##TP_CGI_URL##?action=" + action
		document.location.href = url
	}
}

</script>

</head>
<body>
##TP_PLAY error_rpt.html##


<table border=0 cellspacing=0 cellpadding=3 bgcolor="#10137c">
<tr>
	<th class=title colspan=4>
	Display Sorts
	</th>
</tr>

##TP_IF {[tpGetVar NumSports 0]}##

<tr>
<form method="post" action="##TP_CGI_URL##" name="sportFm">
	<td class="caption">Show Display sort Assigned to: </td>

	<td >
		<select name="SportId" onChange="select_change();">

			##TP_IF {[tpGetVar SportId] == ""}##
				<option value="" selected="selected">All</option>
			##TP_ELSE##
				<option value="">All</option>
			##TP_ENDIF##

			##TP_LOOP sport_idx {[tpGetVar NumSports]}##

				##TP_IF {[tpGetVar SelectedIdx] == [tpGetVar sport_idx] } ##
					<option value="##TP_sportId##" selected="selected">##TP_sportName##</option>
				##TP_ELSE##
					<option value="##TP_sportId##">##TP_sportName##</option>
				##TP_ENDIF##

			##TP_ENDLOOP##
			
		</select>
	</td>
</tr>


<tr>
	<td> &nbsp;&nbsp;</td>
	<td colspan="4">	
	</td>
</tr>

##TP_ELSE##
<tr>
	<td colspan=3>
	<b><i>There are no event sports defined</i></b>
	</td>
</tr>

##TP_ENDIF##

##TP_IF {[tpGetVar NumDispSorts 0]}##
<tr>
	<th class=colhead><A href="##TP_CGI_URL##?action=ADMIN::DISPLAYSORT::GoDisplaySortList&order=name&SportId=##TP_TCL {tpBufWrite [tpGetVar SportId]} ##">Name</A></th>
	##TP_IF {[OT_CfgGet USE_DISPSORT_DISP_ORDER 0]}##
		<th class=colhead><A href="##TP_CGI_URL##?action=ADMIN::DISPLAYSORT::GoDisplaySortList&order=disp&SportId=##TP_TCL {tpBufWrite [tpGetVar SportId]} ##">Display Order</A></th>
	##TP_ENDIF##
	<th class=colhead><A href="##TP_CGI_URL##?action=ADMIN::DISPLAYSORT::GoDisplaySortList&SportId=##TP_TCL {tpBufWrite [tpGetVar SportId]} ##">Sport</A></th>

	##TP_IF {[OT_CfgGet FUNC_MENU_DISP_SORTS 0] && [op_allowed ManageEv]}##
		<th class=colhead>Select to delete</th>
	##TP_ENDIF##

</tr>
##TP_LOOP display_sort_idx {[tpGetVar NumDispSorts]}##

<tr>
	<td><A href="##TP_CGI_URL##?action=ADMIN::DISPLAYSORT::GoDisplaySort&SubmitName=GotoUpd&DispSortId=##TP_dispSortId##">##TP_dispCode##</A></td>
	##TP_IF {[OT_CfgGet USE_DISPSORT_DISP_ORDER 0]}##
	<td >##TP_dispOrder##</td>
	##TP_ENDIF##
	<td >##TP_sName##</td>
	##TP_IF {[OT_CfgGet FUNC_MENU_DISP_SORTS 0] && [op_allowed ManageEv]}##
		<td > <input  name="delBoxes" type="checkbox" value="##TP_dispSortId##"  > </td>
	##TP_ENDIF##

</tr>
##TP_ENDLOOP##


##TP_ELSE##
<tr>
	<td colspan=3>
	<b><i>There are no market display sorts defined for your selection</i></b>
	</td>
</tr>

##TP_ENDIF##

<tr>
	<form action="##TP_CGI_URL##" method="get">

	##TP_IF {[OT_CfgGet FUNC_MENU_DISP_SORTS 0] && [op_allowed ManageEv]}##
	
		##TP_IF {[tpGetVar NumDispSorts 0]}##
			<th class=buttons colspan=1>
				<input type=button class="btn_def" value="Add" onClick="return fs(this,'GotoAdd')">
			</th>
			<th class=buttons colspan=3>
				<input type=button class="btn_def" value="Delete" onClick="delete_disp_sorts(this)">
			</th>
		##TP_ELSE##
			<th class=buttons colspan=4>
				<input type=button class="btn_def" value="Add" onClick="return fs(this,'GotoAdd')">
			</th>
		##TP_ENDIF##
	
	##TP_ENDIF##

	<input type=hidden name=SubmitName value="">
	<input type=hidden name=SelectedSportId value="##TP_TCL {tpBufWrite [tpGetVar SportId]} ##">
	<input type=hidden name=action value="ADMIN::DISPLAYSORT::GoDisplaySort">
	</form>
</tr>


</table>
</body>
</html>
