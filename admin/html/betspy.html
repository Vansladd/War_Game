<html>
<!-- $Id: betspy.html,v 1.1.1.1 2011/10/04 10:54:25 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>Control Information</title>
##TP_PLAY JS_WriteSelect.html##
<script language=JavaScript>

var errorList   = "";
var markets     = new Array();
var events      = new Array();

function isUndefined(property) {
  return (typeof property == 'undefined');
}

// Array.pop() - Remove the last element of an array and return it
if (isUndefined(Array.prototype.pop) == true) {
  Array.prototype.pop = function() {
  	var lastItem = null;
    if ( this.length > 0 ) {
        lastItem = this[this.length - 1];
        this.length--;
    }
    return lastItem;
  };
}

// Array.push() - Add an element to the end of an array
if (isUndefined(Array.prototype.push) == true) {
  Array.prototype.push = function() {
  	var currentLength = this.length;
  	for (var i = 0; i < arguments.length; i++) {
  		this[currentLength + i] = arguments[i];
  	}
  	return this.length;
  };
}

function set_val(t,i) {
	if (t == "M") {
		markets.push(i);
	} else if (t == "E") {
		events.push(i);
	}
}

function update_mkts_events () {

	var mkt_str = "";
	var ev_str  = "";

	for (var i = 0; i < markets.length; i++){
		mkt_str = mkt_str + "&" + "markets=" + markets[i];
		if (mkts_events.length) {
			mkt_str = mkt_str + "&" + "mkts_events=" + mkts_events[i];
		}
    }

	for (var i = 0; i < events.length; i++){
		ev_str = ev_str + "&" + "events=" + events[i]; 	 			  		  		
    }

	var go_url = "##TP_CGI_URL##?action=ADMIN::BETSPY::update_mkts_events";

	if (mkt_str != "") {
		go_url = go_url + mkt_str;
	}

	if (ev_str != "") {
		go_url = go_url + ev_str;
	}
	
	markets   = new Array();
	events    = new Array();

	self.location.replace(go_url);
}

function fs_mkts_events () {

	var mkt_str = "";
	var ev_str  = "";

	for (var i = 0; i < markets.length; i++){
		mkt_str = mkt_str + "&" + "markets=" + markets[i]; 	 			  		  		
    }

	for (var i = 0; i < events.length; i++){
		ev_str = ev_str + "&" + "events=" + events[i]; 	 			  		  		
    }

	var go_url = "##TP_CGI_URL##?action=ADMIN::BETSPY::DoBetspyMktsEvents";

	if (mkt_str != "") {
		go_url = go_url + mkt_str;
	}

	if (ev_str != "") {
		go_url = go_url + ev_str;
	}
	
	markets   = new Array();
	events    = new Array();

	self.location.replace(go_url);
}
 
function go_dd_popup() {
	popup = window.open("##TP_CGI_URL##?action=ADMIN::BETSPY::go_betspy_dd",
		"popup",
		"toolbar=no,location=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,height=400,width=400");
	popup.focus();
}

function add_err(e_str)
{
  if (errorList.length > 0) {
    errorList += "\n";
  }
  errorList += e_str;
}

function fs_betspy_params(t)
{
  document.betspy_params.SubmitName.value=t;
  document.betspy_params.submit();
  return true;
}

function check_kiosk(doc) {
	if (document.betspy_params.betspy.checked == false) {
		document.betspy_params.kiosk.checked = false;
		document.betspy_params.kiosk.disabled = true;
	}
	if (document.betspy_params.betspy.checked == true) {
		document.betspy_params.kiosk.disabled = false;
	}
}

</script>

</head>
<body>
##TP_PLAY error_rpt.html##
<table border=0 cellspacing=0 cellpadding=3>
	<form action="##TP_CGI_URL##" name="betspy_params" method=get>
		<tr>
			<th colspan=2 class=title>
				BetSpy Parameters
			</th>
		</tr>
		<tr>
			<td class=caption>
				Enable/Disable BetSpy
			</td>
			<td>
				<input type="checkbox" name="betspy" value="1" onclick="check_kiosk();" ##TP_SHOW_BETSPY##>
			</td>
		</tr>
		<tr>
			<td class=caption>
				Enable/Disable Kiosk
			</td>
			<td>
				<input type="checkbox" name="kiosk" value="1" ##TP_SHOW_KIOSK##>
			</td>
		</tr>
		<tr>
			<td class=caption>
				Min period
			</td>
			<td>
				<input type="text" size="2" name="period_min" value="##TP_PERIOD_MIN##">
			</td>
		</tr>
		<tr>
			<td class=caption>
				Max period
			</td>
			<td>
				<input type="text" size="2" name="period_max" value="##TP_PERIOD_MAX##">
			</td>
		</tr>
		<tr><td><br><br></td></tr>
		<tr>
			<td class=caption>
				Max stakes for ALL
			</td>
			<td>
				<input type="text" size="8" name="max_stake_all" value="##TP_MAX_STAKE_ALL##">
			</td>
		</tr>
		<tr>
			<td class=caption>
				Min stakes for ALL
			</td>
			<td>
				<input type="text" size="8" name="min_stake_all" value="##TP_MIN_STAKE_ALL##">
			</td>
		</tr>
		<tr><td><br></td></tr>
		<tr>
			<td class=caption>
				Max stakes for HORSES
			</td>
			<td>
				<input type="text" size="8" name="max_stake_horses" value="##TP_MAX_STAKE_HORSES##">
			</td>
		</tr>
		<tr>
			<td class=caption>
				Min stakes for HORSES
			</td>
			<td>
				<input type="text" size="8" name="min_stake_horses" value="##TP_MIN_STAKE_HORSES##">
			</td>
		</tr>
		<tr><td><br></td></tr>
		<tr>
			<td class=caption>
				Max stakes for GREYHOUNDS
			</td>
			<td>
				<input type="text" size="8" name="max_stake_greyhounds" value="##TP_MAX_STAKE_GREYHOUNDS##">
			</td>
		</tr>
		<tr>
			<td class=caption>
				Min stakes for GREYHOUNDS
			</td>
			<td>
				<input type="text" size="8" name="min_stake_greyhounds" value="##TP_MIN_STAKE_GREYHOUNDS##">
			</td>
		</tr>
		<tr><td><br></td></tr>
		<tr>
			<td class=caption>
				Max stakes for FOOTBALL
			</td>
			<td>
				<input type="text" size="8" name="max_stake_football" value="##TP_MAX_STAKE_FOOTBALL##">
			</td>
		</tr>
		<tr>
			<td class=caption>
				Min stakes for FOOTBALL
			</td>
			<td>
				<input type="text" size="8" name="min_stake_football" value="##TP_MIN_STAKE_FOOTBALL##">
			</td>
		</tr>
		##TP_IF {[op_allowed BetspyUpdate]}##
			<tr>
				<th colspan=2 class=buttons>
					<input type=button class="btn_def" value="Update" onClick="return fs_betspy_params('Update')">
				</th>
				<input type=hidden name=SubmitName value="">
				<input type=hidden name=action value=ADMIN::BETSPY::DoBetspyParams>
			</tr>
		##TP_ENDIF##
	</form>
</table>
<br><br>
<table border=0 cellspacing=0 cellpadding=3>
	<form action="##TP_CGI_URL##" name="mkts_events" method=get>
		<tr>
			<th colspan=2 class=title>
				BetSpy Events/Markets
			</th>
		</tr>
		<tr bgcolor="#FF9999">
			<td colspan="2" align="center">
				<b>EVENTS</b>
			</td>
		</tr>
		##TP_LOOP ev_idx {[tpGetVar NUM_EVENTS]}##
			<tr bgcolor="#FF9999">
				<td>
					<b>##TP_EV_T_NAME##</b>&nbsp;&nbsp;##TP_EV_NAME##
				</td>
				<td>
					<input type="checkbox" name="event_##TP_EV_ID##" value="##TP_EV_ID##" onclick="set_val('E',##TP_EV_ID##)" checked>
				</td>
			</tr>
		##TP_ENDLOOP##
		<tr><td><br></td></tr>
		
		<tr bgcolor="#9999FF">
			<td colspan="2" align="center">
				<b>MARKETS</b>
			</td>
		</tr>
		##TP_LOOP mkt_idx {[tpGetVar NUM_MKTS]}##
			<tr bgcolor="#9999FF">
				<td>
					<b>##TP_MKT_EV_NAME##</b>&nbsp;&nbsp;##TP_MKT_NAME##
				</td>
				<td>
					<input type="checkbox" name="market_##TP_MKT_ID##" value="##TP_MKT_ID##" onclick="set_val('M',##TP_MKT_ID##)" checked>
				</td>
			</tr>
		##TP_ENDLOOP##
		##TP_IF {[op_allowed BetspyUpdate]}##
			<tr>
				<th colspan="2" class=buttons>
					<input type=button class="btn_def" value="Update" onClick="return fs_mkts_events()">
					&nbsp;&nbsp;
					<input type=button class="btn_def" value="Events/Markets" onClick="go_dd_popup()">
				</th>
			</tr>
		##TP_ENDIF##
	</form>
</table>
</body>
</html>
