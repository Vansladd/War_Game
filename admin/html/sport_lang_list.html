<html>
<!-- $Id: sport_lang_list.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>Sports Language Config (##TP_SportLang##)</title>

<script language="Javascript">

function fs(b,t)
{
	var change_list = new Array();
	b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value=t;

	if (t == "DoSportLangUpdate") {
		change_list = validate_update(b.form);
		if (change_list.length == 0) {
			alert ("Details are not changed, cannot update");
			b.disabled = false;
			b.value = "Update";
			return false;
		}
	b.form.id_list.value = change_list.join(" ");
	}

	if (t == "GoToLang" ) {
		// Override sport_lang with the one selected in the dropdown
		b.form.sport_lang.value = b.form.go_sport_lang.value
	}

	b.form.submit();
	return true;
}

function validate_update (f) {

	var has_changed = false;

	var id_list     = f.id_list.value.split(" ");
	var list_length = id_list.length;
	var to_process  = new Array();

	for (var i = 0; i < list_length ; i++)
	{
		sport_id = id_list[i];
		has_changed = false;

	
	if ( eval("f.prematch_disp_"+sport_id+".value") != eval("f.orig_prematch_disp_"+sport_id+".value")) {
			has_changed = true;
		} else if ( eval("f.inplay_disp_"+sport_id+".value") != eval("f.orig_inplay_disp_"+sport_id+".value")) {
			has_changed = true;
		} else if ( eval("f.ignore_home_"+sport_id+".value") != eval("f.orig_ignore_home_"+sport_id+".value")) {
			has_changed = true;
		}

		if (has_changed) { to_process.push(sport_id); }
	}
	return to_process;
}

function update_checkbox ( id ) {
	var f = document.forms['sport_lang_list'];
	
	if (eval("f.chk_ignore_home_"+id+".checked")) {
		eval("f.ignore_home_"+id+".value = 'Y'");
	} else {
		eval("f.ignore_home_"+id+".value = 'N'");
	}
}



</script>



</head>
<body>
##TP_PLAY error_rpt.html##

<table border="0" cellspacing="0" cellpadding="3" bgcolor="#10137c">
<form name="sport_lang_list" action="##TP_CGI_URL##" method="post">
<input type="hidden" name="SubmitName" value=""/>
<input type="hidden" name="action" value="ADMIN::SPORT::DoSport"/>
<input type="hidden" name="id_list" value="##TP_IdList##" />
<input type="hidden" name="sport_lang" value="##TP_SportLang##"/>
<tr>
	<th class="title" colspan="4">
	Sports Language Config (##TP_SportLang##)
	</th>
</tr>
<tr>
	<th><a href="##TP_CGI_URL##?action=ADMIN::SPORT::GoSportLang&sport_lang=##TP_SportLang##&sport_sort=2">Sport</a></th>
	<th><a href="##TP_CGI_URL##?action=ADMIN::SPORT::GoSportLang&sport_lang=##TP_SportLang##&sport_sort=3">Pre-match Disporder</a></th>
	<th><a href="##TP_CGI_URL##?action=ADMIN::SPORT::GoSportLang&sport_lang=##TP_SportLang##&sport_sort=4">In-Play Disporder</a></th>
	<th><a href="##TP_CGI_URL##?action=ADMIN::SPORT::GoSportLang&sport_lang=##TP_SportLang##&sport_sort=5">Ignore On Homepage?</a></th>
</tr>
##TP_IF {[tpGetVar NumSports] > 0}##
	##TP_LOOP sport_idx {[tpGetVar NumSports]}##
	<tr>
		<td><a href="">##TP_SportName##</a></td>
		<td>
			<input name="prematch_disp_##TP_SportId##" type="text" size="3" value="##TP_PrematchDisp##" />
			<input name="orig_prematch_disp_##TP_SportId##" type="hidden" value="##TP_PrematchDisp##" />
		</td>
		<td>
			<input name="inplay_disp_##TP_SportId##" type="text" size="3" value="##TP_InplayDisp##" />
			<input name="orig_inplay_disp_##TP_SportId##" type="hidden" value="##TP_InplayDisp##" />
		</td>
		<td>
			<input name="chk_ignore_home_##TP_SportId##" type="checkbox" ##TP_IF { [tpBindGet IgnoreHome] == "Y" }##checked="checked"##TP_ENDIF## / onchange="update_checkbox(##TP_SportId##);">
			<input name="orig_ignore_home_##TP_SportId##" type="hidden" value="##TP_IgnoreHome##"/>
			<input name="ignore_home_##TP_SportId##" type="hidden" value ="##TP_IgnoreHome##"/>
		</td>
	</tr>
	##TP_ENDLOOP##

	<tr>
		<th class="buttons" colspan="2">
			<input type="button" class="btn_def" value="Update" onClick="return fs(this,'DoSportLangUpdate');">
		</th>
		<th class="buttons" colspan="2">
			<input type="button" class="btn_def" value="Cancel" onClick="return fs(this,'Back');">
		</th>
	</tr>
##TP_ELSE##
	<tr>
		<td colspan="4">There is no configuration available for language <strong>'##TP_SportLang##'</strong></th>
	</tr>
##TP_ENDIF##
##TP_PLAY {sportlang_select_widget.html}##
</form>
</table>
</body>
</html>
