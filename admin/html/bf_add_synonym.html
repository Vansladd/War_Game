<html>
<!-- $Id: bf_add_synonym.html,v 1.1.1.1 2011/10/04 10:54:25 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>Add Synonyms</title>
<script type="text/javascript">

function fs(b,t)
{
	if (t == "DoAddSyn") {

		var len=b.form.SynName.length;
		if (len > 0) {
			for (var i=0; i<len; i++) {
				if (b.form.SynName[i].value.search('%') != -1)
				{
					alert("% character is not allowed");
					return false;
				}
				if (b.form.SynName[i].value == "")
				{
					alert("Synonym string is empty at position "+ (i+1));
					return false;
				}

			}
		} else {
			if (b.form.SynName.value.search('%') != -1)
			{
				alert("% character is not allowed");
				return false;
			}
			if (b.form.SynName.value == "")
			{
				alert("Enter a valid Synonym");
					return false;
			}
		}
	}

        b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value=t;
	b.form.submit();
	return true;
}

var Dom = {
get: function(el) {
	     if (typeof el === 'string') {
		     return document.getElementById(el);
	     } else {
		     return el;
	     }
     },
add: function(el, dest) {
	     var el = this.get(el);
	     var dest = this.get(dest);
	     dest.appendChild(el);
     },
remove: function(el) {
		var el = this.get(el);
		el.parentNode.removeChild(el);
	}
};

var Event = {
add: function() {
	     if (window.addEventListener) {
		     return function(el, type, fn) {
			     Dom.get(el).addEventListener(type, fn, false);
		     };
	     } else if (window.attachEvent) {
		     return function(el, type, fn) {
			     var f = function() {
				     fn.call(Dom.get(el), window.event);
			     };
			     Dom.get(el).attachEvent('on' + type, f);
		     };
	     }
     }()
};

Event.add(window, 'load', function() {
		var i = 1;
		Event.add('add-element', 'click', function() {
			var el = document.createElement('p');
			var elem_id = "ID_" + ++i; 
			el.setAttribute('id',elem_id);
			el.innerHTML = '<input name=\"SynName\" type=\"text\" size=\"25\" /> &nbsp; <a href=\"javascript:\;\" onclick=\"Dom.remove('+elem_id+')\;\">remove</a>';
				Dom.add(el, 'content');
				});
			});
</script>
</head>
<body>

<form action="##TP_CGI_URL##" method="get">
<h3 ##TP_IF {[tpGetVar SynAdded 0]}## class="succeeded" ##TP_ELSE## class="failed" ##TP_ENDIF## >##TP_msg_d##</h3>
<table border=0 cellspacing=0 cellpadding=3 width=250>
	<tr>
		<th class=title colspan='2'>Add to Synonym Group</th>
	</tr>
	<tr>
		<td class="caption">Type</td>
		<td>
			<select name="SynType">
				<option value="ID" ##TP_IF {[tpBindGet SynType] == "ID"}##selected##TP_ENDIF##>Identifier</option>
				<option value="SP" ##TP_IF {[tpBindGet SynType] == "SP"}##selected##TP_ENDIF##>Separator</option>
			</select>
		</td>
	</tr>
	</tr>
	<tr>	
		<td colspan='2'><br />
			##TP_IF {[tpGetVar SynAdded 0]}##
				<p><input name="SynName" type="text" size="25"/></p>
			##TP_ELSE##
				##TP_LOOP grp_idx {[tpBindGet SYNONYMS(nrows)]}##
					<p id=P_ID_##TP_SynDescr##><input name="SynName" type="text" size="25" value=##TP_SynDescr## />&nbsp;
					##TP_IF {[tpBindGet First] == 0}##
						<a href="javascript:;" onclick="Dom.remove(P_ID_##TP_SynDescr##);">remove</a></p>
					##TP_ENDIF##
				##TP_ENDLOOP##
			##TP_ENDIF##
		</td>
	</tr>
	<tr>	
		<td colspan='2'>
			<div id="content"></div>
			<p id="add-element"><a href="javascript:;">more...</a></p>
		</td>
	</tr>
	<tr>
		<th class=buttons colspan='2'>
			<input type=button class="btn_def" value="Add" onClick="return fs(this,'DoAddSyn');">
			&nbsp;<input type=button class="btn_def" value="Back" onclick="return fs(this,'Back');">
		</th>
	</tr>
</table>
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::BETFAIR_SYN::DoBFSynonym>
</form>
</body>
</html>
