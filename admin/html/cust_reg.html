<html>
<!-- $Id: cust_reg.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>Customer Registration Information</title>
##TP_PLAY JS_WriteSelect.html##
<script language=JavaScript>

function fs(b,t) {

	##TP_IF {[OT_CfgGet DISABLE_7DIGITS_USERNAMES 0] && [OT_CfgGet ALLOW_SPECIFIED_USERNAME 1]}##
		if (document.cust_reg.Username.value.match(/^\d{7}$/)) {
		alert ("You cannot use a 7 digit username by config");
		return false;
		}
	##TP_ENDIF##

	b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value=t;
	b.form.submit();
	return true;
}

function master_changed () {

##TP_IF {
	[OT_CfgGetTrue FUNC_EXT_ID]
		&& [op_allowed ExtIdFunc]
		&& [op_allowed ExtIdMastFunc]
		&& [op_allowed ExtIdPermFunc]
}##

	var f = document.forms[0];

	##TP_LOOP ext_group_idx {[tpGetVar NumExtGroups 0]}##

		var i = ##TP_TCL { tpBufWrite [tpGetVar ext_group_idx] }##;

		if (f['ext_master_'    + i].checked) {
			f['ext_permanent_' + i].disabled = false;
		} else {
			f['ext_permanent_' + i].disabled = true;
			f['ext_permanent_' + i].checked = false;
		}

	##TP_ENDLOOP##

##TP_ENDIF##

}

</script>

</head>

<body onload="master_changed ()">

##TP_PLAY error_rpt.html##
<table border=0 cellspacing=0 cellpadding=2>
<form name="cust_reg" action="##TP_CGI_URL##" method="get">
<tr>
	<th colspan=2 class=title>
	Registration Details
	</th>
</tr>
<tr class=subtitle>
	<th colspan=2 align=left>
	<font color=white>
	Account details
	</font>
	</th>
</tr>
##TP_IF {[tpGetVar NewUser 0]}##
	<tr>
		<td class=caption>Username</td>
		<td>
		##TP_IF {[OT_CfgGet ALLOW_SPECIFIED_USERNAME 1]}##
			<input type="text" name="Username" size="20" value="##TP_Username##" />
		##TP_ELSE##
			<input type="text" name="Username_disabled" disabled="disabled" size="20" value="Auto Generated"  />
		##TP_ENDIF##
		</td>
	</tr>
	<tr>
		<td class=caption>Password</td>
		<td><input type=password name="Password_1" size=20 value="##TP_Password_1##"></td>
	</tr>
	<tr>
		<td class=caption>(again)</td>
		<td><input type=password name="Password_2" size=20 value="##TP_Password_2##"></td>
	</tr>
	<tr id="currency">
		<td class=caption>Currency</td>
		<td>
		<select name="CCYCode">
		##TP_LOOP ccy_idx {[tpGetVar NumCCYs]}##
			<option value="##TP_CCYCode##" ##TP_CCYSel##>##TP_CCYName##</option>
		##TP_ENDLOOP##
		</select>
		</td>
	</tr>

##TP_ELSE##
	<tr>
		<td class=caption>Username</td>
		<td><b>##TP_Username##</b></td>
	</tr>
	<tr>
		<td class=caption>Acct #</td>
		<td><b>##TP_AcctNo##</b></td>
	</tr>
	<tr>
		<td class=caption>Currency</td>
		<td><b>##TP_CCYCode##</b></td>
	</tr>

	##TP_IF {[OT_CfgGetTrue FUNC_EXT_ID] && [op_allowed ExtIdFunc]}##
		##TP_LOOP ext_group_idx {[tpGetVar NumExtGroups 0]}##
			<tr>
				<td class=caption>##TP_ExtGroupDisp##</td>
				<td>
					<input type=text name="ext_cust_id_##TP_TCL {tpBufWrite [tpGetVar ext_group_idx]}##" size=16 value="##TP_ExtCustId##">
					##TP_IF {[op_allowed ExtIdMastFunc]}##
					<input type="checkbox" onchange="master_changed()" name="ext_master_##TP_TCL {tpBufWrite [tpGetVar ext_group_idx]}##" ##TP_ExtMaster##>Master
						##TP_IF {[op_allowed ExtIdPermFunc]}##
						<input type="checkbox" name="ext_permanent_##TP_TCL {tpBufWrite [tpGetVar ext_group_idx]}##" ##TP_ExtPermanent##>Permanent
						##TP_ELSE##
						<input type="hidden" name="ext_permanent_##TP_TCL {tpBufWrite [tpGetVar ext_group_idx]}##" value="undef">
						##TP_ENDIF##
					##TP_ELSE##
					<input type="hidden" name="ext_master_##TP_TCL {tpBufWrite [tpGetVar ext_group_idx]}##" value="undef">
					<input type="hidden" name="ext_permanent_##TP_TCL {tpBufWrite [tpGetVar ext_group_idx]}##" value="undef">
					##TP_ENDIF##
				</td>
			</tr>
			<input type=hidden name="ext_group_id_##TP_TCL {tpBufWrite [tpGetVar ext_group_idx]}##" value="##TP_ExtGroupCode##"/>
		##TP_ENDLOOP##
		<input type=hidden name="ext_group_count" value="##TP_TCL {tpBufWrite [tpGetVar NumExtGroups]}##"/>
	##TP_ENDIF##

##TP_ENDIF##

<tr>
	<td class=caption>Nickname</td>
	<td><input type=text name="Nickname" size=20 value="##TP_NickName##"></td>
</tr>

<tr class=subtitle>
	<th colspan=2 align=left>
	<font color=white>
	Personal details
	</font>
	</th>
</tr>
<tr>
	<td class=caption>Language</td>
	<td>
	<select name="Lang">
	##TP_LOOP lang_idx {[tpGetVar NumLangs]}##
		<option value="##TP_LangId##" ##TP_LangSel##>##TP_LangName##</option>
	##TP_ENDLOOP##
	</select>
	</td>
</tr>
<tr>
	<td class=caption>Title</td>
	<td><input type=text name=Title value="##TP_Title##" size=10></td>
</tr>
<tr>
	<td class=caption>Forename</td>
	<td><input type=text name=FName value="##TP_FName##" size=25></td>
</tr>
<tr>
	<td class=caption>Surname</td>
	<td><input type=text name=LName value="##TP_LName##" size=25></td>
</tr>
<tr>
	<td class=caption>Date of Birth</td>
	<td><input type=text name=DOB value="##TP_DOB##" size=10> (YYYY-MM-DD)</td>
</tr>
##TP_IF {[tpGetVar FuncIdCardSearch 0]}##
	<tr>
		<td class=caption>Id Card#</td>
		<td><input type=text name=IdCardNo value="##TP_IdCardNo##" size=20></td>
	</tr>
##TP_ENDIF##
<tr>
	<td class=caption>Address 1</td>
	<td><input type=text name=Addr1 value="##TP_Addr1##" size=40></td>
</tr>
<tr>
	<td class=caption>Address 2</td>
	<td><input type=text name=Addr2 value="##TP_Addr2##" size=40></td>
</tr>
<tr>
	<td class=caption>Address 3</td>
	<td><input type=text name=Addr3 value="##TP_Addr3##" size=40></td>
</tr>
<tr>
	<td class=caption>Address 4</td>
	<td><input type=text name=Addr4 value="##TP_Addr4##" size=40></td>
</tr>
<tr>
	<td class=caption>City/Town</td>
	<td><input type=text name=City value="##TP_City##" size=25></td>
</tr>
<tr>
	<td class=caption>Postcode</td>
	<td><input type=text name=Postcode value="##TP_Postcode##" size=20></td>
</tr>
<tr>
	<td class=caption>Country</td>
	<td>
	<select name="Country">
		##TP_LOOP country_idx {[tpGetVar NumCountrys]}##
			<option value="##TP_CountryCode##" ##TP_CountrySel##>##TP_CountryName##</option>
		##TP_ENDLOOP##
	</select>
	</td>
</tr>
<tr>
	<td class=caption>Telephone</td>
	<td><input type=text name=Telephone value="##TP_Telephone##" size=20></td>
</tr>
<tr>
	<td class=caption>Email</td>
	<td><input type=text name=Email value="##TP_Email##" size=50></td>
</tr>
##TP_IF {[tpGetVar FuncPersQuest1 0] || [tpGetVar FuncPersQuest2 0]}##
	<tr class=subtitle>
    	<th colspan=2 align=left>
    	<font color=white>
    	Personal questions
    	</font>
    	</th>
	</tr>
	##TP_IF {[tpGetVar FuncPersQuest1 0]}##
		<tr>
    		<td class=caption>Challenge 1</td>
			<td>
			<input type=text name="Challenge1" value="##TP_Challenge1##" size=40>
			</td>
		</tr>
		<tr>
    		<td class=caption>Response 1</td>
			<td>
			<input type=text name="Response1" value="##TP_Response1##" size=40>
			</td>
		</tr>
	##TP_ENDIF##
	##TP_IF {[tpGetVar FuncPersQuest2 0]}##
		<tr>
    		<td class=caption>Challenge 2</td>
			<td>
			<input type=text name="Challenge2" value="##TP_Challenge2##" size=40>
			</td>
		</tr>
		<tr>
    		<td class=caption>Response 1</td>
			<td>
			<input type=text name="Response2" value="##TP_Response2##" size=40>
			</td>
		</tr>
	##TP_ENDIF##
##TP_ENDIF##

##TP_IF {[OT_CfgGet ENABLE_FREEBETS2 "FALSE"] == "TRUE" && [tpGetVar NewUser 0]}##
	<tr class=subtitle>
    	<th colspan=2 align=left>
    	<font color=white>
    	Promotions
    	</font>
    	</th>
	</tr>
	<tr>
		<td class=caption>Referral Code</td>
		<td>
		<input type=text name="referrer_id" value="" size=20>
		</td>
	</tr>

##TP_ENDIF##

<tr>
	<th colspan=2 class=buttons>
	<table border=0 cellspacing=0 cellpadding=0 width=100%>
	<tr>
		<th width=75% class=buttons>
		##TP_IF {[tpGetVar NewUser 0]}##
			<input type=button class="btn_def" value="Add Customer" onClick="return fs(this,'AddCustReg')">
		##TP_ELSE##
			<input type=button class="btn_def" value="Update Customer" onClick="return fs(this,'UpdCustReg')">
			<input type=button class="btn_def" value="Back" onClick="return fs(this,'Back')">
			<input type=hidden name=CustId value="##TP_CustId##">
		##TP_ENDIF##
		</th>
	</tr>
	<input type=hidden name=SubmitName value="">
	<input type=hidden name=action value=ADMIN::CUST::DoCustReg>
	</table>
	</th>
</form>
</tr>
</table>
</body>
</html>
