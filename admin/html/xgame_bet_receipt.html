<html>
<!-- $Id: xgame_bet_receipt.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>OpenBet Database Viewer</title>
<script>
function fs(b,t)
{
	if (t=='VoidXBet') {
		if(!confirm("Are you sure you want to void this bet?")) {
			return;
		}
	}

	b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value=t;
	b.form.submit();
	return true;
}

function fs_man_adj(b,t,bet_id) {
	b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value= t;

	b.form.action.value    = "ADMIN::ADJ::GoManAdj"
	b.form.ManAdj_ref_key.value   = "XBET";
	b.form.ManAdj_ref_id.value    = bet_id
	b.form.submit();
	return true;
}
</script>
</head>
<body>
##TP_IF {[tpGetVar IS_ELITE 0]!=0}##
	<font color="red"><b>&nbsp; * Elite Customer</b></font>
##TP_ENDIF##
##TP_PLAY error_rpt.html##

##TP_IF {[op_allowed BrowseXGame]==0}##
<p>You do not have permission to view pools and lottery bets</p>
##TP_ELSE##

##TP_IF {[OT_CfgGet XGAME_RECEIPT_FUNC 0]}##
	<h3>Bet receipt ##TP_SubReceipt##</h3>
##TP_ELSE##
	<h3>Bet receipt L/##TP_CustId##/##TP_SubId##</h3>
##TP_ENDIF##

<center>


<form name="form" action="##TP_CGI_URL##" method=post onSubmit="return false;">
<input type="hidden" name="SubmitName" value="">
<input type="hidden" name="action"     value="">
<input type="hidden" name="BetId"      value="##TP_BetId##">
<!-- For ManAdj -->
<input type="hidden" name="ManAdj_ref_key" value="##TP_ManAdj_ref_key##">
<input type="hidden" name="ManAdj_ref_id"  value="##TP_ManAdj_ref_id##">
<input type="hidden" name="ManAdj_group"   value="BET">
<table cellspacing=0 cellpadding=2 border=0>
<tr>
	<th colspan=2 class=title>
	Bet Details
	</th>
</tr>
<tr>
	<th class=colhead>Field</th>
	<th class=colhead>Value</th>
</tr>
<tr><td>Date bet placed</td><td>##TP_BetDate##</td></tr>
<tr><td>Competition number</td><td>##TP_CompNo##</td></tr>
<tr><td>Game ID</td><td><a href="##TP_CGI_URL##?action=ADMIN::BET::GoXGame&XGameID=##TP_GameId##">##TP_GameId##</a></td></tr>
<tr><td>Stake</td><td>##TP_Stake##</td></tr>
<tr><td>Results</td><td>##TP_Results##</td></tr>
<tr><td>Currency</td><td>##TP_ccyCode##</td></tr>
<tr><td>Draw at</td><td>##TP_DrawAt##</td></tr>
    
    ##TP_IF {[OT_CfgGet XG_BET_TYPES 0]} ##
    <tr>
        <td>Bet Type</td>
        <td>##TP_bet_type##</td>
    </tr>
    <tr>
        <td>Stake per line</td>
        <td>##TP_stake_per_line##</td>
    </tr>
    <tr>
        <td>Number of Selections</td>
        <td>##TP_num_selns##</td>
    </tr>
    <tr>
        <td>Number of Lines</td>
        <td>##TP_num_lines##</td>
    </tr>
    <tr>
        <td>Number of void lines</td>
        <td>##TP_num_lines_void##</td>
    </tr>
    <tr>
        <td>Number of Winning Lines</td>
        <td>##TP_num_lines_win##</td>
    </tr>
    <tr>
        <td>Number of Losing Lines</td>
        <td>##TP_num_lines_lose##</td>
    </tr>
    ##TP_ENDIF##
    
##TP_IF {[tpGetVar num_pmts] == 0}##
	<tr><td>Payment Status</td><td>(No Payments)</td></tr>
##TP_ELSE##
	##TP_LOOP pmt_idx {[tpGetVar num_pmts]}##
	<tr>
		##TP_IF {[tpGetVar pmt_idx] == 0}##
			<td>Payment Status</td>
		##TP_ELSE##
			<td></td>
		##TP_ENDIF##
		<td><a href="##TP_CGI_URL##?action=ADMIN::TXN::GPMT::GoPmt&pmt_id=##TP_PmtID##">Call# ##TP_CallID##: ##TP_PmtStatus##</a></td>
	</tr>
	##TP_ENDLOOP##
##TP_ENDIF##

##TP_IF {[tpGetVar NumAdjs] != 0}##
	<tr>
		<td>Linked Manual Adjustments</td>
		<td>
		##TP_LOOP adj_idx {[tpGetVar NumAdjs]}##
			<a href="##TP_CGI_URL##?action=ADMIN::TXN::MADJ::GoTxn&&op_ref_id=##TP_ManAdjId##">##TP_ManAdjId##</a><br>
		##TP_ENDLOOP##
		</td>
	</tr>
##TP_ENDIF##

	<tr>
		<th colspan=2 class=buttons>
			<input type=button class="btn_def" value="Create Manual Adjustment" onClick="return fs_man_adj(this,'GoManAdj','##TP_BetId##')">
		</th>
	</tr>

##TP_IF {[tpGetVar bet_status "A"]=="S"}##
<tr bgcolor=#DDAA00>
	<td colspan=2>
	<font color=white><b>This bet has been parked</b></font>
	</td>
</tr>
##TP_ENDIF##

##TP_IF {[tpGetVar settled 0]}##
	<tr><td>Winnings</td><td>##TP_Winnings##</td></tr>
	<tr><td>Refunds</td><td>##TP_Refunds##</td></tr>
	<tr><td>Pay method</td><td>##TP_PayMethod##</td></tr>
	<tr bgcolor=#33cc33>
	<td colspan=2>
	<font color=white><b>This bet has been settled</b></font>
	</td>
	</tr>
	<tr><td>Settled at</td><td>##TP_SettledAt##</td></tr>
	<tr>
        <td>Settled How</td>
        <td>##TP_settled_how##</td>
    </tr>
    <tr>
        <td>Settle Comment</td>
        <td>##TP_settle_info##</td>
    </tr>
	<tr>
        <td>Settled By</td>
        <td>##TP_settled_by_uname##</td>
    </tr>
##TP_ELSE##
	<tr bgcolor=#cc3333>
	<td colspan=2>
	<font color=white><b>This bet hasn't been settled yet</b></font>
	</td>
	</tr>
##TP_ENDIF##
    
</table>
</>
</form>
<table cellspacing=0 cellpadding=2 border=0>
<tr>
	<th colspan=2 class=title>
	Subscription Details
	</th>
</tr>
<tr>
	<th class=colhead>Field</th>
	<th class=colhead>Value</th>
</tr>
<tr><td>Username</td><td>
	##TP_IF {[tpGetVar PERM_ViewCustInfo 0]}##
		##TP_IF {[op_allowed EliteCustAccess] || (![op_allowed EliteCustAccess] && [tpBindGet Elite] != "Y")}##<a href="##TP_CGI_URL##?action=ADMIN::CUST::GoCust&CustId=##TP_CustId##">##TP_Username##</a>&nbsp;(##TP_AcctNo##)##TP_ELSE##*&nbsp;(##TP_AcctNo##)##TP_ENDIF##</td></tr>
	##TP_ELSE##
		##TP_IF {[op_allowed EliteCustAccess] || (![op_allowed EliteCustAccess] && [tpBindGet Elite] != "Y")}## ##TP_Username## ##TP_ELSE##*##TP_ENDIF##
	##TP_ENDIF##
</tr>
<tr><td>Game type</td><td>##TP_GameType##</td></tr>
<tr><td>Game name</td><td>##TP_GameName##</td></tr>
<tr><td>Date subscription placed</td><td>##TP_SubDate##</td></tr>
<tr><td>Subscription ID</td><td><a href="##TP_CGI_URL##?action=ADMIN::BET::GoXGameSub&SubId=##TP_SubId##">##TP_SubId##</td></tr>
<tr><td>Number of entries</td><td>##TP_NumSubs##</td></tr>
<tr><td>Stake per line</td><td>##TP_StakePerLine##</td></tr>
<tr><td>Selection</td><td>##TP_Picks##</td></tr>
<tr><td>IP Address</td><td>##TP_IPaddr##</td></tr>
<tr><td>Authorised</td><td>##TP_Auth##</td></tr>
<tr><td>Source</td><td>##TP_Source##</td></tr>
<tr><td>Line Number</td><td>##TP_LineNumber##</td></tr>
<tr><td>Operator</td><td>##TP_Operator##</td></tr>
<tr><td>No Funds email?</td><td>##TP_NoFunds##</td></tr>
<tr><td>Status</td><td>##TP_Status##</td></tr>
<tr><td>Void reason</td><td>##TP_VoidReason##</td></tr>
<tr><td>Output</td><td>##TP_Output##</td></tr>

##TP_IF {[OT_CfgGet XG_BET_TYPES 0]} ##
    <tr><td>Bet Type</td><td>##TP_BT_betType##</td></tr>
    <tr><td>Number Selections</td><td>##TP_BT_numSelns##</td></tr>
    <tr><td>Stake per line</td><td>##TP_BT_stakePerLine##</td></tr>
    <tr>
        <td>Prices</td>
        <td>##TP_prices##</td>
    </tr>
    <tr><td>Operator</td><td>##TP_Operator##</td></tr>
    <tr><td>Line Number</td><td>##TP_LineNumber##</td></tr>
##TP_ENDIF##

<tr>
	##TP_IF {[tpGetVar bet_number_of_overrides] == 0}##
	<td>Overrides</td><td>none</td>
	 ##TP_ELSE##
        <td>Overrides</td><td><a href="##TP_CGI_URL##?action=ADMIN::CALL::GoXGOverride&RefId=##TP_SubId##&RefKey=XGAM">##TP_bet_number_of_overrides_str##</a></td>
	##TP_ENDIF##
</tr>
</table>
<br>
##TP_IF {[op_allowed Settle]}##
    ##TP_IF {[tpGetVar bet_status "A"]=="S"}##
	    <table cellspacing=0 cellpadding=2 border=0>
            <form action=##TP_CGI_URL## method=get>
            <tr>
                <th colspan=2 class=title>
                Manual Settlement
                </th>
            </tr>
            <tr>
                <td class=caption>Winnings</td>
                <td>
                <input name=BetWinnings size=10 value="##TP_P_Winnings##">
                </td>
            </tr>
            <tr>
                <td class=caption>Refund</td>
                <td><input name=BetRefund size=10 value="##TP_P_Refund##"></td>
            </tr>
            <tr>
                <td class=caption>Lines</td>
                <td>
                <b>Win</b>
                <input name=BetWinLines size=3 value="##TP_P_NumLinesWin##">
                &nbsp;&nbsp;&nbsp;
                <b>Lose</b>
                <input name=BetLoseLines size=3 value="##TP_P_NumLinesLose##">
                &nbsp;&nbsp;&nbsp;
                <b>Void</b>
                <input name=BetVoidLines size=3 value="##TP_P_NumLinesVoid##">
                </td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                <i>(Total number of lines should be ##TP_num_lines##)</i>
                </td>
            </tr>
            <tr>
                <td class=caption>Comment</td>
                <td>
                <input name=BetComment size=40>
                </td>
            </tr>
            <input type=hidden name=BetId value="##TP_BetId##">
            <tr>
                <th colspan=2 class=buttons>
                    <input type=button class="btn_def" value="Settle Bet" onClick="return fs(this,'StlBet')">
                </th>
            </tr>
            <input type=hidden name=SubmitName value="">
            <input type=hidden name=action value=UnparkXGBet>
            </form>
		</table>
    ##TP_ELSEIF {![tpGetVar settled 0]}##
		<br>
		<table cellspacing=0 cellpadding=2 border=0>
		<form action=##TP_CGI_URL## method=get>
		<input type=hidden name="Manual" value="##TP_Manual##">
        <tr>
			<th colspan=2 class=title>
			Manual Settlement
			</th>
		</tr>
		<tr>
			<td class=caption>Winnings</td>
			<td>
			<input name=BetWinnings size=10 value="##TP_P_Winnings##">
			##TP_IF {[tpGetVar TaxType -]=="W"}##
				&nbsp;&nbsp;
				Tax
				<input name=BetWinningsTax size=10 value="##TP_P_Tax##"> (@##TP_TaxRate##%)
			##TP_ELSE##
				<input type=hidden name=BetWinningsTax value=0>
			##TP_ENDIF##
			</td>
		</tr>
		<tr>
			<td class=caption>Refund</td>
			<td><input name=BetRefund size=10 value="##TP_P_Refund##"></td>
		</tr>
		<tr>
			<td class=caption>Note</td>
			<td><input name=BetComment size=40></td>
		</tr>
		<input type=hidden name=BetId value="##TP_BetId##">
		<tr>
			<th colspan=2 class=buttons>
			##TP_IF {[op_allowed Settle]}##
			<input type=button class="btn_def" value="Settle Bet" onClick="return fs(this,'StlBet')">
			##TP_ENDIF##
			##TP_IF {![tpGetVar output 0]}##
			<input type=button class="btn_def" value="Void Bet" onClick="return fs(this,'CancelBet')">
			##TP_ENDIF##
			</th>
		</tr>
		<input type=hidden name=SubmitName value="">
		<input type=hidden name=action value=ADMIN::BET::DoXGameManualSettle>
		</form>
		</table>
	##TP_ENDIF##
##TP_ELSE##
	##TP_IF {![tpGetVar settled 0]}##
		##TP_IF {![tpGetVar output 0]}##
		<table cellspacing=0 cellpadding=2 border=0>
		<form action=##TP_CGI_URL## method=get>
		<tr>
			<th colspan=2 class=title>
			Manual Void
			</th>
		</tr>
		<input type=hidden name=BetId value=##TP_BetId##>
		<tr>
			<th colspan=2 class=buttons>
			<input type=button class="btn_def" value="Void Bet" onClick="return fs(this,'VoidXBet')">
			</th>
		</tr>
		<input type=hidden name=SubmitName value="">
		<input type=hidden name=action value=ADMIN::BET::DoXGameBetVoid>
		<input type="hidden" name="BetId" value="##TP_BetId##">
		</form>
		</table>
		##TP_ENDIF##
	##TP_ENDIF##
##TP_ENDIF##


</center>

##TP_ENDIF## <!-- permission -->

</body>
</html>
