<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- $Id: cust.html,v 1.1.1.1 2011/10/04 10:54:25 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">

<style type="text/css">
	.custHeader {
		background-color: #993333;
		color: white;
		text-align: left;
	}
	##TP_IF {[tpGetVar FuncOffice 0]}##
		.custHeader {
			background-color: #9cc;
		}
	##TP_ENDIF##
</style>
<title>OpenBet Administration</title>
##TP_PLAY header_cal.html##
##TP_PLAY JS_WriteSelect.html##
##TP_IF {[OT_CfgGetTrue FUNC_CUST_DEP_LIMITS]}##
##TP_PLAY JS_GameCare.html##
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_PLAYTECH 0] && [OT_CfgGet PLAYTECH_AJAX_BALANCES 0]}##
	<script language="javascript" src="##TP_OFFICE_STATIC_URL##/js/xmlhttp.js"  type="text/javascript"></script>
##TP_ENDIF##
<script>

function doAudit(audit, b) {
	b.form.AuditInfo.value = audit;
	return fs(b, "GoAudit");
}

function fs(b,t)
{

	if (t == "UpdPIN") {
		var p1 = b.form.PIN_1.value;
		var p2 = b.form.PIN_2.value;
		if (p1 != p2) {
			alert ("PIN numbers don't match");
			return false;
		}
		if (p1.length == 0) {
			alert ("Can't set empty PIN");
			return false;
		}
	}
	if (t == "UpdPwd") {

		var p1 = b.form.Password_1.value;
		var p2 = b.form.Password_2.value;

		if (##TP_TCL {OT_CfgGet CUST_PWD_CASE_INSENSITIVE 0}##) {
			p1 = p1.toUpperCase();
			p2 = p2.toUpperCase();
		}

		if (p1 != p2) {
			alert ("Passwords don't match");
			return false;
		}
		if (p1.length == 0) {
			alert ("Can't set empty password");
			return false;
		}
	}
	if (t == "UpdUname") {
		var u1 = b.form.Username_1.value;
		var u2 = b.form.Username_2.value;
		if (u1 != u2) {
			alert ("Usernames don't match");
			return false;
		}
		if (u1.length == 0) {
			alert ("Can't set empty username");
			return false;
		}
		##TP_IF {[tpGetVar MCSActive] == "Y"}##
			alert("This customer has an Active MCS Account.");
		##TP_ENDIF##
	}
	if (t == "SetMsg") {
		var m = b.form.Message.value;
		if (m.length == 0) {
			alert ("Can't set empty message");
			return false;
		}
	}

	var acct_txt = "for account number ##TP_AcctNo##?";

	if (t == "DoManDep") {
		var r = confirm("Make this deposit " + acct_txt);
		if (r == false) {
			return false;
		}
	}
	if (t == "DoManWtd") {
		var r = confirm("Make this withdrawal " + acct_txt);
		if (r == false) {
			return false;
		}
	}

	if (t == "DoCustLimit") {
		var r = confirm("Update deposit limits?");
		if (r == false) {
			return false;
		}
	}

	##TP_IF {[OT_CfgGet CUST_WTD_LIMITS 0]}##
	if (t == "DoWithdrawalLimit") {
		var r = confirm("Update Withdrawal limits?");
		if (r == false) {
			return false;
		}
	}
	##TP_ENDIF##

	if (t == "DoCustSelfExcl") {
		var r = checkSelfexclDateLimits();
		if (r == false) {
			return false;
		}
		var r = confirm("Update customer self exclusion? Once applied this cannot be removed");
		if (r == false) {
			return false;
		}
	}

	##TP_IF {[OT_CfgGetTrue FUNC_MCS_POKER]}##

	if (t == "DoCustPokerLimit") {
		var new_dep = b.form.poker_max_dep.value;
		var new_wtd = b.form.poker_max_wtd.value;
		var old_dep = b.form.OLD_POKER_MAX_DEP.value;
		var old_wtd = b.form.OLD_POKER_MAX_WTD.value;
		var old_lev = b.form.OLD_POKER_LEVEL.value;
		var new_lev = getRadioValue(b.form.level);


		var upd = false;
		var upd_dep = (old_dep!=new_dep)
		var upd_wtd = (old_wtd!=new_wtd)
		var upd_lev = (old_lev!=new_lev)

		if (upd_dep && upd_wtd && upd_lev) {
			var upd=true;
			var r = confirm("Update level, deposit and withdrawal limits?");
		} else if (upd_dep && upd_wtd) {
			var upd=true;
			var r = confirm("Update maximum deposit and withdrawal limits?");
		} else if (upd_dep && upd_lev) {
			var upd=true;
			var r = confirm("Update maximum withdrawal limit and level?");
		} else if (upd_wtd && upd_lev) {
			var upd=true;
			var r = confirm("Update maximum withdrawal limit and level?");
		} else if (upd_dep) {
			var upd=true;
			var r = confirm("Update maximum deposit?");
		} else if (upd_wtd) {
			var upd=true;
			var r = confirm("Update maximum withdrawal?");
		} else if (upd_lev) {
			var upd=true;
			var r = confirm("Update level?");
		}
		if (!upd) { return false; }
		if (r == false) { return false; }
	}

	##TP_ENDIF##

	##TP_IF {[OT_CfgGetTrue FUNC_NETREFER_AFFILIATE_SYSTEM] && [op_allowed BannerTagAccess]}##
	if (t == "DoNetReferTag") {
		var bannerTag = b.form.BannerTag.value;

		if (bannerTag.length == 0) {
			alert ("You cannot tag the account with an empty banner tag");
			return false;
		}

		if (bannerTag == "##TP_BannerTag##") {
			alert ("You have not changed the banner tag for this account");
			return false;
		}

	}
	##TP_ENDIF##

	if (t == "ZeroCPMBalances") {

		if 	(confirm ("Are you sure you want to zero the method balances?") == false) {
			return false;
		}
	}

	if (t == "DoLoggedPunterClose") {
		if (!confirm ("Are you sure you want to delete this logged punter?")) {
			return false;
		}
	}

	if (t == "AddPMBExp") {
		if (b.form.PMBPeriod.value < 0 || b.form.PMBPeriod.value > 366) {
			alert("PMB expiry must be between 0 and 366 days.");
			return false;
		}
	}

	if (t == "AddMaxCombine") {
		if (b.form.MaxCombine.value < 0) {
			alert("Payment method limit must be greater or equal to 0.");
			return false;
		}
	}

	if (t == "DoPmtQry") {
        	##TP_IF {[OT_CfgGet VALIDATE_PMT_SEARCHES 0]}##
		if (!validatePmtSearch()) {
			b.disabled = false;
			b.value = label;
			return false;
		}
        	##TP_ENDIF##

		var pay_mthd = b.form.SR_pay_mthd.value.split("/");
		if (pay_mthd != "") {
			b.form.SR_pay_mthd.options[b.form.SR_pay_mthd.selectedIndex].value = pay_mthd[0];
			b.form.SR_cpm_id.value = pay_mthd[1];
		}
	}

	##TP_IF {[OT_CfgGetTrue FUNC_OPT_EXTSYS_SYNC]}##
	// Add an Optional external system
	if (t == "AddOptExtSys") {
		if (b.form.xsys_id_toadd.value == "") {
			alert("You must select an optional system to add");
			return false;
		}

		// Systems the user has already opted in for
		var opted_in_systems = b.form.opted_in_xsys_list.value.split(',');

		for (var i = 0; i < opted_in_systems.length ; i++) {
			if (opted_in_systems[i] == b.form.xsys_id_toadd.value) {
			alert ("Customer has already opted in for the selected system");
			return false;
			}
		}

	}
	##TP_ENDIF##

	b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value=t;
	b.form.submit();
	return true;

}

function getRadioValue (radioButtonOrGroup) {
	var value = null;
	if (radioButtonOrGroup.length) { // group
		for (var b = 0; b < radioButtonOrGroup.length; b++)
			if (radioButtonOrGroup[b].checked)
				value = radioButtonOrGroup[b].value;
	}
	else if (radioButtonOrGroup.checked)
		value = radioButtonOrGroup.value;
	return value;
}

// Loads a url
function go_url (url,width,height,new_win) {
	if (width==0 || height ==0){
		options = "scrollbars=1,menubar=0";
	} else {
		options = "scrollbars=1,menubar=0,width="+width+",height="+height;
	}

	if (url.indexOf("?") == -1) {
		url = url + "?w_id=" + parent.w_id;
	} else {
		url = url + "&w_id=" + parent.w_id;
	}

	if (new_win=="Y") {
		winurl = window.open(url,'helpwin',options);
		winurl.focus();
	} else {
		parent.document.location.href=url;
	}
}


// set all the check boxes to be the same checked status as the one provided as an argument
// if master if not null, then set the value of value to be the concatonation of all
// the checked boxes
function changeCheckboxGroup(checkbox,masterName) {
	var val = checkbox.checked;
	var isAll = (checkbox.value == "all");
	var checkboxes = eval("checkbox.form."+checkbox.name);
	if (isAll) {
		// if the one supplied an all style one then select this checkbox
		for (var i=0; i < checkboxes.length; i++) {
			checkboxes[i].checked = val;
		}
	} else {
		var allChecked = true;
		for (var i=0; i < checkboxes.length; i++) {
			if (checkboxes[i].value != "all" && checkboxes[i].checked == false) {
				allChecked = false;
			}
		}
		for (var i=0; i < checkboxes.length; i++) {
			if (checkboxes[i].value == "all") {
				checkboxes[i].checked = allChecked;
			}
		}
	}
	if (masterName != null) {
		val = "";
		var master = eval("checkbox.form."+masterName);
		for (var i=0; i < checkboxes.length; i++) {
			if (checkboxes[i].value != "all" && checkboxes[i].checked) {
				val += checkboxes[i].value;
			}
		}
		master.value = val;
	}
}

##TP_IF {[OT_CfgGet FUNC_CARD_CHANGE_ALLOWED 0]}##
function openOkToDelete() {

	var username = document.getElementById("CCChangeUsername").value;

	// popup colour chooser window
	var url      = "##TP_CGI_URL##?action=ADMIN::CUST::GoOkToDelete&username="+username;
	var name     = "oktodelete";
	var features = "width=800,height=375,resizable=yes,menubar=no,toolbar=no,status=yes";

	colour_win = window.open(url, name, features);
}
##TP_ENDIF##

##TP_IF {[OT_CfgGet VALIDATE_PMT_SEARCHES 0]}##
function validatePmtSearch() {

	var payment_made_1 = document.forms.payment_search.SR_date_1.value;
	var payment_made_2 = document.forms.payment_search.SR_date_2.value;
	var payment_range  = document.forms.payment_search.SR_date_range.value;
	var date_fields    = payment_made_1 + payment_made_2;
	var hours = 0;
	var date_1, date_2;
	var date_unit = 1000*60*60; // This is the number of milliseconds in an hour (unit of time for config item)

	if (date_fields == "") {
		// Drop down still counts as a date.
		date_1 = new Date();
		switch (payment_range) {
			case "HR":
				hours = 1;
				break;
			case "TD":
				hours = date_1.getHours();
				break;
			case "YD":
				hours = date_1.getHours() + 24;
				break;
			case "L3":
				hours = date_1.getHours() + 72;
				break;
			case "L7":
				hours = date_1.getHours() + 168;
				break;
			case "CM":
				// Assuming 30 days in a month
				date_2 = new Date(date_1.getFullYear(),date_1.getMonth(),1);
				hours = Math.ceil( (date_1.getTime() - date_2.getTime())/date_unit );
				break;
		}
	} else {
		// Set the number of hours between the dates specified
		var re = new RegExp("[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}");
		if (payment_made_1 != "" && payment_made_2 != "") {

			if (!re.test(payment_made_1)) {
				alert("First 'Bet placed between' date is invalid");
				return 0;
			} else if (!re.test(payment_made_2)) {
				alert("Second 'Bet placed between' date is invalid");
				return 0;
			}

			date_1 = new Date(payment_made_1.substring(0,4),parseInt(payment_made_1.substring(5,7)) - 1,parseInt(payment_made_1.substring(8,10)));
			date_2 = new Date(payment_made_2.substring(0,4),parseInt(payment_made_2.substring(5,7)) - 1,parseInt(payment_made_2.substring(8,10)));

			date_1.setUTCHours(parseInt(payment_made_1.substring(11,13)));
			date_1.setMinutes(parseInt(payment_made_1.substring(14,16)));
			date_1.setSeconds(parseInt(payment_made_1.substring(17,19)));
			date_2.setUTCHours(parseInt(payment_made_2.substring(11,13)));
			date_2.setMinutes(parseInt(payment_made_2.substring(14,16)));
			date_2.setSeconds(parseInt(payment_made_2.substring(17,19)));

			// Actually do the calculation and set the number of hours
			hours = Math.ceil( (date_2.getTime() - date_1.getTime())/date_unit );

		} else {
			alert("Please enter both a from and to date.");
			return 0;
		}
	}

	return 1;
}
##TP_ENDIF##

function change_pmt_schemes(id) {

	var pay_mthd_select = document.getElementById("pay_mthd" + id);
	var pmt_scheme_select = document.getElementById("pmt_scheme" + id);

	if (pay_mthd_select.value == "CC") {
		pmt_scheme_select.disabled = false;
		pmt_scheme_select.remove(pmt_scheme_select.length - 1);

		if (id == "MC") {
			var new_opt;

			##TP_LOOP ps_idx {[tpGetVar NumPmtSchemes]}##
			new_opt = document.createElement('option');
			new_opt.text = "##TP_pmt_scheme##";
			new_opt.value = "##TP_pmt_scheme##";
			try {
				pmt_scheme_select.add(new_opt, null); // standards compliant; doesn't work in IE
			} catch(ex) {
				pmt_scheme_select.add(new_opt); // IE only
			}
			##TP_ENDLOOP##
		}
	} else {
		if (pmt_scheme_select.disabled == false) {
			if (id == "MC") {
				for (var i = pmt_scheme_select.length - 1; i >= 0; i--) {
					if (pmt_scheme_select.options[i].value != "ALL")
						pmt_scheme_select.remove(i);
				}
			} else {
				pmt_scheme_select.disabled = true;
			}
			var new_opt = document.createElement('option');

			new_opt.text = "----";
			new_opt.value = "----";
			new_opt.selected = true;
			try {
				pmt_scheme_select.add(new_opt, null); // standards compliant; doesn't work in IE
			} catch(ex) {
				pmt_scheme_select.add(new_opt); // IE only
			}
		}
	}
}

function displayCalendars() {
	##TP_IF {[OT_CfgGet FUNC_CUST_SELF_EXCL 0] && [OT_CfgGet SELF_EXCLUSION_BY_DATE 0] == 1}##
		selfExclCal = new Calendar(document.forms.CustSelfExcl.selfexcl_date,null,false,"lo")
	##TP_ENDIF##
	new Calendar(document.forms.payment_search.SR_date_1,null,true,"lo")
	new Calendar(document.forms.payment_search.SR_date_2,null,true,"lo")

	new Calendar(document.forms.ManAccAdj.SR_date_1,null,true,"lo")
	new Calendar(document.forms.ManAccAdj.SR_date_2,null,true,"lo")
	new Calendar(document.forms.RewardAdhocToken.AbsoluteEx,null,true,"lo")
	new Calendar(document.forms.Cust_QualBet_Criteria.BetDate1,null,true,"lo")
	new Calendar(document.forms.Cust_QualBet_Criteria.BetDate2,null,true,"lo")
}

##TP_IF {[OT_CfgGet FUNC_CUST_SELF_EXCL 0] && [OT_CfgGet SELF_EXCLUSION_BY_DATE 0] == 1}##
function updateSelfexclDate() {
	var selfexclDate=new Date();
	var numYears = 0;
	var numDays = 0;
	switch (document.forms.CustSelfExcl.excl_period.value) {
		case '6:M': numDays = 180; break;
		case '1:Y': numYears = 1; break;
		case '2:Y': numYears = 2; break;
		case '3:Y': numYears = 3; break;
		case '4:Y': numYears = 4; break;
		case '5:Y': numYears = 5; break;
		default : return;
	}
	if (numYears == 0)
		selfexclDate.setDate(selfexclDate.getDate()+numDays);
	else
		selfexclDate.setFullYear(selfexclDate.getFullYear()+numYears);
	var month = selfexclDate.getMonth()+1;
	if (month < 10)
		month = '0'+month;
	var day = selfexclDate.getDate();
	if (day < 10)
		day = '0' + day;
	document.forms.CustSelfExcl.selfexcl_date.value = selfexclDate.getFullYear()+'-'+month+'-'+day;
}

function checkSelfexclDateLimits() {
	var today = new Date();
	today.setHours(0);today.setMinutes(0);today.setSeconds(0);today.setMilliseconds(0);
	var selfexclDate = new Date();
	var dateArray = new Array();
	dateArray = document.forms.CustSelfExcl.selfexcl_date.value.split('-');
	if (dateArray.length != 3) {
		alert ('Error in date field format (should be yyyy-MM-DD)');
		document.forms.CustSelfExcl.selfexcl_date.value = '';
		return false;
	}
	selfexclDate.setFullYear(dateArray[0]);
	selfexclDate.setMonth(dateArray[1]-1);
	selfexclDate.setDate(dateArray[2]);
	var dmin = new Date();
	var d5Years = new Date();
	dmin.setDate(dmin.getDate() + ##TP_SrpMinLengthDays##);
	d5Years.setFullYear(d5Years.getFullYear() + 5);

	##TP_IF {[tpGetVar SrpLimitLength 0]}##
	if (selfexclDate < dmin) {
		alert ('Self exclusion period is at least ##TP_SrpMinLengthDays## days');
		document.forms.CustSelfExcl.selfexcl_date.value = '';
		return false;
	} else
	##TP_ELSE##
	if (selfexclDate < today) {
		alert ('Cannot set self exclusion to end in past.  Date specified:' + selfexclDate );
		document.forms.CustSelfExcl.selfexcl_date.value = '';
		return false;
	} else
	##TP_ENDIF##
	if ( selfexclDate > d5Years) {
		alert ('Maximum self exclusion period is 5 years');
		document.forms.CustSelfExcl.selfexcl_date.value = '';
		return false;
	}
}
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_SEARCH_XSYS_ACCT 0]}##
function xsys_grp_name_change(grp) {
	// build the data arry
	var aliases = [];
	##TP_LOOP xsys_acct_idx {[tpGetVar num_xsys_aliases]}##
		aliases[##TP_TCL {tpGetVar xsys_acct_idx}##] = "##TP_xsys_alias##";
	##TP_ENDLOOP##

	var alias_text = document.getElementById("xsys_alias");
	var old_alias  = document.getElementById("old_xsys_alias");

	if (grp.selectedIndex) {
		alias_text.disabled = false;
		alias_text.value = aliases[grp.selectedIndex-1];
		old_alias.value = alias_text.value;
	} else {
		alias_text.value = "Select a system..";
		alias_text.disabled = true;
	}

	return;

}

##TP_ENDIF##

function do_onload() {

	displayCalendars();
	##TP_IF {[OT_CfgGet PLAYTECH_AJAX_BALANCES 0]}##
		loadPlaytechBalances();
	##TP_ENDIF##
}

##TP_IF {[OT_CfgGet FUNC_PLAYTECH 0] && [OT_CfgGet PLAYTECH_AJAX_BALANCES 0]}##
	// make ajax request to obtain playtech balance
	function loadPlaytechBalances()  {
		var d = new Date();
		var pt_url = '##TP_CGI_URL##?action=ADMIN::CUST::AjaxPlaytechBalance&username=##TP_Username##';

		// make ajax request to get playtech balances
		HttpRequest(pt_url, 'GET', setPlaytechBalance, '', true)
	}

	// playtech ajax balance callback
	function setPlaytechBalance(_req) {

		if (_req.status == 200 && _req.responseText != "") {

			var resp = _req.responseText;
			var data = resp.split('|');

			for (var i=0; i < data.length - 1; i+=5) {
				var system = data[i];
				document.getElementById(system+'_bal').innerHTML           = data[i+1];
				document.getElementById(system+'_bonus').innerHTML         = data[i+2];
				document.getElementById(system+'_xfer_bal').innerHTML      = data[i+1];
				document.getElementById(system+'_xfer_bonus').innerHTML    = data[i+2];
				document.getElementById(system+'_xfer_frozen').innerHTML   = data[i+3];
				document.getElementById(system+'_xfer_nickname').innerHTML = data[i+4];
			}

		}
	}
##TP_ENDIF##

</script>

</head>
<body onload="do_onload()">
##TP_IF {[tpGetVar NumElite 0] != 0}##
	<font color="red"><b>&nbsp;* Elite Customer</b></font>
##TP_ENDIF##
##TP_IF {[tpGetVar PERM_ViewCustInfo 0] && ([op_allowed EliteCustAccess] || (![op_allowed EliteCustAccess] && [tpBindGet Elite] != "Y"))}##
##TP_PLAY error_rpt.html##
##TP_PLAY msg_rpt.html##
##TP_IF {[tpGetVar DoneOK 0]}##
<table cellspacing=0 cellpadding=3 border=0>
<tr class=infoyes>
	<td>&nbsp;&nbsp;
	<b>
	Operation sucessful:
	##TP_IF {[tpGetVar ManDepDone 0]}##
		&nbsp;deposit reference: ##TP_ManDepId##
	##TP_ENDIF##
	##TP_IF {[tpGetVar ManWtdDone 0]}##
		&nbsp;deposit reference: ##TP_ManWtdId##
	##TP_ENDIF##
	##TP_IF {[tpGetVar ManAdjDone 0]}##
		&nbsp;deposit reference: ##TP_ManAdjId##
	##TP_ENDIF##
	</b>
	&nbsp;&nbsp;
	</td>
</tr>
</table>
<br>
##TP_ENDIF##

<!-- BEGIN SelfExclusion -->
##TP_IF {[tpGetVar self_exclusion_exists 0] || [tpGetVar self_exclusion_due_clearance 0]}##
<table border=0 cellspacing=0 cellpadding=2 bgcolor=#cccccc>
<tr>
	<th class=title colspan=2>
	##TP_XL {Admin.Cust_Details.SELF_EXCLUSION}##
	</th>
</tr>
<tr>
	<th class="caption" colspan=2>
	##TP_IF {[tpGetVar self_exclusion_due_clearance 0]}##
		##TP_XL {Admin.Cust_Details.CUST_OUT_SELF_EXCL_PERIOD}##
	##TP_ELSE##
		##TP_XL {Admin.Cust_Details.CUST_IN_SELF_EXCL_PERIOD}##
	##TP_ENDIF##
	</th>
</tr>
<tr>
	<td height="20"><b>##TP_XL {Admin.Cust_Details.SELF_EXCL_STARTED}##:</b></td>
	<td height="20">##TP_SelfExclFrom##</td>
</tr>
<tr>
	<td height="20"><b>##TP_XL {Admin.Cust_Details.SELF_EXCL_ENDS}##:</b></td>
	<td height="20">##TP_SelfExclTo##</td>
</tr>
##TP_IF {[tpGetVar self_exclusion_due_clearance 0]}##
<tr>
	<th colspan=2 class=buttons>
		<form action="##TP_CGI_URL##" method=get>
		<input type=hidden name=CustId value="##TP_CustId##">
		<input type=hidden name=SubmitName value="">
		<input type=hidden name=action value=ADMIN::CUST::DoCust>
		##TP_IF {[op_allowed ClearSelfExcl]}##<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.CLEAR_SELF_EXCL}##" onClick="return fs(this,'DoCustUpdLimit')">##TP_ENDIF##
		</form>
	</th>
</tr>
##TP_ENDIF##
</table>
<br>
##TP_ENDIF##
<!-- END SelfExclusion -->

<!-- BEGIN SummaryInformation -->
<table cellspacing=0 cellpadding=2 border=0>
<tr>
	<th colspan="##TP_IF {[OT_CfgGet HIGHLIGHT_CUST_GROUP 0]}##1##TP_ELSE##2##TP_ENDIF##" class=title>
		##TP_XL {Admin.Cust_Details.CUST_DETAILS}##
	</th>
	##TP_IF {[OT_CfgGet HIGHLIGHT_CUST_GROUP 0]}##
		<th class=##TP_IF {[tpGetVar isPlatinum]}##"title_platinum"##TP_ELSE##"title"##TP_ENDIF##>
			##TP_XL {Admin.Cust_Details.CUST_GROUP}##: ##TP_CustomerGroup##
		</th>
	##TP_ENDIF##

</tr>
<tr>
<td valign=top nowrap align=left>
<table cellspacing=0 cellpadding=1 border=0>
<tr>
	<th colspan=2 nowrap class="custHeader">##TP_XL {Admin.Cust_Details.ACCT_INFORMATION}##</th>
</tr>
##TP_IF {![OT_CfgGet FUNC_HIDE_USERNAMES 0]}##
<tr>
	<td nowrap class="caption">##TP_XL {Admin.Cust_Details.USERNAME}##:&nbsp;</td><td ##TP_IF {[tpGetVar isPlatinum]}##class="platinum_text"##TP_ENDIF##>&nbsp;##TP_IF {[op_allowed EliteCustAccess] || (![op_allowed EliteCustAccess] && [tpBindGet Elite] != "Y")}##<a href="##TP_CGI_URL##?action=ADMIN::CUST::GoCust&amp;CustId=##TP_CustId##"  ##TP_IF {[tpGetVar isPlatinum]}##class="anchor_platinum"##TP_ENDIF##>##TP_Username##</a> ##TP_ELSE## * ##TP_ENDIF##</td>
</tr>
##TP_ENDIF##
<tr>
	<td nowrap class="caption">##TP_XL {Admin.Cust_Details.ACCTNO}##:&nbsp;</td><td ##TP_IF {[tpGetVar isPlatinum]}##class="platinum_text"##TP_ENDIF##>&nbsp;##TP_AcctNo##</td>
</tr>
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.ELITE_CUST}##:</td><td><input type="checkbox" ##TP_IF {[tpBindGet Elite] == "Y"}##checked ##TP_ENDIF##disabled/></td>
</tr>

##TP_IF {[OT_CfgGet FUNC_HYBRID_HEDGING 0] && [tpBindGet Owner] == "F"}##
	<tr>
		<td nowrap class="caption">Rep Code:&nbsp;</td>
		<td>##TP_IF {[tpBindGet RepCode] == "(none)"}##<i>##TP_ELSEIF {[tpGetVar RepCodeStatus] != "A"}##<i><s>##TP_ENDIF##
		&nbsp;##TP_RepCode##
		##TP_IF {[tpBindGet RepCode] == "(none)"}##</i>##TP_ELSEIF {[tpGetVar RepCodeStatus] != "A"}##</s></i>##TP_ENDIF##</td>
	</tr>
##TP_ENDIF##

##TP_IF {[OT_CfgGetTrue FUNC_EXT_ID] && [op_allowed ExtIdFunc]}##
##TP_IF {[tpGetVar ExtGroupsCount] > 0}##
##TP_LOOP ext_cust_idx {[tpGetVar ExtGroupsCount]}##
<tr>
	<td nowrap class=caption>##TP_ExtCustDisplay##&nbsp;</td>
	<td>
		##TP_IF {$EXT_CUST_DETAILS([tpGetVar ext_cust_idx],count)>1}##
			&nbsp;<a href="##TP_CGI_URL##?action=ADMIN::CUST::DoCustQuery&amp;ext_cust_id=##TP_ExtCustId##&amp;ext_group_code=##TP_ExtCustCode##">##TP_ExtCustId## (##TP_TCL {tpBufWrite [ob_xl::sprintf [ob_xl_compat::get_lang] Admin.Cust_Details.NUM_LINKED_ACCTS [tpBindGet ExtCustCount]]}##)</a>
		##TP_ELSE##
			&nbsp;##TP_ExtCustId## (##TP_TCL {tpBufWrite [ob_xl::sprintf [ob_xl_compat::get_lang] Admin.Cust_Details.NUM_LINKED_ACCT [tpBindGet ExtCustCount]]}##)
		##TP_ENDIF##
	</td>
</tr>
<tr>
	<td nowrap class=caption>(##TP_XL {Admin.Cust_Details.MASTER_ACCT}##)</td>
	<td>&nbsp;##TP_TCL {tpBufWrite [ob_xl::sprintf [ob_xl_compat::get_lang] Admin.Y_N.[tpBindGet ExtCustMaster]]}##</td>
</tr>
##TP_ENDLOOP##
##TP_ENDIF##
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_SHOW_ACCT_TYPE_DETAILS 1]}##
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.ACCT_TYPE}##:&nbsp;</td><td>&nbsp;<script>write_which('##TP_AcctType##','DBT','Debit','CDT','Credit','DEP','Deposit');</script></td>
</tr>
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.ACCT_CCY}##:&nbsp;</td><td>&nbsp;##TP_AcctCCY##<td>
</tr>
##TP_ENDIF##
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.ACCT_BAL}##:&nbsp;</td><td>&nbsp;##TP_AcctBalance##<td>
</tr>
##TP_IF {![OT_CfgGet FUNC_CUST_SHOW_MIN_REG_INFO 0]}##
<tr>
	<td nowrap class=caption>(##TP_XL {Admin.Cust_Details.NON_WTD}##):&nbsp;</td><td>&nbsp;##TP_AcctBalanceNoWtd##<td>
</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_REVERSE_WITHDRAWALS 0]}##
<tr>
	<td nowrap class=caption>Pending (delayed) withdrawals balance:&nbsp;</td><td>&nbsp;##TP_reversible_wtd_balance## &nbsp;
		<a href="##TP_CGI_URL##?action=ADMIN::PMT::GoReversibleWtd&AcctId=##TP_AcctId##&CustId=##TP_CustId##">View details</a></td>
</tr>
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_PLAYTECH 0]}##
	##TP_LOOP pt_idx {[tpGetVar PlaytechSysNum]}##
		##TP_IF {[OT_CfgGet PLAYTECH_AJAX_BALANCES 0]}##
			<tr>
				<td nowrap class=caption>##TP_disp_name## balance:&nbsp;</td><td id="##TP_system##_bal">&nbsp;Loading...<td>
			</tr>
			<tr>
				<td nowrap class=caption>##TP_disp_name## bonus:&nbsp;</td><td id="##TP_system##_bonus">&nbsp;Loading...<td>
			</tr>
		##TP_ELSE##
			<tr>
				<td nowrap class=caption>##TP_disp_name## balance:&nbsp;</td><td>&nbsp;##TP_balance##<td>
			</tr>
			<tr>
				<td nowrap class=caption>##TP_disp_name## bonus:&nbsp;</td><td>&nbsp;##TP_bonus##<td>
			</tr>
		##TP_ENDIF##
	##TP_ENDLOOP##
##TP_ENDIF##

##TP_IF {[OT_CfgGet ENABLE_RISKGUARDIAN 0] == 1}##
<tr>
	<td nowrap class=caption>Risk Guardian Failures:&nbsp;</td>
	##TP_IF {[tpGetVar numRiskGuardianFailures] > 0}##
		<td>&nbsp;<a href="##TP_CGI_URL##?action=ADMIN::CUST::GoRiskGuardianFailures&amp;CustId=##TP_CustId##">##TP_numRiskGuardianFailures##</a></td>
	##TP_ELSE##
		<td>&nbsp;##TP_numRiskGuardianFailures##</td>
	##TP_ENDIF##
</tr>
##TP_ENDIF##

##TP_IF {[OT_CfgGet ENABLE_FREEBETS2 "FALSE"] == "TRUE"}##
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.FB_TOK_OPEN}##:&nbsp;</td>
	<td>##TP_IF {[tpGetVar numOpenTokens] != 0}##<a href="##TP_CGI_URL##?action=ADMIN::CUST::GoFreeTokenList&amp;CustId=##TP_CustId##&amp;TokenType=O">##TP_ENDIF##&nbsp;##TP_numOpenTokens##&nbsp;(##TP_tokenOpenTotal##&nbsp;##TP_AcctCCY##)##TP_IF {[tpGetVar numOpenTokens] != 0}##</a>##TP_ENDIF##<td>
</tr>
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.FB_TOK_RDMD}##:&nbsp;</td>
	<td>##TP_IF {[tpGetVar numRedeemTokens] != 0}##<a href="##TP_CGI_URL##?action=ADMIN::CUST::GoFreeTokenList&amp;CustId=##TP_CustId##&amp;TokenType=R">##TP_ENDIF##&nbsp;##TP_numRedeemTokens##&nbsp;(##TP_tokenRedeemTotal##&nbsp;##TP_AcctCCY##)##TP_IF {[tpGetVar numRedeemTokens] != 0}##</a>##TP_ENDIF##<td>
</tr>
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_MENU_IGF_WAGERING_REQTS 0] == 1}##
<tr>
	<td class="caption">Wagering Requirements: </td>
	<td>
		<a href="##TP_CGI_URL##?action=ADMIN::IGF::GoWagerReqts&cust_id=##TP_CustId##&Username=##TP_IF {[op_allowed EliteCustAccess] || (![op_allowed EliteCustAccess] && [tpBindGet Elite] != "Y")}####TP_Username####TP_ELSE## * ##TP_ENDIF##">##TP_wager_reqt_balance##</a>
	</td>
</tr>
<tr>
	<td class="caption">Held Funds: </td>
	<td>
            <a href="##TP_CGI_URL##?action=ADMIN::IGF::GoWagerReqts&cust_id=##TP_CustId##&Username=##TP_IF {[op_allowed EliteCustAccess] || (![op_allowed EliteCustAccess] && [tpBindGet Elite] != "Y")}####TP_Username####TP_ELSE## * ##TP_ENDIF##">##TP_held_fund_balance##</a>
       </td>
</tr>

##TP_ENDIF##

##TP_IF {[tpGetVar AcctType] == "CDT"}##
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.CREDIT_LIMIT}##:&nbsp;</td>
	<td>&nbsp;##TP_CreditLimit##<td>
</tr>
##TP_ENDIF##
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.NR_BETS}##:&nbsp;</td><td>&nbsp;##TP_NumBets##<td>
</tr>
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.LAST_BET}##:&nbsp;</td><td>&nbsp;##TP_LastBet##<td>
</tr>
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.MSF}##:&nbsp;</td><td>&nbsp;##TP_MaxStakeScale##<td>
</tr>
<!--<tr>
	<td nowrap class=caption>Total Staked (settled):&nbsp;</td><td>&nbsp;##TP_TotStldStakes##<td>
</tr>-->
<tr>
	<th colspan=2 nowrap class="custHeader">##TP_XL {Admin.Cust_Details.GRAND_TOTALS}##</th>
</tr>
##TP_IF {[OT_CfgGet FUNC_XGAME 1]}##
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.XGAME_STKE_TOTAL_STLD}##:&nbsp;</td><td>&nbsp;##TP_TotStldStakesXG##<td>
</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_POOLS 1]}##
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.POOLS_STKE_TOTAL_STLD}##:&nbsp;</td><td>&nbsp;##TP_TotStldStakesPool##<td>
</tr>
##TP_ENDIF##
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.SPORTS_STKE_STLD}##:&nbsp;</td><td>&nbsp;##TP_TotStldStakesSport##<td>
</tr>

##TP_IF {[OT_CfgGet SPORT_CUST_BREAKDOWN_ENABLED 0 ]}##
<tr>
	<td class=caption>##TP_XL {Admin.Cust_Details.SPORTS_BET_SUMM}##:</td>
	<td>
		<a href="##TP_CGI_URL##?action=ADMIN::CUST::GoCustBetSummary&amp;AcctId=##TP_AcctId##&amp;summary_type=F">&nbsp;##TP_XL {Admin.Cust_Details.SPORTS_BET_SUMM_VIEW}##</a>
	</td>

</tr>
##TP_ENDIF##

##TP_IF {[OT_CfgGet POOL_CUST_BREAKDOWN_ENABLED 0 ]}##
<tr>
	<td class=caption>##TP_XL {Admin.Cust_Details.POOLS_BET_SUMM}##:</td>
	<td>
		<a href="##TP_CGI_URL##?action=ADMIN::CUST::GoCustBetSummary&amp;AcctId=##TP_AcctId##&amp;summary_type=P">&nbsp;View</a>
	</td>

</tr>
##TP_ENDIF##

##TP_IF {[OT_CfgGet XGAMES_CUST_BREAKDOWN_ENABLED 0 ]}##
<tr>
	<td class=caption>##TP_XL {Admin.Cust_Details.XGAME_BET_SUMM}##:</td>
	<td>
		<a href="##TP_CGI_URL##?action=ADMIN::CUST::GoCustBetSummary&amp;AcctId=##TP_AcctId##&amp;summary_type=X">&nbsp;View</a>
	</td>

</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_XGAME 1]}##
<tr>
	<td nowrap class="caption">##TP_XL {Admin.Cust_Details.TOTAL_XGAME_STKE_UNSTL}##:&nbsp;</td>
	<td>&nbsp;<a href="##TP_CGI_URL##?action=ADMIN::BET::DoCustUstlBetQuery&amp;QueryType=xgame&amp;CustId=##TP_CustId##">##TP_TotUnStldStakesXG##</a><td>
</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_POOLS 1]}##
<tr>
	<td nowrap class="caption">##TP_XL {Admin.Cust_Details.TOTAL_POOLS_STKE}##:&nbsp;</td>
	<td>&nbsp;<a href="##TP_CGI_URL##?action=ADMIN::BET::DoCustUstlBetQuery&amp;QueryType=pools&amp;CustId=##TP_CustId##">##TP_TotUnStldStakesPool##</a><td>
</tr>
##TP_ENDIF##
<tr>
	<td nowrap class="caption">##TP_XL {Admin.Cust_Details.SPORTS_STKE_UNSTLD}##:&nbsp;</td>
	<td>&nbsp;<a href="##TP_CGI_URL##?action=ADMIN::BET::DoCustUstlBetQuery&amp;QueryType=sports&amp;CustId=##TP_CustId##">##TP_TotUnStldStakesSport##</a><td>
</tr>
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.TOTAL_STKE}##:&nbsp;</td><td>&nbsp;##TP_TotStakes##<td>
</tr>
<tr>
	<td nowrap class=caption>Total Returns:&nbsp;</td><td>&nbsp;##TP_TotReturns##<td>
</tr>

##TP_IF {[tpGetVar isHedgingAccount 0]}##
<tr>
	<td nowrap class=caption>Total Hedged Stakes:&nbsp;</td><td>&nbsp;##TP_TotStakesHedge##</td>
</tr>
<tr>
	<td nowrap class=caption>Total Hedged Winnings:&nbsp;</td><td>&nbsp;##TP_TotWinningsHedge##</td>
</tr>
<tr>
	<td nowrap class=caption>Total Hedged Refunds:&nbsp;</td><td>&nbsp;##TP_TotRefundsHedge##</td>
</tr>
##TP_ENDIF##

<tr>
	<td nowrap class=caption>Running Balance (settled):&nbsp;</td><td>&nbsp;##TP_RunningBalance##<td>
</tr>
##TP_IF {[OT_CfgGet FUNC_TELEBETTING 0]}##
<tr>
	<td nowrap class=caption>Min Repayment:&nbsp;</td><td>&nbsp;##TP_min_repay##</td>
</tr>
<tr>
	<td nowrap class=caption>Retain:&nbsp;</td><td>&nbsp;##TP_min_funds##</td>
</tr>
##TP_IF {[tpGetVar AcctType] == "CDT"}##
<tr>
	<td nowrap class=caption>Pay at:&nbsp;</td><td>&nbsp;##TP_min_settle##</td>
</tr>
<tr>
	<td nowrap class=caption>Pay %:&nbsp;</td><td>&nbsp;##TP_pay_pct##</td>
</tr>
##TP_ENDIF##
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_SHOW_AFF_ID_ON_CUST 0]}##
<tr>
	<td nowrap class=caption>Affiliate ID:&nbsp;</td><td>&nbsp;##TP_AffID##</td>
</tr>
##TP_ENDIF##

##TP_IF {[tpGetVar FuncExtDep 0]}##
<tr>
	<td nowrap class=caption valign="top">Funds In today:&nbsp;</td><td class=caption>##TP_TodaysFI##</td>
</tr>
<tr>
	<td nowrap class=caption valign="top">CC Funds In today:&nbsp;</td><td class=caption>##TP_TodaysCCFI##</td>
</tr>
<tr>
	<td nowrap class=caption valign="top">Last Fund In:&nbsp;</td><td>##TP_FIDate##</td>
</tr>
<tr>
	<td class=caption>Amount:&nbsp;</td><td class=caption>##TP_FIAmount##</td>
</tr>
<tr>
	<td class=caption>Code:&nbsp;<br>User:&nbsp;</td>
	<td>##TP_FICode##<br>##TP_FIUser##
	</td>
</tr>
##TP_ENDIF##
##TP_IF {[tpGetVar FuncExtWtd 0]}##
<tr>
	<td nowrap class=caption valign="top">Funds Out today:&nbsp;</td><td class=caption>##TP_TodaysFO##</td>
</tr>
<tr>
	<td nowrap class=caption valign="top">Last Fund Out:&nbsp;</td><td>##TP_FODate##</td>
</tr>
<tr>
	<td class=caption>Amount:&nbsp;</td><td align="right">##TP_FOAmount##</td>
</tr>
<tr>
	<td class=caption>Code:&nbsp;<br>User:&nbsp;</td>
	<td>##TP_FOCode##<br>##TP_FOUser##</td>
</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_MENU_AUTO_DBT_RETURN 0]}##
<tr>
	<td nowrap class=caption>ClearDown Group:&nbsp;</td><td nowrap>##TP_CDGroupName##</td>
</tr>
<tr>
	<td nowrap class=caption>ClearDown Days:&nbsp;</td><td nowrap>##TP_CDDays##</td>
</tr>
<tr>
	<td nowrap class=caption>ClearDown Group Status:&nbsp;</td><td nowrap>##TP_CDGroupStatus##</td>
</tr>
##TP_ENDIF##

##TP_IF {[tpGetVar BallsCasinoPokerCheck] == "Y"}##
<tr bgcolor=#993333>
	<th colspan=2 nowrap align=left>
	<font color=white>Miscellaneous information</font>
	</th>
</tr>
<tr>
	<td nowrap class=caption valign="top">Has Played Balls:&nbsp;</td><td>##TP_PlayedBalls##</td>
</tr>
<tr>
	<td nowrap class=caption valign="top">Has Played Casino:&nbsp;</td><td>##TP_PlayedCasino##</td>
</tr>
<tr>
	<td nowrap class=caption valign="top">Has Played Casino 2004 version:&nbsp;</td><td>##TP_PlayedViperCasino##</td>
</tr>
<tr>
	<td nowrap class=caption valign="top">Has Played Poker:&nbsp;</td><td>##TP_PlayedPoker##</td>
</tr>
<tr>
	<td nowrap class=caption valign="top">Has Played Rio Bay Casino:&nbsp;</td><td>##TP_PlayedRioCasino##</td>
</tr>
<tr>
	<td nowrap class=caption valign="top">Has Played Games:&nbsp;</td><td>##TP_PlayedGames##</td>
</tr>
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_CUST_IDENT 0]}##
	<tr>
		<th colspan="2" nowrap align="left" class="custHeader">
			Customer Identification
		</th>
	</tr>
	##TP_IF {[OT_CfgGet FUNC_OVS 0]}##
	<tr>
		<td nowrap class="caption" valign="top">
			Verification Status
		</td>
		<td>
			<a href="##TP_CGI_URL##?action=ADMIN::VERIFICATION::GoSearch&amp;CustId=##TP_CustId##">
				<script>
					write_which('##TP_IdentAgeVrfStatus##'
						,'','N/A'
						,'P','Restricted'
						,'A','Active'
						,'N','N/A'
						,'S','Suspended'
						,'U','Under Age'
					);
				</script>
			</a>
		</td>
	</tr>
	##TP_ENDIF##
	##TP_IF {[OT_CfgGet FUNC_KYC 0]}##
		<tr>
			<td nowrap class="caption" valign="top">
				KYC Status
			</td>
			<td>
				<script>
					write_which('##TP_IdentKYCStatus##'
						,'','N/A'
						,'R','Restricted'
						,'F','Restricted'
						,'A','Automated Auth Pro pass'
						,'C','Automated CVV2 pass'
						,'M','Manual pass'
						,'AR','Restricted (triggered by AV)'
						,'AF','Restricted, Automated check failed (triggered by AV)'
					);
				</script>
			</td>
		</tr>
	##TP_ENDIF##
	##TP_IF {[op_allowed ManageCustIdent]}##
		<tr>
			<td nowrap class="caption" valign="top">
				Identification submitted
			</td>
			<td>
				<a href="##TP_CGI_URL##?action=ADMIN::CUSTIDENT::GoIdent&amp;CustId=##TP_CustId##">##TP_IdentSet##</a>
			</td>
		</tr>
	##TP_ENDIF##
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_IOVATION_SNARE 0]}##
	<tr>
		<th colspan="2" nowrap align="left" class="custHeader">
			Iovation Trigger count
		</th>
	</tr>
	##TP_LOOP iova_cnt_idx {[tpGetVar num_iova_cnt]}##
	<tr>
		<td nowrap class="caption" valign="top">##TP_iova_cnt_trig_desc##</td>
		<td>##TP_iova_cnt_trig_count##</td>
	</tr>
	##TP_ENDLOOP##
##TP_ENDIF##

</table>
</td>
<!--<td>&nbsp;</td>-->
<td valign=top nowrap align=left>
<table cellspacing=0 cellpadding=1 border=0>
<tr>
	<th colspan=2 nowrap class="custHeader">##TP_XL {Admin.Cust_Details.REG_INFO}##</th>
</tr>
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.REG_DATE}##:&nbsp;</td><td nowrap>##TP_RegDate##</td>
</tr>
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.REG_CHANNEL}##:&nbsp;</td><td nowrap>##TP_RegSource##</td>
</tr>
##TP_IF {![OT_CfgGet FUNC_CUST_SHOW_MIN_REG_INFO 0]}##
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.NICKNAME}##:&nbsp;</td><td nowrap>##TP_NickName##</td>
</tr>
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.TITLE}##:&nbsp;</td><td nowrap>##TP_Title##</td>
</tr>
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.FNAME}##:&nbsp;</td><td nowrap>##TP_IF {[op_allowed EliteCustAccess] || (![op_allowed EliteCustAccess] && [tpBindGet Elite] != "Y")}## ##TP_FName## ##TP_ELSE## * ##TP_ENDIF##</td>
</tr>
##TP_IF {[OT_CfgGet CAPTURE_FULL_NAME 0] == 1}##
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.MNAME}##:&nbsp;</td><td nowrap>##TP_IF {[op_allowed EliteCustAccess] || (![op_allowed EliteCustAccess] && [tpBindGet Elite] != "Y")}## ##TP_MName## ##TP_ELSE## * ##TP_ENDIF##</td>
</tr>
##TP_ENDIF##
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.LNAME}##:&nbsp;</td><td nowrap>##TP_IF {[op_allowed EliteCustAccess] || (![op_allowed EliteCustAccess] && [tpBindGet Elite] != "Y")}## ##TP_LName## ##TP_ELSE## * ##TP_ENDIF##</td>
</tr>
<tr>
	<td nowrap class=caption>##TP_XL {Admin.Cust_Details.DOB}##:&nbsp;</td><td nowrap>##TP_DOB##</td>
</tr>
##TP_IF {[tpGetVar FuncIdCardSearch 0]}##
<tr>
	<td nowrap class=caption>Id Card No.:&nbsp;</td><td nowrap>##TP_IdCard##</td>
</tr>
##TP_ENDIF##
<tr>
	<td nowrap class=caption>Address (1):&nbsp;</td><td nowrap>##TP_Addr1##</td>
</tr>
<tr>
	<td nowrap class=caption>(2):&nbsp;</td><td nowrap>##TP_Addr2##</td>
</tr>
<tr>
	<td nowrap class=caption>(3):&nbsp;</td><td nowrap>##TP_Addr3##</td>
</tr>
<tr>
	<td nowrap class=caption>City:&nbsp;</td><td nowrap>##TP_City##</td>
</tr>
<tr>
	<td nowrap class=caption>County:&nbsp;</td><td nowrap>##TP_Addr4##</td>
</tr>
<tr>
	<td nowrap class=caption>State:&nbsp;</td><td nowrap>##TP_State##</td>
</tr>
<tr>
	<td nowrap class=caption>Postcode:&nbsp;</td><td nowrap>##TP_Postcode##</td>
</tr>
<tr>
	<td nowrap class=caption>Country (Postal):&nbsp;</td><td nowrap>##TP_Country_Postal##</td>
</tr>
<tr>
	<td nowrap class=caption>Country:&nbsp;</td><td nowrap>##TP_Country##</td>
</tr>
<tr>
	<td nowrap class=caption>Email:&nbsp;</td><td nowrap>##TP_Email##</td>
</tr>
<tr>
	<td nowrap class=caption>Interactive TV Email:&nbsp;</td><td nowrap>##TP_ITV_Email##</td>
</tr>
<tr>
	<td nowrap class=caption>Contact No.:&nbsp;</td><td nowrap>##TP_Telephone##</td>
</tr>
<tr>
	<td nowrap class=caption>Mobile:&nbsp;</td><td nowrap>##TP_Mobile##</td>
</tr>
<tr>
	<td nowrap class=caption>Office:&nbsp;</td><td nowrap>##TP_Office##</td>
</tr>
<tr>
	<td nowrap class=caption>Pager:&nbsp;</td><td nowrap>##TP_Pager##</td>
</tr>
<tr>
	<td nowrap class=caption>Fax:&nbsp;</td><td nowrap>##TP_Fax##</td>
</tr>
<tr>
	<td nowrap class=caption>Language code:&nbsp;</td><td nowrap>##TP_Lang##</td>
</tr>
<tr>
	<td nowrap class=caption>Gender:&nbsp;</td><td nowrap>##TP_Gender##</td>
</tr>
<tr>
	<td nowrap class=caption>IP Address:&nbsp;</td><td nowrap>##TP_IPAddr##</td>
</tr>
##TP_IF {[OT_CfgGet FUNC_SINGLE_CUSTOMER_GROUP 1] && ![OT_CfgGet HIGHLIGHT_CUST_GROUP 0]}##
<tr>
	<td nowrap class=caption>Customer Group:&nbsp;</td><td nowrap>##TP_CustomerGroup##</td>
</tr>
##TP_ENDIF##
<tr>
	<td nowrap class=caption>Hear About Us:&nbsp;</td><td nowrap>##TP_HearAboutTxt##</td>
</tr>
	##TP_IF {[OT_CfgGet FAV_FB_TEAM 0]}##
<tr>
	<td nowrap class=caption>Football Team:&nbsp;</td><td nowrap>##TP_fbteam##</td>
</tr>
	##TP_ENDIF##
	##TP_IF {[OT_CfgGet FUNC_INTERNET_ACTIVATION 0]}##
<tr>
	<td nowrap class=caption>Internet Activation:&nbsp;</td><td>##TP_IF {[tpGetVar InternetActivated] == 0}##<font color=red>Customer not yet activated, use form below to activate</font>##TP_ELSE##Activated##TP_ENDIF##</td>
</tr>
	##TP_ENDIF##
	##TP_IF {[OT_CfgGet FUNC_SHOW_AFF_ON_CUST 0]}##
<tr>
	<td nowrap class=caption>Affiliate :&nbsp;</td><td>
		##TP_IF {[tpBindGet aff_cust_id] ==""} ##
			##TP_Affiliate##
		##TP_ELSE##
			<a href="##TP_TCL {tpBufWrite [OT_CfgGet AAA_URL]}##?action=go_acct&amp;cust_id=##TP_aff_cust_id##" target="_new">##TP_Affiliate##</a>
		##TP_ENDIF##
	</td>
</tr>
	##TP_ENDIF##
	##TP_IF {[OT_CfgGet FUNC_NETREFER_AFFILIATE_SYSTEM 0] && [op_allowed BannerTagAccess]}##
<tr>
	<td nowrap class=caption>Banner Tag :&nbsp;</td><td>
		##TP_IF {[tpBindGet BannerTag] == ""}##
		<a href="#NetReferLink">None</a>
		##TP_ELSE##
		<a href="#NetReferLink">##TP_BannerTag##</a>
		##TP_ENDIF##
	</td>
</tr>
	##TP_ENDIF##
##TP_IF {[tpBindGet Owner] == "F" && [regexp {^(STR|VAR|OCC|REG|LOG)$} [tpBindGet OwnerType]]}##
<tr>
	<td nowrap class=caption>Shop Number:&nbsp;</td><td nowrap><a href="##TP_CGI_URL##?action=ADMIN::RETAIL::GoShop&amp;ShopNumber=##TP_ShopNumber##">##TP_ShopNumber##</a></td>
</tr>
<tr>
	<td nowrap class=caption>Shop Name:&nbsp;</td><td nowrap><a href="##TP_CGI_URL##?action=ADMIN::RETAIL::GoShop&amp;ShopNumber=##TP_ShopNumber##">##TP_ShopName##</a></td>
</tr>
<tr>
	<td nowrap class=caption>District No. :&nbsp;</td><td nowrap><a href="##TP_CGI_URL##?action=ADMIN::RETAIL::GoDistrict&amp;DistrictNo=##TP_DistrictCode##">##TP_DistrictCode##</a></td>
</tr>
<tr>
	<td nowrap class=caption>Shop Fielding Type:&nbsp;</td><td nowrap>##TP_OwnerType##</td>
</tr>
##TP_ENDIF##
<tr>
	<td nowrap class=caption>RightNow Contact Id:&nbsp;</td><td nowrap>##TP_RightNowId##</td>
</tr>
</table>
</td>
</tr>
##TP_IF {[OT_CfgGet FUNC_CUST_PERS_QUEST 1]}##
##TP_IF {[tpGetVar FuncPersQuest1 0] || [tpGetVar FuncPersQuest2 0] || [tpGetVar FuncMemorableDate 0]}##
<tr>
<td colspan=2 width=100%>
<table cellspacing=0 cellpadding=1 border=0 width=100%>
<tr>
	<th colspan=1 nowrap class="custHeader">Personal questions</th>
</tr>
##TP_IF {[tpGetVar FuncMemorableDate 0]}##
<tr>
	<td>Memorable Date:&nbsp;##TP_MemorableDate##</td>
</tr>
##TP_ENDIF##
##TP_IF {[tpGetVar FuncPersQuest1 0]}##
<tr>
	<td>Q1:&nbsp;##TP_Challenge1##<br>A1:&nbsp;##TP_Response1##</td>
</tr>
##TP_ENDIF##
##TP_IF {[tpGetVar FuncPersQuest2 0]}##
<tr>
	<td>Q2:&nbsp;##TP_Challenge2##<br>A2:&nbsp;##TP_Response2##</td>
</tr>
##TP_ENDIF##
</table>
</td>
</tr>
##TP_ENDIF##
##TP_ENDIF##
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th colspan=2 class=buttons>
		##TP_IF {[OT_CfgGet FUNC_CUST_UPD_REG 1]}##
		<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.UPDATE_CUST_BUTTON}##" onClick="return fs(this,'GoCustUpdReg')">
		##TP_ENDIF##
		<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.TXN_QUERY_BUTTON}##" onClick="return fs(this,'GoCustTxnQry')">
		##TP_IF {[OT_CfgGetTrue FUNC_CUST_LOGIN_HIST]}##
		<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.LOGIN_HIST_BUTTON}##" onClick="return fs(this, 'GoLoginHistory')" />
		##TP_ENDIF##
		##TP_IF {[OT_CfgGet FUNC_CUST_TOTALS 0]}##
		<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.TOTALS_BUTTON}##" onClick="return fs(this,'GoCustTotals')">
		##TP_ENDIF##
		##TP_IF {[OT_CfgGet FUNC_CUST_SIMPLE_TOTALS 0] && [op_allowed ViewCustSimpleTotals]}##
		<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.DAILY_TOTALS_BUTTON}##" onClick="return fs(this, 'GoCustSimpleTotals')">
		##TP_ENDIF##
		##TP_IF {[tpGetVar PERM_ViewAudit 0]}##
		<input type=hidden name=AuditInfo value="">
		<input type="button" class="btn_def" value="##TP_XL {Admin.VIEW_AUDIT_HIST_BUTTON}##" onClick="return doAudit('CustReg', this)">
		##TP_IF {[OT_CfgGetTrue FUNC_EXT_CUST]}##
		<input type="button" class="btn_def" value="##TP_XL {Admin.VIEW_EXT_ID_AUDIT_BUTTON}##" onClick="return doAudit('ExtId', this)">
		##TP_ENDIF##
		##TP_ENDIF##
		##TP_IF {[OT_CfgGetTrue FUNC_OVS] && [op_allowed VrfManCheck]}##
		<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.VRF_CHECK_BUTTON}##" onClick="return fs(this, 'GoCustVerificationCheck')">
		##TP_ENDIF##
		##TP_IF {[OT_CfgGetTrue FUNC_SHOP_FIELDING_ACCOUNTS] && [op_allowed TransferShopBets] && [tpBindGet Owner] == "F" && [regexp {^(STR|VAR|OCC|REG|LOG)$} [tpBindGet OwnerType]]}##
		<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.BET_XFER_BUTTON}##" onClick="return fs(this,'GoBetTransferSearch')">
		##TP_ENDIF##
		##TP_IF {[OT_CfgGet FUNC_SHOW_CUST_BET_SEARCH_BUTTON 1]}##
		<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.BET_SEARCH_BUTTON}##" onClick="return fs(this,'GoBetQuery')">
		##TP_ENDIF##
	</th>
</tr>
##TP_IF {[OT_CfgGetTrue FUNC_SHOP_FIELDING_ACCOUNTS] && [op_allowed CloseLoggedPunters] && [tpBindGet Owner] == "F" && [tpBindGet OwnerType] == "LOG"}##
<tr>
	<th colspan=2 class=buttons>
	##TP_IF {[tpBindGet AcctStatus] != "C"}##
		<input type="button" class="btn_def" value="Close Customer" onClick="return fs(this,'DoLoggedPunterClose')">
	##TP_ELSE##
		<input type="button" class="btn_def" value="Reactivate Customer" onClick="return fs(this,'DoLoggedPunterActivate')">
		##TP_IF {[tpGetVar NeedNewLog]}##
			Please enter a new log number for reactivation:
			<input type="text" name="NewLogNo" id="NewLogNo" value="" size=8>
		##TP_ENDIF##
	##TP_ENDIF##
	</th>
</tr>
##TP_ENDIF##
<input type=hidden name=CurStatus value="##TP_AcctStatus##">
<input type=hidden name=Username value="##TP_Username##">
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=AcctNo value="##TP_AcctNo##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
</form>
</table>
<br>
<!-- END SummaryInformation -->
##TP_IF {[OT_CfgGetTrue FUNC_SESSION]}##
	##TP_PLAY -nocache session_query.html##
##TP_ENDIF##


<!-- BEGIN MCS External Games Balances -->
##TP_IF {[tpGetVar MCSActive] == "Y"}##

<table border=0 cellspacing=0 cellpadding=2>
<tr>
	<th class=title>MCS Accounts</th>
</tr>
<tr>
	<td align=left colspan=2>
		This customer has activated their account with MCS.
	</td>
</tr>
<tr>
	<th class=buttons>
		<input type="button" class="btn_def" value="Retrieve MCS Casino Balance" onClick="bal_win = window.open('##TP_CGI_URL##?action=ADMIN::MCS_CUST::GoMCSBalance&amp;mode=CASINO&amp;username=##TP_Username##','CasinoBalance','height=20,width=150,menubar=no,personalbar=no,resizable=no,scrollbars=no,toolbar=no');">
		##TP_IF {[OT_CfgGet FUNC_MCS_POKER 0]}##
		<input type="button" class="btn_def" value="Retrieve MCS Poker Balance"  onClick="bal_win = window.open('##TP_CGI_URL##?action=ADMIN::MCS_CUST::GoMCSBalance&amp;mode=POKER&amp;username=##TP_Username##','PokerBalance','height=20,width=150,menubar=no,personalbar=no,resizable=no,scrollbars=no,toolbar=no');">
		##TP_ENDIF##
	<th>
</tr>
</table>
</form>
<br>
##TP_ENDIF##
<!-- END MCS External Games Balances -->


<!-- BEGIN CustDetails-->
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th class=title colspan=2>
	##TP_XL {Admin.Cust_Details.CUST_ATTRIBUTES}##
	</th>
</tr>
##TP_IF {[OT_CfgGet FUNC_FRAUD_SCREEN 0]}##
<tr>
	<td class=caption>##TP_XL {Admin.Cust_Details.FRAUD_STATUS}##</td>
	<td><font color=red>&nbsp;<script>write_which('##TP_FraudStatus##','A','Accept','C','Challenge','D','Decline');</script></font>
		##TP_IF {[op_allowed ManageFraudStatus]}##
		  &nbsp;&nbsp;&nbsp;<i>Go to <A href="#Customer_Flags">'Customer Flag Information'</A> to update status</i>
		##TP_ENDIF##
	</td>
</tr>
##TP_ENDIF##

<tr>
	<td class=caption>##TP_XL {Admin.Cust_Details.STATUS}##</td>
	<td>
	<select name="Status">
	<script type="text/javascript">
	write_select(
		'##TP_AcctStatus##',
		'A','##TP_XL {Admin.ACCT_STATUS_ACTIVE}##',
		'S','##TP_XL {Admin.ACCT_STATUS_SUSP}##',
		'C','##TP_XL {Admin.ACCT_STATUS_CLOSED}##'
	)
	</script>
	</select>
	<i>(If changing status, enter a reason below)</i>
	</td>
</tr>
<tr>
	<td class=caption>&nbsp;</td>
	<td>
	<input type=text name=StatusReason value="" size=50 maxlength="250">&nbsp;##TP_IF {[OT_CfgGet FUNC_CUST_ATTR_HIST_LINK 1]}##<a href="##TP_CGI_URL##?action=ADMIN::CUST::GoCustStatusHist&amp;CustId=##TP_CustId##">History</a>##TP_ENDIF##
	</td>
</tr>
##TP_IF {[OT_CfgGet FUNC_CUST_ATTR_CONTACTABLE 1]}##
<tr>
	<td class=caption>##TP_XL {Admin.Cust_Details.CONTACTABLE}##</td>
	<td>
	<b>##TP_XL {Admin.Cust_Details.BY_US}##</b>:&nbsp;
	<select name="ContactOK">
	<script>
	write_select('##TP_ContactOK##','Y','Yes','N','No')
	</script>
	</select>
	&nbsp;&nbsp;&nbsp;
	<b>##TP_XL {Admin.Cust_Details.BY_PARTNERS}##</b>&nbsp;
	<select name="PtnrContactOK">
	<script>
	write_select('##TP_PtnrContactOK##','Y','Yes','N','No')
	</script>
	</select>
	##TP_IF {[OT_CfgGet MKT_CONTACT 0]}##
	&nbsp;&nbsp;&nbsp;
	<b>##TP_XL {Admin.Cust_Details.BY_MARKETING}##</b>&nbsp;
	<select name="MktContactOK">
	<script>
	write_select('##TP_MktContactOK##','Y','Yes','N','No')
	</script>
	</select>
	##TP_ENDIF##
	</td>
</tr>
##TP_ELSE##
	<input name="ContactOK" type="hidden" value="N" />
	<input name="PtnrContactOK" type="hidden" value="N" />
	<input name="MktContactOK" type="hidden" value="N" />
##TP_ENDIF##
##TP_IF {[info exists CONTACT_HOW] && $CONTACT_HOW(num) > 0}##
<tr>
<td class=caption valign=top>##TP_XL {Admin.Cust_Details.ACCEPTABLE_CONTACT_METHODS}##</td>
<td>
	<table>
		<tr>
			<td valign=top>
				<input type=checkbox name="contact_how_frag" value="all" ##TP_contact_how_all_chk## onclick="changeCheckboxGroup(this,'contact_how');">All
			</td>
			<td valign=top rowspan="##TP_contact_count##">
				<table>
					<tr>
						<td valign=top>
							<b>##TP_XL {Admin.Cust_Details.EMAIL_CONTACT_OK}##</b>
						</td>
						<td valign=top>
							<select name="GoodEmail">
								<script>
									write_select('##TP_GoodEmail##','U','Unknown','Y','Yes','N','No')
								</script>
							</select>
						</td>
					</tr>
					<tr>
						<td valign=top>
							<b>##TP_XL {Admin.Cust_Details.MOBILE_CONTACT_OK}##</b>
						</td>
						<td valign=top>
							<select name="GoodMobile">
								<script>
									write_select('##TP_GoodMobile##','U','Unknown','Y','Yes','N','No')
								</script>
							</select>
						</td>
					</tr>
					<tr>
						<td valign=top>
							<b>##TP_XL {Admin.Cust_Details.ADDR_CONTACT_OK}##</b>
						</td>
						<td valign=top>
							<select name="GoodAddr">
								<script>
									write_select('##TP_GoodAddr##','U','Unknown','Y','Yes','N','No')
								</script>
							</select>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	##TP_LOOP contact_how_idx {$CONTACT_HOW(num)}##
	<tr>
		<td>
		<input type=checkbox name="contact_how_frag" value="##TP_contact_how_code##" ##TP_contact_how_chk## onclick="changeCheckboxGroup(this,'contact_how');">##TP_contact_how_name##
		</td>
	</tr>
	##TP_ENDLOOP##
	<input type="hidden" name="contact_how" value="##TP_contact_how##">
	</table>
</td>
<tr>
##TP_ELSE##
<input type="hidden" name="contact_how" value="....">
##TP_ENDIF##

<tr>
	<td class=caption>##TP_XL {Admin.Cust_Details.LIABILITY_GROUP}##</td>
	<td>
		<select name="LiabGroup">
			<script>
			write_select('##TP_LiabGroup##','','-'
				##TP_LOOP liab_groups_idx {[tpGetVar LiabGroupsCount]}##
				,"##TP_LiabGroupId##","##TP_LiabDesc##"
				##TP_ENDLOOP##);
			</script>
		</select>
	</td>
</tr>
##TP_ENDIF##

<tr>
	<td class=caption>##TP_XL {Admin.Cust_Details.MSF}##</td>
	<td>
	<input type=text name=MaxStakeScale size=5 value="##TP_MaxStakeScale##">
	<input type="hidden" name="OldMaxStakeScale" value="##TP_MaxStakeScale##"/>
	&nbsp;<i>(0.01 - 99.99)</i>
	&nbsp;<a href="##TP_CGI_URL##?action=ADMIN::CUST::GoCustLvlLimit&CustId=##TP_CustId##">by event level</a>
	&nbsp;&nbsp;&nbsp;
	<b>##TP_XL {Admin.Cust_Details.NOTIFYABLE}##</b>&nbsp;
	<select name=Notifyable>
	<script>
	write_select('##TP_Notifyable##','Y','Yes','N','No')
	</script>
	</select>
	</td>
</tr>
##TP_IF {[OT_CfgGet FUNC_CUST_ATTR_MSF_REVIEW 1]}##
<tr>
    <td class=caption>Date of next MSF Review</td>
	<td>(dd)<input type="text" name="dayMSF" size="2" value="##TP_dayMSF##" maxlength="2"/>
	    (mm)<input type="text" name="monthMSF" size="2" value="##TP_monthMSF##" maxlength="2"/>
		(yyyy)<input type="text" name="yearMSF" size="4" maxlength="4" value="##TP_yearMSF##"/>
	     &nbsp;<strong>Next Review</strong>&nbsp;<input type="text" name="Review" value="##TP_review##" size="2" maxlength="2"/>
         &nbsp;<strong> MSF Status</strong>
	    <select name="statusMSF">
	  	  <script>
	         write_select('##TP_statusMSF##','-','-','A','Active','S','Suspended')
	      </script>
	    </select>
	</td>
</tr>
##TP_ENDIF##
<tr>
	<td class=caption>##TP_XL {Admin.Cust_Details.CUST_NOTES}##</td>
	<td>
	<textarea cols=50 rows=4 wrap=virtual name="OperNotes">##TP_OperNotes##</textarea>
	</td>
</tr>
<tr>
	<td class=caption>&nbsp;</td>
	<td>
	<i>(Only 255 characters are stored)</i>
	</td>
</tr>

##TP_IF {[OT_CfgGet FUNC_CUST_CATEGORIES 0]}##
<tr>
	<td class=caption>##TP_XL {Admin.Cust_Details.CUST_CAT}##</td>
	<td>
	##TP_PLAY obj_cat_sel.html ##
	</td>
</tr>
##TP_ENDIF##

##TP_IF {[OT_CfgGet CUST_NEVER_ALLOW_BLOCKED_CC 0]}##
<input type="hidden" name="AllowCard" value="N">
##TP_ELSE##
<tr>
	<td class=caption>Allow blocked cards</td>
	<td>
	<select name="AllowCard">
	<script>
	write_select('##TP_AllowCard##','Y','Yes','N','No')
	</script>
	</select>
	</td>
</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGetTrue FUNC_MENU_CUSTOMER_SORT]}##
<tr>
	<td class=caption>
		##TP_IF {[OT_CfgGet RENAME_CUST_GRP_SORT 0]}##
			Customer Sort
		##TP_ELSE##
			Customer Type
		##TP_ENDIF##
	</td>
	<td>
	<select name="CustomerSort">
	<script>
	write_select('##TP_CustomerSort##'
		##TP_LOOP sort_idx {[tpGetVar NumCustSorts]}##
		,"##TP_CustSortSort##","##TP_CustSortDesc##"
		##TP_ENDLOOP##);
	</script>
	</select>
	</td>
</tr>
##TP_ELSE##
<input type="hidden" name="CustomerSort" value="##TP_CustomerSort##">
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_CUST_ATTR_VRF 1]}##
<tr>
	<td class="caption">Detail Verification</td>
	<td>
		<b>Bank Check</b>:&nbsp;
		<select name="BankCheck">
			<script>
				write_select('##TP_BankCheck##','Y','Checked - OK','N','Checked - NOT OK','-','Not Checked')
			</script>
		</select>
	</td>
</tr>
##TP_ELSE##
<input name="BankCheck" type="hidden" value="-" />
##TP_ENDIF##

##TP_IF {![info exists CONTACT_HOW] || $CONTACT_HOW(num) <= 0}##
<tr>
	<td>&nbsp;</td>
	<td>
		<b>Address</b>:&nbsp;
		<select name="GoodAddr">
			<script>
				write_select('##TP_GoodAddr##','U','Unknown','Y','Yes','N','No')
			</script>
		</select>
		&nbsp;&nbsp;&nbsp;

		<b>Email</b>&nbsp;
		<select name="GoodEmail">
			<script>
				write_select('##TP_GoodEmail##','U','Unknown','Y','Yes','N','No')
			</script>
		</select>
		&nbsp;&nbsp;&nbsp;

		<b>Mobile</b>&nbsp;
		<select name="GoodMobile">
			<script>
				write_select('##TP_GoodMobile##','U','Unknown','Y','Yes','N','No')
			</script>
		</select>
	</td>
</tr>
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_CUST_STOP_CODES 0] == 1 && [tpGetVar NumCustStopCodes] > 0}##
<tr>
		<td class=caption valign=top>Stop Codes</td>
		<td>
			##TP_LOOP code_idx {[tpGetVar NumCustStopCodes]}##
				##TP_CustCode##<br>
			##TP_ENDLOOP##
		</td>
</tr>
##TP_ENDIF##

##TP_IF {[OT_CfgGetTrue FUNC_CUST_STATUS_FLAGS] && [tpGetVar NumCustFlags] > 0}##
<tr>
		<td class=caption valign=top>Customer Status Flags</td>
		<td>
			<table>
			##TP_LOOP cf_idx {[tpGetVar NumCustFlags]}##
				<tr>
					<td><font color=red><b>##TP_CSF_status_flag_name##</b></font></td>
					<td>##TP_CSF_reason##</td>
				</tr>
			##TP_ENDLOOP##
			</table>
		</td>
</tr>
##TP_ENDIF##

<tr>
	<th colspan=2 class=buttons>
	<table border=0 cellspacing=0 cellpadding=0 width=100%>
	<tr>
		<th class=buttons colspan="2">
		<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.UPDATE_CUST}##" onClick="return fs(this,'CustUpd')">
		##TP_IF {[OT_CfgGet FUNC_CUST_STOP_CODES 0]}##
			<input type="button" class="btn_def" value="Stop Codes" onClick="return fs(this,'DoCustStopCodes')">
		##TP_ENDIF##
		##TP_IF {[OT_CfgGet FUNC_CUST_STATUS_FLAGS 0]}##
			<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.AMEND_STATUS_FLAGS}##" onClick="return fs(this,'DoCustStatusFlags')">
		##TP_ENDIF##
		##TP_IF {[tpGetVar PERM_ViewAudit 0]}##
			<input type="button" class="btn_def" value="##TP_XL {Admin.Cust_Details.VIEW_AUDIT_HIST}##" onClick="return doAudit('Cust', this)">
			<input type=hidden name=AuditInfo value="">
			##TP_IF {[OT_CfgGet FUNC_CUST_MSF_AUDIT 0]}##
			<input type="button" class="btn_def" value="View MSF Review Audit History" onClick="return doAudit('CustStake', this)">
			##TP_ENDIF##
		##TP_ENDIF##
		</th>
	</tr>
	</table>
	</th>
</tr>
<input type=hidden name=CurStatus value="##TP_AcctStatus##">
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
</form>
</table>
<br>
<!-- END CustDetails -->

<!-- BEGIN CustomerLimits -->
##TP_IF {[OT_CfgGetTrue FUNC_MENU_IGF]}##
	##TP_IF {[OT_CfgGetTrue IGF_PLAYER_PROTECTION]
			|| [OT_CfgGetTrue IGF_SESSION_TRACKING]}##
		##TP_PLAY -nocache igf/limit_list.html##
		<br>
	##TP_ENDIF##
	<!-- Customer Exclusions -->
	##TP_IF {[OT_CfgGetTrue IGF_PLAYER_PROTECTION]}##
		##TP_PLAY -nocache igf/exclusion_list.html##
		<br>
	##TP_ENDIF##
##TP_ENDIF##
<!-- END CustomerLimits -->


<!-- Customer Channel Exclusion Flags -->
##TP_IF {[OT_CfgGet FUNC_EXCLUSION_FLAGS 0]}##
	<table border=0 cellspacing=0 cellpadding=2>
		<form action="##TP_CGI_URL##" method=get>
		<tr>
			<A name="Customer_Exclusions"><th class=title>Channel/External System Exclusions</th></A>
		</tr>
		<tr>
		<th class="buttons" align=left>
			<input type="button" class="btn_def" value="View Customer Exclusions" onClick="return fs(this,'ViewCustExclusions')">
		</th>
		</tr>
		<input type="hidden" name="CustId" value="##TP_CustId##">
		<input type="hidden" name="AcctId" value="##TP_AcctId##">
		<input type="hidden" name="SubmitName" value="ViewCustExclusions">
		<input type="hidden" name="action" value="ADMIN::CUST::GoChanSysExclusion">
		</form>
	</table>
	<br>
##TP_ENDIF##

<!-- Customer Optional External System Sync -->
##TP_IF {[OT_CfgGetTrue FUNC_OPT_EXTSYS_SYNC]}##
	<table border="0" cellspacing="0" cellpadding="2">
		<form action="##TP_CGI_URL##" method="POST" name="opt_xsys_form">
		<input type="hidden" name="SubmitName" value=""/>
		<input type="hidden" name="action" value="ADMIN::XSYS_MGMT::OptInSystem" />
		<input type="hidden" name="opted_in_xsys_list" value="##TP_opted_in_xsys_list##" />
		<input type="hidden" name="cust_id" value="##TP_CustId##"/>
		<input type="hidden" name="dest_act" value="ADMIN::CUST::go_cust" />
		<tr>
			<th class="title" colspan="2">Optional External System Sync</th>
		</tr>
		<tr>
			<td class="colhead">System Name</td>
			<td class="colhead">Date</td>
		</tr>
		##TP_IF { [tpGetVar num_cust_opt_xsys] == 0 }##
		<tr>
			<td colspan="2">Customer has no optional Systems</td>
		</tr>
		##TP_ELSE##
			##TP_LOOP cust_opt_xsys_idx {[tpGetVar num_cust_opt_xsys]}##
			<tr>
				<td>##TP_cust_opt_xsys_name##</td>
				<td>##TP_cust_opt_xsys_cr_date##</td>
			</tr>
			##TP_ENDLOOP##
		##TP_ENDIF##

		##TP_IF {[op_allowed ManageOptExtSys]}##
		<tr>
			<td class="buttons" colspan="2">
				<select name="xsys_id_toadd">
				<option value="" selected/>--</option>
				##TP_LOOP opt_xsys_idx {[tpGetVar num_opt_xsys]}##
					<option value="##TP_opt_xsys_system_id##">##TP_opt_xsys_name##</option>
				##TP_ENDLOOP##
			<input type="button" class="btn_def" value="Add System" onclick="return fs(this,'AddOptExtSys')" />
			</td>
		</tr>
		##TP_ENDIF##
		</form>
	</table>
##TP_ENDIF##

<!-- Customer External Aliases -->
##TP_IF {[OT_CfgGet FUNC_SEARCH_XSYS_ACCT 0]}##
<table border=0 cellspacing=0 cellpadding=0>
	<form action="##TP_CGI_URL##" method=get>
	<tr>
		<th class=title colspan=2>
			Customer External Aliases
		</th>
	</tr>
	##TP_IF {[tpGetVar num_xsys_aliases] == 0}##
		<tr>
			<td colspan=2>There are no external aliases for this customer</td>
		</tr>
	##TP_ELSE##
		<tr>
			<td class=colhead>External System Group</td>
			<td class=colhead>Alias</td>
		</tr>
		<tr><td>
		<select name=systemGroupName onChange="xsys_grp_name_change(this);">
		<option value="" selected/>
		##TP_LOOP xsys_acct_idx {[tpGetVar num_xsys_aliases]}##
			<option value="##TP_xsys_sys_grp_name##">##TP_xsys_sys_grp_name##</option>
			##TP_IF {[tpGetVar xsys_acct_idx] == 0}##
				##TP_TCL {tpSetVar selected_alias [tpBindGet xsys_alias]}##
			##TP_ENDIF##
		##TP_ENDLOOP##
		</select></td>
		<td><input type=text id=xsys_alias name=xsys_alias value="Select a system.." disabled></td>
		<input type=hidden id=old_xsys_alias name=old_xsys_alias value="">
		</tr>
		<tr>
			<th class=buttons colspan=2>
			<input type=button class=btn_def value="Update Customer Aliases" onClick="return fs(this,'DoCustXSysAcctUpd')">
			</th>
		</tr>
	##TP_ENDIF##
	<input type=hidden name=CustId value="##TP_CustId##">
	<input type=hidden name=SubmitName value="">
	<input type=hidden name=action value=ADMIN::CUST::DoCust>
	</form>
</table>
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_CUST_SHOW_MSGS 1]}##
<!-- Customer Messages -->
<form action="##TP_CGI_URL##" method=get name=custMsgs>
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value="ADMIN::CUST::DoCust">
<table border=0 cellspacing=0 cellpadding=2>
	<tr>
		<th class=title colspan=2>
			Customer messages summary
		</th>
	</tr>

	##TP_LOOP msg_idx {[tpGetVar NumMsgs]}##
	<tr bgcolor=#993333>
		<th colspan=2 nowrap align=left>
			<font color=white><script>write_which("##TP_CustMsgSort##", "O", "Operator", "S", "Supervisor","C","Customer services","H","Hospitality","M","Marketing","X","Security");</script></font>
	 	</th>
	</tr>
	<tr>
		<td class=caption>Date (Operator)</td>
		<td>##TP_CustMsgDate## (##TP_CustMsgUname##)</td>
	</tr>
	<tr>
		<td class=caption>Message</td>
		<td width=500>##TP_CustMsgView##</td>
	</tr>

	##TP_ENDLOOP##

	##TP_IF {[tpGetVar NumMsgs] == 0}##
	<tr>
	  <td colspan = 2>There are no messages for this customer</td>
	</tr>
	##TP_ENDIF##
	<tr>
	  <th class=buttons align=center colspan=2>
			<input type="button" class="btn_def" class=cMsgBtn name=addFilterBtn onClick="return fs(this,'GoCustMsgs');" value="View ALL Customer Messages">
			##TP_IF {[tpGetVar PERM_ViewAudit 0]}##
			<input type="button" class="btn_def" value="View Audit History" onClick="return doAudit('CustomerMsg', this)">
			<input type=hidden name=AuditInfo value="">
			##TP_ENDIF##
		</th>
	</tr>
</table>
</form>
<br>
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_PROMOTIONS 0]}##
##TP_IF {[tpGetVar NumPromotions] > 0}##
<table border=0 cellspacing=0 cellpadding=2>
	<form action="##TP_CGI_URL##" method=get>
	<tr>
		<th class=title colspan=2>
			Customer Promotion Information
		</th>
		</tr>
		<tr>
			<td class=caption>Promotion</td>
			<td>
			<select name="PromotionId">
			##TP_LOOP i {[tpGetVar NumPromotions]}##
				<option value="##TP_id##">##TP_name##</option>
			##TP_ENDLOOP##
			</select>
			</td>
		</tr>
		<tr>
			<th class=buttons align=left colspan="2">
				<input type="button" class="btn_def" value="View Customer Promotion Information"
				onClick="return fs(this,'ViewCustPromo')">
			</th>
		</tr>
		<input type=hidden name=CustId value="##TP_CustId##">
		<input type=hidden name=AcctId value="##TP_AcctId##">
		<input type=hidden name=SubmitName value="">
		<input type=hidden name=action value=ADMIN::CUST::DoCust>
	</form>
	</table>
<br>
##TP_ENDIF##
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_CUST_FLAGS 0]}##
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<A name="Customer_Flags"><th class=title>Customer Flag Information</th></A>
</tr>
<tr>
<th class="buttons" align=left>
	<input type="button" class="btn_def" value="View Customer Flags" onClick="return fs(this,'ViewCustFlags')">
</th>
</tr>
<input type="hidden" name="CustId" value="##TP_CustId##">
<input type="hidden" name="AcctId" value="##TP_AcctId##">
<input type="hidden" name="SubmitName" value="">
<input type="hidden" name="action" value="ADMIN::CUST::DoCust">
</form>
</table>
<br>

##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_CUST_PREFS 0] == 1}##
<table border="0" cellspacing="0" cellpadding="2">
<tr>
	<th class="title">Customer Preferences</th></A>
</tr>
<tr>
<th class="buttons" align="left">
	<input type="button" class="btn_def" value="View Customer Preferences" onclick="location.href='##TP_CGI_URL##?action=ADMIN::CUST_PREFS::GoCustPrefList&CustId=##TP_CustId##'">
</th>
</tr>
</table>
<br>
##TP_ENDIF##

##TP_IF {[tpGetVar PERM_ViewAudit 0]}##
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th class=title>Account Audit Information</th>
</tr>
<tr>
	<th class=buttons align=left>
		<input type="button" class="btn_def" value="View Audit History" onClick="return doAudit('Acct', this)">
		<input type=hidden name=AuditInfo value="">
	</th>
</tr>
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=AcctId value="##TP_AcctId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
</form>
</table>
<br>
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_CUST_SELF_EXCL 0]}##
<!-- Customer Self Exclusion -->
<table border=0 cellspacing=0 cellpadding=2 bgcolor=#cccccc>
<form action="##TP_CGI_URL##" method=get name="CustSelfExcl">
<tr>
	<th class=title colspan=2>
	Customer Self Exclusion
	</th>
</tr>
<tr>
	<td height="20"><b>Self-Exclusion</b></td>
	<td height="20">
<!--select box disabled due to QC 2759, re-enable when post launch requirement is established -->
	<select name="excl_period" ##TP_IF {[OT_CfgGet SELF_EXCLUSION_BY_DATE 0] == 1}##onChange="updateSelfexclDate()"##TP_ENDIF## disabled>
		<script language="javascript" type="text/javascript">
			write_select(""
				,"" ,"None"
				##TP_LOOP excl_idx {[tpGetVar num_excl_periods 0]}##
				,"##TP_ExclValue##:##TP_ExclType##" ,"##TP_ExclString##"
				##TP_ENDLOOP##
			);
		</script>
	</select>
	##TP_IF {[OT_CfgGet SELF_EXCLUSION_BY_DATE 0] == 1}##&nbsp;&nbsp;or&nbsp;&nbsp;&nbsp;<input type="text" size=12 name="selfexcl_date" value="" onChange="checkSelfexclDateLimits()">##TP_ENDIF##
	</td>
</tr>
##TP_IF {[tpGetVar self_exclusion_exists 0]}##
<tr>
	<td height="20"><b>Self-Exclusion Started:</b></td>
	<td height="20">##TP_SelfExclFrom##</td>
</tr>
<tr>
	<td height="20"><b>Self-Exclusion Ends:</b></td>
	<td height="20">##TP_SelfExclTo##</td>
</tr>
##TP_ENDIF##
<tr>
	<th class=buttons colspan=2 align=left>
	<input type="button" class="btn_def" value="Update Self Exclusion" onClick="return fs(this,'DoCustSelfExcl')">
	##TP_IF {[tpGetVar PERM_ViewAudit 0]}##
	<input type="button" class="btn_def" value="View Audit History" onClick="return doAudit('CustLimits', this)">
	<input type=hidden name=AuditInfo value="">
	##TP_ENDIF##
	</font>
	</th>
</tr>
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
</form>
</table>
<br>
##TP_ENDIF##

##TP_IF {[OT_CfgGetTrue FUNC_CUST_LRG_RET]}##
<!-- Large Return limits -->
##TP_PLAY -nocache {pmt_fraud/cust_lrg_ret_lim.html}##
<br>
##TP_ENDIF##

<a name="cpm_anchor"></a>

<!-- Payment Methods -->
##TP_IF {[OT_CfgGet FUNC_CUST_SHOW_PAY_MTHDS 1] && [op_allowed ViewPayMethod] && [tpGetVar PmtDispError 0] != 1}##
<table cellspacing=0 cellpadding=2 border=0>
<form name="payment_search" method=get action=##TP_CGI_URL##>
<input type=hidden name="SR_acct_no" value="##TP_AcctNo##">
<input type=hidden name="SR_cust_id" value="##TP_CustId##">
<input type=hidden name="SR_cpm_id" value="">
<tr>
	<th colspan=2 class=title>Search For Payments</th>
</tr>
<tr>
	<td class=captionindex>Date Range</td>
	<td>
	<input type="text" name="SR_date_1" value="" size=19>
	&nbsp;and&nbsp;
	<input type="text" name="SR_date_2" value="" size=19>&nbsp;(yyyy-mm-dd hh:mm:ss)
	</td>
</tr>
<tr>
	<td class=captionindex>or</td>
	<td>
	<select name="SR_date_range">
		<option value="" selected>n/a</option>
		<option value="HR">Last hour</option>
		<option value="TD">Today</option>
		<option value="YD">Yesterday</option>
		<option value="L3">Last 3 days</option>
		<option value="L7">Last 7 days</option>
		<option value="CM">Current month</option>
	</select>
	</td>
</tr>
<tr>
	<td class=caption>Method</td>
	<td>
	<select name="SR_pay_mthd">
	<script>
	write_select(""
		,"","Any"
		##TP_LOOP cpm_idx {$CPM_CUST(num_rows)}##
		        ,"##TP_PMT_SEARCH_cust_pay_mthd##/##TP_PMT_SEARCH_cpm_id##","##TP_PMT_SEARCH_cust_pay_mthd_desc## ##TP_TCL {tpBufWrite [tpGetVar CPM_Card_No_[tpGetVar cpm_idx]]}## ##TP_IF {[tpGetVar CPM_Is_Entropay_Card_[tpGetVar cpm_idx]]}## (Entropay) ##TP_ENDIF## ##TP_TCL {tpBufWrite [tpGetVar CPM_Neteller_Id_[tpGetVar cpm_idx]]}## ##TP_TCL {tpBufWrite [tpGetVar CPM_envoy_uniq_ref_[tpGetVar cpm_idx]]}##"
		##TP_ENDLOOP##
	)
	</script>
	</select>
	</td>
</tr>
<tr>
	<th class=buttons colspan=2>
	<input type=button class="btn_def" value="Find Payments" onClick="return fs(this,'DoPmtQry')">
	</th>
</tr>
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::PMT::do_pmt_query>
</form>
</table>
<br>

<!-- Payment Methods -->
##TP_PLAY -nocache cust_pmt_list.html##

##TP_IF {[op_allowed ViewPayMethod] && [tpGetVar AllowedToAddPayMthds] > 0}##
<!-- Add new payment method -->
<table cellspacing=0 cellpadding=2 border=0>
<form method="get" action="##TP_CGI_URL##">
	<tr>
		<th colspan=2 class=title>
		Add New Payment Method
		</th>
	</tr>
	<tr>
	<td class=caption>Method</td>
		<td>
			<select name="pay_mthd">
				<script>
				write_select(""
					##TP_LOOP pm_idx {[tpGetVar NumPayMthds]}##
						##TP_IF {[op_allowed "Add[tpBindGet pay_mthd]"]}##
						,"##TP_pay_mthd##", "##TP_pay_mthd_desc##"
						##TP_ENDIF##
					##TP_ENDLOOP##
				)
				</script>
			</select>
		</td>
	</tr>
	<tr>
		<th class=buttons colspan=2>
		<input type=button class="btn_def" value="Add Method" onClick="return fs(this,'GoAddPmtMthd')">
		</th>
	</tr>
	<input type="hidden" name="Username"   value="##TP_Username##" size=32>
	<input type="hidden" name="AcctNo"     value="##TP_AcctNo##"   size=32>
	<input type="hidden" name="Email"     value="##TP_Email##"   size=50>
	<input type="hidden" name="SubmitName" value="">
	<input type="hidden" name="action"     value="ADMIN::PMT::go_pay_mthd_add">
	<input type="hidden" name="backAction" value="CUST">
</form>
</table>
<br>
##TP_ENDIF##
<!-- END Pay Methods Section -->

<!-- Customer PMB Expiry -->
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=post>
<tr>
	<th class=title colspan=5>
	Customer PMB Expiry By Type
	</th>
</tr>
<tr>
	<td class=colhead>Type</td>
	<td class=colhead>Scheme</td>
	<td class=colhead>PMB Expiry (Days)</td>
	<td class=colhead />
	<td class=colhead />
</tr>
##TP_IF {[tpGetVar PMBExpAvailable 0]}##
##TP_LOOP pmb_idx {[tpGetVar NrPMBExceptions]}##
<tr>
	<td>##TP_PayMthdDesc##</td>
	<td>##TP_PmtScheme##</td>
	<td>##TP_PMBPeriod##</td>
##TP_IF {[op_allowed UpdatePMBExpiryAcc]}##
	<td><a href="##TP_CGI_URL##?action=ADMIN::CUST::DoCust&amp;SubmitName=EditCustPMB&amp;CustId=##TP_CustId##&amp;username=##TP_Username##&amp;pay_mthd_desc=##TP_PayMthdDesc##&amp;pay_mthd=##TP_PayMthd##&amp;pmt_scheme=##TP_PmtScheme##&amp;PMBPeriod=##TP_PMBPeriod##">edit</a></td>
	<td><a href="##TP_CGI_URL##?action=ADMIN::CUST::DoCust&amp;SubmitName=DelPMBExp&amp;CustId=##TP_CustId##&amp;pay_mthd=##TP_PayMthd##&amp;pmt_scheme=##TP_PmtScheme##&amp;PMBPeriod=##TP_PMBPeriod##" onclick="return confirm('Delete PMB expiry value?');">delete</a></td>
##TP_ELSE##
	<td />
	<td />
##TP_ENDIF##
</tr>
##TP_ENDLOOP##
##TP_ELSE##
<tr>
	<td align=left colspan=5>
		No exceptions defined for this customer
	</td>
</tr>
##TP_ENDIF##

##TP_IF {[op_allowed UpdatePMBExpiryAcc]}##
<tr>
	<td>
		<select name="pay_mthd" id="pay_mthdPMB" onchange="change_pmt_schemes('PMB')">
			<script>
			write_select(""
				##TP_LOOP pm_idx {[tpGetVar NumPayMthds]}##
					,"##TP_pay_mthd##", "##TP_pay_mthd_desc##"
				##TP_ENDLOOP##
			)
			</script>
			<option value="ALL">Default</option>
		</select>
	</td>
	<td>
		<select name="pmt_scheme" id="pmt_schemePMB" disabled="true">
			<script>
			write_select(""
				##TP_LOOP ps_idx {[tpGetVar NumPmtSchemes]}##
					,"##TP_pmt_scheme##", "##TP_pmt_scheme##"
				##TP_ENDLOOP##
			)
			</script>
			<option value="----" selected="selected">----</option>
		</select>
	</td>
	<td><input type="text" name="PMBPeriod" size="3" maxlength="3" value="" /></td>
	<td />
	<td />
</tr>
<tr>
	<th colspan=5 class=buttons>
	<input type="button" class="btn_def" value="Add" onClick="return fs(this,'AddPMBExp')">
	</th>
</tr>
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
##TP_ENDIF##
</form>
</table>
<br>

<!-- Customer Max Payment Methods -->
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=post>
<tr>
	<th class=title colspan=5>
	Multiple Method Limits
	</th>
</tr>
<tr>
	<td class=colhead>Type</td>
	<td class=colhead>Scheme</td>
	<td class=colhead>Maximum Methods</td>
	<td class=colhead />
	<td class=colhead />
</tr>
<tr>
	<td colspan="2">
		<b>Default</b>
	</td>
	##TP_IF {[op_allowed UpdateMaxCombineAcc]}##
	<td>
		<input type="text" name="DefaultMaxCombine" size="3" value="##TP_DefaultMaxCombine##" />
	</td>
	<td colspan="2" align="center">
		<input type="button" class="btn_def" value="update" onClick="return fs(this,'UpdDefaultMaxCombine')">
	</td>
	##TP_ELSE##
	<td>##TP_DefaultMaxCombine##</td>
	<td colspan="2" align="center">&nbsp;</td>
	##TP_ENDIF##
</tr>
<tr>
	<td colspan="2">
		<b>Max number of cards</b>
	</td>
	##TP_IF {[op_allowed UpdateMaxCombineAcc]}##
	<td>
		<input type="text" name="MaxCustCards" size="3" value="##TP_MaxCustCards##" />
	</td>
	<td colspan="2" align="center">
		<input type="button" class="btn_def" value="update" onClick="return fs(this,'UpdMaxCustCards')">
	</td>
	##TP_ELSE##
	<td>##TP_MaxCustCards##</td>
	<td colspan="2" align="center">&nbsp;</td>
	##TP_ENDIF##
</tr>
##TP_IF {[tpGetVar MaxCombineAvailable 0]}##
##TP_LOOP mc_idx {[tpGetVar NrMaxCombine]}##
<tr>
	<td>##TP_PayMthdDescMC##</td>
	<td>##TP_PmtSchemeMC##</td>
	<td>##TP_MaxCombine##</td>
##TP_IF {[op_allowed UpdateMaxCombineAcc]}##
	<td><a href="##TP_CGI_URL##?action=ADMIN::CUST::DoCust&amp;SubmitName=EditCustMaxCombine&amp;CustId=##TP_CustId##&amp;username=##TP_Username##&amp;pay_mthd_desc=##TP_PayMthdDescMC##&amp;pay_mthd=##TP_PayMthdMC##&amp;pmt_scheme=##TP_PmtSchemeMC##&amp;MaxCombine=##TP_MaxCombine##">edit</a></td>
	<td><a href="##TP_CGI_URL##?action=ADMIN::CUST::DoCust&amp;SubmitName=DelMaxCombine&amp;CustId=##TP_CustId##&amp;pay_mthd=##TP_PayMthdMC##&amp;pmt_scheme=##TP_PmtSchemeMC##&amp;MaxCombine=##TP_MaxCombine##" onclick="return confirm('Delete limit?');">delete</a></td>
##TP_ELSE##
	<td />
	<td />
##TP_ENDIF##
</tr>
##TP_ENDLOOP##
##TP_ENDIF##
##TP_IF {[op_allowed UpdateMaxCombineAcc]}##
<tr>
	<td>
		<select name="pay_mthd" id="pay_mthdMC" onchange="change_pmt_schemes('MC')">
			<script>
			write_select(""
				##TP_LOOP pm_idx {[tpGetVar NumPayMthds]}##
					,"##TP_pay_mthd##", "##TP_pay_mthd_desc##"
				##TP_ENDLOOP##
			)
			</script>
		</select>
	</td>
	<td>
		<select name="pmt_scheme" id="pmt_schemeMC">
			<option value="----" selected="selected">----</option>
		</select>
	</td>
	<td><input type="text" name="MaxCombine" size="3" maxlength="3" value="" /></td>
	<td />
	<td />
</tr>
<tr>
	<th colspan=5 class=buttons>
	<input type="button" class="btn_def" value="Add" onClick="return fs(this,'AddMaxCombine')">
	</th>
</tr>
##TP_ENDIF##
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
</form>
</table>
<br>


<!-- BEGIN Manual Deposit -->
##TP_IF {[tpGetVar FuncExtDep 0]}##

<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th class=title colspan=2>
	Customer account deposit (external)
	</th>
</tr>
<tr>
	<td class=caption>Sort</td>
	<td>
	<select name="Method">
		<option value="CHQ">Cheque</option>
		<option value="CSH">Cash</option>
	</select>
	</td>
</tr>
<tr>
	<td class=caption>Amount (##TP_AcctCCY##)</td>
	<td nowrap>
	<input type="text" name="Amount" size=14 maxlength=14>
	<td>
</tr>
<tr>
	<td class=caption>Description</td>
	<td>
	<input type="text" size=40 maxlength=120 name="Description">
	</td>
</tr>
<tr>
	<td class=caption>Code</td>
	<td>
	<input type="text" size=16 maxlength=16 name="Code">
	</td>
</tr>
<tr>
	<th colspan=2 class=buttons>
	<input type="button" class="btn_def" value="Do Manual Deposit" onClick="return fs(this,'DoManDep')">
	<input type="button" class="btn_def" value="View Manual Deposits" onClick="return fs(this,'ViewManDep')">
	</th>
</tr>
<input type=hidden name=AcctCCY value="##TP_AcctCCY##">
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=AcctId value="##TP_AcctId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
</form>
</table>
<br>
##TP_ENDIF##

<!-- Manual Withdrawal -->

##TP_IF {[tpGetVar FuncExtWtd 0]}##
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th class=buttons colspan=2>
	Customer account withdrawal (external)
	</th>
</tr>
<tr>
	<td class=caption>Sort</td>
	<td>
	<select name="Method">
		<option value="CHQ">Cheque</option>
		<option value="XP">XP</option>
		<option value="BT">Bank Transfer</option>
		<option value="COL">Collect</option>
		<option value="TT">Telegraphic Transfer</option>
	</select>
	</td>
</tr>
<tr>
	<td class=caption>Amount (##TP_AcctCCY##)</td>
	<td nowrap>
	<input type="text" name="Amount" size=14 maxlength=14>
	&nbsp;(balance is ##TP_AcctCCY## ##TP_AcctBalance##)
	<td>
</tr>
<tr>
	<td class=caption>Description</td>
	<td>
	<input type="text" size=40 maxlength=120 name="Description">
	</td>
</tr>
<tr>
	<td class=caption>Code</td>
	<td>
	<input type="text" size=16 maxlength=16 name="Code">
	</td>
</tr>
<tr class=subtitle>
	<td colspan=2>
	<font color=yellow>
	<b>For collections, specify the location and time</b>
	</font>
	</td>
</tr>
<tr>
	<td class=caption>Location</td>
	<td>
	<input type="text" size=40 maxlength=40 name="Location"><br>
	</td>
</tr>
<tr>
	<td class=caption>Time</td>
	<td>
	<input type="text" size=20 maxlength=20 name="Time">YYYY-MM-DD HH:MM:SS
	</td>
</tr>
<tr>
	<th colspan=2 class=buttons>
	<input type="button" class="btn_def" value="Do Manual Withdrawal" onClick="return fs(this,'DoManWtd')">
	<input type="button" class="btn_def" value="View Manual Withdrawals" onClick="return fs(this,'ViewManWtd')">
	</th>
</tr>
<input type=hidden name=AcctCCY value="##TP_AcctCCY##">
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=AcctId value="##TP_AcctId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
</form>
</table>
<br>
##TP_ENDIF##

##TP_PLAY -nocache cust_limits.html##


##TP_IF {[OT_CfgGet CUST_WTD_LIMITS 0]}##
<!-- Withdrawal Limits -->
<table id="tWtdLmt" border=0 cellspacing=0 cellpadding=3>
<tr>
	<th colspan=4 class=title>Withdrawal Limits</th>
</tr>
<tr>
	<th nowrap class=colhead>Number of Days since first deposit</th>
	<th nowrap class=colhead>Days between withdrawals</th>
	<th nowrap class=colhead>Max Withdrawals</th>
	<th nowrap class=colhead>&nbsp;</th>
</tr>
<!-- header -->
	##TP_LOOP pay_idx {[tpGetVar NumFraudLimits 0]}##
	<tr>
	<th colspan=3 class=colhead>##TP_payDesc## ##TP_scheme_name##</td>
		##TP_IF {[op_allowed EditCustFraudLmt]}##
		<th class=colhead>edit</td>
		##TP_ELSE##
		<th nowrap class=colhead>&nbsp;</th>
		##TP_ENDIF##
	</tr>
		##TP_LOOP row_idx {[tpBindGet NumFraudRows]}##
		<tr>
		<td>##TP_firstDep##</td>
		<td>##TP_daysLastWtd##</td>
		<td>##TP_maxWtd##</td>
			##TP_IF {[op_allowed EditCustFraudLmt]}##
			<td><a href="##TP_CGI_URL##?action=ADMIN::CUST::DoCust&SubmitName=DeleteWithdrawalLimit&limitId=##TP_limitId##&CustId=##TP_CustId##">Del</a></td>
			##TP_ELSE##
			<td>&nbsp;</td>
			##TP_ENDIF##
		</tr>
			##TP_IF {([expr {[tpGetVar row_idx]+1}] == [tpBindGet NumFraudRows]) && [op_allowed EditCustFraudLmt]}##
			<form name="add_fraud_limit" method="POST" action="##TP_CGI_URL##">
			<input type="hidden" name="payMthd"   value="##TP_payMthd##">
			<input type="hidden" name="payScheme" value="##TP_scheme##">
			<input type="hidden" name="action" value="ADMIN::CUST::DoCust">
				<input type="hidden" name="AcctId" value="##TP_AcctId##">
				<input type="hidden" name="CustId" value="##TP_CustId##">
			<input type="hidden" name="SubmitName" value="">
			<tr>
				<td><input type="text" size="4" name="new_firstDep" value="##TP_new_firstDep##"></td>
				<td><input type="text" size="4" name="new_daysLastWtd" value="##TP_new_daysLastWtd##"></td>
				<td><input type="text" size="4" name="new_maxWtd" value="##TP_new_maxWtd##"></td>
				<td nowrap><input type="button" name="AddBtn" value="Add / Amend" onClick="return fs(this,'DoWithdrawalLimit')" ></td>
			</tr>
			</form>
			##TP_ENDIF##
		##TP_ENDLOOP##
	##TP_ENDLOOP##
	##TP_IF {[op_allowed EditCustFraudLmt]}##
	<!-- To insert a new category -->
	<tr id="fn_add_header" style="display:none">
	<th id="new_header" colspan=3 class=colhead> email: fraud_check_quickcash@willhill.com</th>
	<th></th>
	</tr>
	<tr id="fn_add_body" style="display:none">
	<form name="add_fraud_limit" method="POST" action="##TP_CGI_URL##">
		<input type="hidden" id="new_payMthd" name="payMthd"   value="">
		<input type="hidden" id="new_payScheme" name="payScheme" value="">
		<input type="hidden" name="action" value="ADMIN::CUST::DoCust">
		<input type="hidden" name="AcctId" value="##TP_AcctId##">
		<input type="hidden" name="CustId" value="##TP_CustId##">
		<input type="hidden" name="SubmitName" value="">
		<td><input type="text" size="4" name="new_firstDep" value="##TP_new_firstDep##"></td>
		<td><input type="text" size="4" name="new_daysLastWtd" value="##TP_new_daysLastWtd##"></td>
		<td><input type="text" size="4" name="new_maxWtd" value="##TP_new_maxWtd##"></td>
		<td nowrap><input type="button" name="AddBtn" value="Add / Amend" onClick="return fs(this,'DoWithdrawalLimit')" ></td>
	</form>
	</tr>
	##TP_ENDIF##
	##TP_IF {[tpGetVar PERM_ViewAudit 0]}##
		<tr>
			<form action="##TP_CGI_URL##" method=get name="view_fraud_limit_audit">
			<th colspan=4 class=buttons>
				<input type="hidden" name="CustId" value="##TP_CustId##">
				<input type="hidden" name="SubmitName" value="">
				<input type="hidden" name="AcctId" value="##TP_AcctId##">
				<input type="button" class="btn_def" value="View Audit History" onClick="return doAudit('FraudLimitWtdAcc', this)">
				<input type="hidden" name="AuditInfo" value="">
				<input type="hidden" name="action" value="ADMIN::CUST::GoCust">
			</th>
			</form>
		</tr>
	##TP_ENDIF##
	</table>

	##TP_IF {[op_allowed EditCustFraudLmt] && [tpGetVar NumPayMthds 0] > 0}##
		<script type="text/javascript">
		function change_pay_mthd_dropdown () {
			var pay_mthd = document.getElementById("new_pay_mthd_cmb");
			var scheme   = document.getElementById("new_scheme_tr");

			// Blank string so the browser picks the default for the item.
			scheme.style.display = (pay_mthd.value == "CC" ? "" : "none");
		}

		function addPayMthd(_mthd, _mthd_name, _scheme) {
			// Get the required data.
			var combo        = document.getElementById("new_pay_mthd_cmb");

			if (combo.selectedIndex > 0) {
				var mthd_id      = combo.value;
				var mthd_name    = combo.options[combo.selectedIndex].text;

				var combo        = document.getElementById("new_scheme_cmb");
				var scheme       = combo.value;
				var scheme_name  = combo.options[combo.selectedIndex].text;


				// Change values.
				document.getElementById("new_payScheme").value  = scheme;
				document.getElementById("new_payMthd").value    = mthd_id;
				document.getElementById("new_header").innerHTML = mthd_name+" "+scheme_name;

				// Blank string so the browser picks the default for the item.
				document.getElementById("fn_add_header").style.display = ""
				document.getElementById("fn_add_body").style.display   = ""
			}
		}
		</script>
		<table id="tWtdLmt" border=0 cellspacing=0 cellpadding=3>
		<tr>
			<th colspan=2 class=title>Add Withdrawal Limit</th>
		</tr>
		<tr>
			<td class=caption>Pay Mthd</td>
			<td>
			<select id="new_pay_mthd_cmb" onchange="change_pay_mthd_dropdown(this)" name="payMthd">
				<option SELECTED value="">Please Select</option>
				##TP_LOOP pay_mtd_idx {[tpGetVar NumFraudPayMthds]}##
				<option value="##TP_cmb_pay_mthd##">##TP_cmb_desc##</option>
				##TP_ENDLOOP##
			</select>
			</td>
		</tr>
		<tr id="new_scheme_tr" style="display:none">
			<td class=caption>Pay Type</td>
			<td>
			<select id="new_scheme_cmb" name="scheme">
				<option SELECTED value="">Please Select</option>
				##TP_LOOP scheme_idx {[tpGetVar NumFraudSchemes 0]}##
				<option value="##TP_cmb_scheme##">##TP_cmb_scheme_name##</option>
				##TP_ENDLOOP##
			</select>
			</td>
		</tr>
		<tr>
			<th colspan=2 class=buttons>
			<input onclick="addPayMthd()" type="button" value="Add Method">
		</td>
		<tr>
		</table>
	##TP_ENDIF##
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_CUST_SHOW_SYS_LIMITS 1]}##
<table border=0 cellspacing=0 cellpadding=2 bgcolor=#cccccc>
<tr>
	<th class=title colspan=##TP_IF {[OT_CfgGet WEEKLY_PMT_LIMITS 0]}##15##TP_ELSE##11##TP_ENDIF##>
	System Limits
	</th>
</tr>

<tr>
	<th nowrap class=colhead>Method</th>
	<th nowrap class=colhead colspan=##TP_IF {[OT_CfgGet WEEKLY_PMT_LIMITS 0]}##7##TP_ELSE##5##TP_ENDIF##>Deposits</th>
	<th nowrap class=colhead colspan=##TP_IF {[OT_CfgGet WEEKLY_PMT_LIMITS 0]}##7##TP_ELSE##5##TP_ENDIF##>Withdraws</th>
</tr>

<tr>
	<th nowrap class=colhead>&nbsp;</th>

	<!-- Deposit Headings -->
	<th nowrap class=colhead>Allow</th>
	<th nowrap class=colhead>Max</th>
	<th nowrap class=colhead>Max Daily</th>
	<th nowrap class=colhead>Max / Day</th>
	<th nowrap class=colhead>Min</th>
	##TP_IF {[OT_CfgGet WEEKLY_PMT_LIMITS 0]} ##
	<th nowrap class=colhead>Max Weekly</th>
	<th nowrap class=colhead>Max / Week</th>
	##TP_ENDIF##

	<!-- Withdraw Headings -->
	<th nowrap class=colhead>Allow</th>
	<th nowrap class=colhead>Max</th>
	<th nowrap class=colhead>Max Daily</th>
	<th nowrap class=colhead>Max / Day</th>
	<th nowrap class=colhead>Min</th>
	##TP_IF {[OT_CfgGet WEEKLY_PMT_LIMITS 0]} ##
	<th nowrap class=colhead>Max Weekly</th>
	<th nowrap class=colhead>Max / Week</th>
	##TP_ENDIF##


</tr>

##TP_FOREACH pay_mthd {$::SYS_LIMIT_MTHD(existing_mthds)}##
<tr>
	<td><a href="##TP_CGI_URL##?action=ADMIN::PMT_CONTROL::GoControl&amp;SubmitName=UpdAcct&amp;PayMthd=##TP_MthdPayMthd##,##TP_MthdScheme##&amp;AcctId=##TP_AcctId##&amp;CustId=##TP_CustId##">##TP_MthdDesc## ##TP_MthdSchemeDesc##</a></td>

	<!-- Deposit Values -->
	<td>##TP_MthdAllowDep##</td>
	<td>##TP_MthdMaxDep##</td>
	<td>##TP_MthdMaxDayDep##</td>
	<td>##TP_MthdMaxNumDayDep##</td>
	<td>##TP_MthdMinDep##</td>
	##TP_IF {[OT_CfgGet WEEKLY_PMT_LIMITS 0]} ##
	<td>##TP_MthdMaxWeekDep##</td>
	<td>##TP_MthdMaxNumWeekDep##</td>
	##TP_ENDIF##
	<!-- Withdraw Values -->
	<td>##TP_MthdAllowWtd##</td>
	<td>##TP_MthdMaxWtd##</td>
	<td>##TP_MthdMaxDayWtd##</td>
	<td>##TP_MthdMaxNumDayWtd##</td>
	<td>##TP_MthdMinWtd##</td>
	##TP_IF {[OT_CfgGet WEEKLY_PMT_LIMITS 0]} ##
	<td>##TP_MthdMaxWeekWtd##</td>
	<td>##TP_MthdMaxNumWeekWtd##</td>
	##TP_ENDIF##
</tr>
##TP_ENDFOREACH##
<form name="add_mthd_limit" method="POST" action="##TP_CGI_URL##">
<tr>
	<td colspan="##TP_IF {[OT_CfgGet WEEKLY_PMT_LIMITS 0]}##14##TP_ELSE##10##TP_ENDIF##">Pay Mthd:
	<select name="PayMthd">
		##TP_FOREACH pay_mthd $::SYS_LIMIT_MTHD(remaining_mthds)##
		<option value="##TP_MthdPayMthd##,##TP_MthdScheme##">##TP_MthdDesc## ##TP_MthdSchemeDesc##</option>
		##TP_ENDFOREACH##
	</select>
	</td>
</tr>
<tr>
	<td>
		<input type="button" name="AddBtn" value="Add" onClick="return fs(this,'InsAcct')" >
		<input type="hidden" name="action" value="ADMIN::PMT_CONTROL::GoControl">
		<input type="hidden" name="AcctId" value="##TP_AcctId##">
		<input type="hidden" name="CustId" value="##TP_CustId##">
		<input type="hidden" name="SubmitName" value="">
	</td>
	<td colspan=##TP_IF {[OT_CfgGet WEEKLY_PMT_LIMITS 0]}##14##TP_ELSE##10##TP_ENDIF##>&nbsp;</td>
</tr>
</form>
</table>
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_MCS_POKER 0]}##

##TP_PLAY -nocache cust_poker_limits.html##

##TP_ENDIF##


<!-- Play ManAdj -->
##TP_PLAY man_adj_part.html##
<br>

##TP_IF {[OT_CfgGetTrue FUNC_MENU_IGF] && [op_allowed IGFExpPtsManAdj]}##
	##TP_PLAY -nocache igf/exp_pts_man_adj.html##
	<br>
##TP_ENDIF##


##TP_IF {[OT_CfgGet FUNC_CUST_GROUPS 0] == 1}##
##TP_PLAY -nocache cust_groups.html##
##TP_ENDIF##
<br>

<!-- Playtech Adjustment -->
##TP_IF {[OT_CfgGet FUNC_PLAYTECH 0]}##
	<table border=0 cellspacing=0 cellpadding=2>
	<form action="##TP_CGI_URL##" method=get>
	<tr>
		<th class=title colspan=2>
			Playtech account adjustment
		</th>
	</tr>

	##TP_LOOP pt_idx {[tpGetVar PlaytechSysNum]}##
		##TP_IF {[OT_CfgGet PLAYTECH_AJAX_BALANCES 0]}##
			<tr>
				<td nowrap class=caption>##TP_disp_name## balance:&nbsp;</td><td id="##TP_system##_xfer_bal">&nbsp;Loading...</td>
			</tr>
			<tr>
				<td nowrap class=caption>##TP_disp_name## bonus:&nbsp;</td><td id="##TP_system##_xfer_bonus">&nbsp;Loading...</td>
			</tr>
			<tr>
				<td nowrap class=caption>##TP_disp_name## frozen:&nbsp;</td><td id="##TP_system##_xfer_frozen">&nbsp;Loading...</td>
			</tr>
			<tr>
				<td nowrap class=caption>##TP_disp_name## nickname:&nbsp;</td><td id="##TP_system##_xfer_nickname">&nbsp;Loading...</td>
			</tr>
		##TP_ELSE##
			<tr>
				<td nowrap class=caption>##TP_disp_name## balance:&nbsp;</td><td>&nbsp;##TP_balance##</td>
			</tr>
			<tr>
				<td nowrap class=caption>##TP_disp_name## bonus:&nbsp;</td><td>&nbsp;##TP_bonus##</td>
			</tr>
			<tr>
				<td nowrap class=caption>##TP_disp_name## frozen:&nbsp;</td><td>&nbsp;##TP_frozen##</td>
			</tr>
			<tr>
				<td nowrap class=caption>##TP_disp_name## nickname:&nbsp;</td><td>&nbsp;##TP_nickname##</td>
			</tr>
		##TP_ENDIF##
	##TP_ENDLOOP##

	<tr>
		<td class=caption>System</td>
		<td>
			<select name="system">
				##TP_LOOP pt_idx {[tpGetVar PlaytechSysNum]}##
					<option value="##TP_system##">##TP_disp_name##</option>
				##TP_ENDLOOP##
			</select>
		</td>
	</tr>
	##TP_IF {![OT_CfgGet PLAYTECH_ADJ_IS_XFER 0]}##
		<tr>
			<td class=caption>Type</td>
			<td>
			<select name="Type">
				<option value="dep">Deposit</option>
				<option value="wtd">Withdrawal</option>
			</select>
			</td>
		</tr>
	##TP_ENDIF##
	<tr>
		<td class=caption>Amount (##TP_AcctCCY##)</td>
		<td nowrap>
			<input type="text" name="Amount" size=14 maxlength=14>&nbsp;
		</td>
	</tr>
	##TP_IF {![OT_CfgGet PLAYTECH_ADJ_IS_XFER 0]}##
		<tr>
			<td class=caption>Date Range</td>
			<td>
			<input type="text" name="SR_date_1" value="" size=19>
			&nbsp;and&nbsp;
			<input type="text" name="SR_date_2" value="" size=19>&nbsp;(yyyy-mm-dd hh:mm:ss)
			</td>
		</tr>
		<tr>
			<td class=caption>or</td>
			<td>
			<select name="SR_date_range">
				<option value="">N/A</option>
				<option value="TD" selected>Today</option>
				<option value="YD">Yesterday</option>
				<option value="L3">Last 3 days</option>
				<option value="L7">Last 7 days</option>
				<option value="CM">Month to Date</option>
			</select>
			</td>
		</tr>
	##TP_ENDIF##
	<tr>
		<th class=buttons colspan="2">
			<input type=button value="Do Playtech Adjustment" onClick="return fs(this,'DoPlaytechAdj')">
			##TP_IF {![OT_CfgGet PLAYTECH_ADJ_IS_XFER 0]}##
				<input type=button value="View Playtech Adjustment" onClick="return fs(this,'ViewPlaytechAdj')">
			##TP_ENDIF##
			##TP_IF {[op_allowed ViewCasinoQueue]}##
				<input type=button value="View Playtech Queue (##TP_Username##)" onClick="return fs(this,'ViewCasinoQueue')">
			##TP_ENDIF##
			##TP_IF {[op_allowed PTPasswordSync]}##
				<input type=button value="Synchronise Password" onClick="return fs(this,'SyncPlaytechPassword')">
			##TP_ENDIF##
			##TP_IF {[op_allowed PTAccountSync]}##
				<input type=button value="Synchronise Account" onClick="return fs(this,'SyncPlaytechAccount')">
			##TP_ENDIF##
		</th>
	</tr>
	<input type=hidden name=AcctCCY    value="##TP_AcctCCY##">
	<input type=hidden name=CustId     value="##TP_CustId##">
	<input type=hidden name=AcctId     value="##TP_AcctId##">
	<input type=hidden name=Username   value="##TP_Username##">
	<input type=hidden name=SubmitName value="">
	<input type=hidden name=action     value="ADMIN::CUST::DoCust">
	</form>
	</table>
##TP_ENDIF##

<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=AcctId value="##TP_AcctId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
</form>
</table>
<br>

##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_SHOW_CHANGE_PASSWORD 1] == 1}##
<!-- Password Change -->

<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th class=title colspan=2>
	Customer password
	</th>
</tr>
<tr>
	<td align=left colspan=2>
		<i>Please enter new password twice</i>
	</td>
</tr>
<tr>
	<td class=caption>Password</td>
	<td align=left>
	<input type="password" name="Password_1" size=32>
	</td>
</tr>
<tr>
	<td class=caption>&nbsp;</td>
	<td>
	<input type="password" name="Password_2" size=32>
	</td>
</tr>
<tr>
	<th colspan=2 class=buttons>
	<input type="button" class="btn_def" value="Update Password" onClick="return fs(this,'UpdPwd')">
	</th>
</tr>
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=Username value="##TP_Username##">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
<input type=hidden name=MCSStatus value="##TP_MCSActive##">
</form>
</table>
<br>
##TP_ENDIF##

<!-- PIN Change -->

##TP_IF {[OT_CfgGet FUNC_CUST_PIN 1]==1}##
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th class=title colspan=2>
	Customer PIN
	</th>
</tr>
<tr>
	<td class=caption>PIN</td>
	<td align=left>
	<input type="password" name="PIN_1" size=8>
	</td>
</tr>
<tr>
	<td class=caption>&nbsp;</td>
	<td>
	<input type="password" name="PIN_2" size=8>
	</td>
</tr>
<t>
	<th colspan=2 class=buttons>
	<input type="button" class="btn_def" value="Update PIN" onClick="return fs(this,'UpdPIN')">
	</th>
</tr>
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
</form>
</table>
<br>
##TP_ENDIF##

##TP_IF {[OT_CfgGetTrue FUNC_CUST_NOTICES]}##
	##TP_PLAY -nocache cust_notices.html##
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_VET_CODES 0]}##
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th class=title colspan=2>
		Vet Codes
	</th>
</tr>
<tr>
	<th colspan=2 class=buttons>
	<input type="button" class="btn_def" value="View Vet Codes" onClick="return fs(this,'GoVetCode')">
	</th>
</tr>
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=AcctId value="##TP_AcctId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoVetCode>
</form>
</table>
##TP_ENDIF##


<!-- Customer statements -->
##TP_IF {[OT_CfgGet FUNC_CUST_STATEMENTS]}##
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th class=title colspan=2>
	Customer Statements
	</th>
</tr>
##TP_IF {[tpGetVar StmtAvailable 0]}##
<tr>
	<td class=caption>Statements</td>
	<td align=left>
		every ##TP_STMT_freq_amt##
		<script>
			write_which("##TP_STMT_freq_unit##", "W", "week(s)", "M", "month(s)")
		</script>
			##TP_IF {[OT_CfgGet STMT_CONTROL 0]}##
			<p>
				<b>Statement dates are configured to be set from the
				<a href="##TP_CGI_URL##?action=ADMIN::STMT_CONTROL::go_stmt_controls">control</a>.
				This means that the frequency and date may be automatically
				changed	when the statements are produced.</b>
			</p>
			##TP_ENDIF##
	</td>
<!-- </tr> -->
<tr>
	<td class=caption>Status</td>
	<td align=left>
		<script>
			write_which("##TP_STMT_status##","A","Active","S","Suspended")
		</script>
	</td>
</tr>
<tr>
	<td class=caption>Next Statement from</td>
	<td align=left>
		##TP_STMT_due_from##
	</td>
</tr>
<tr>
	<td class=caption>to</td>
	<td align=left>
		##TP_STMT_due_to##
	</td>
</tr>
##TP_IF {[OT_CfgGet STATEMENT_DELIVERY_CHOOSE 1]}##
<tr>
	<td class=caption>Delivery Method</td>
	<td align=left>
		<script>write_which("##TP_STMT_dlv_method##", "E", "Email", "P", "Post")</script>
	</td>
</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGet STATEMENT_BRIEF_CHOOSE 1]}##
<tr>
	<td class=caption>Brief Statements</td>
	<td align=left>
		<script>write_which("##TP_STMT_brief##", "Y", "Yes", "N", "No")</script>
	</td>
</tr>
##TP_ENDIF##
##TP_ELSE##
<tr>
	<td align=left colspan=2>
		There is no statement defined for this customer
	</td>
</tr>
##TP_ENDIF##
<tr>
	<th colspan=2 class=buttons>
	<input type="button" class="btn_def" value="Change statement" onClick="return fs(this,'UpdStmt')">
	##TP_IF {[tpGetVar PERM_ViewAudit 0]}##
	<input type="button" class="btn_def" value="View Audit History" onClick="return doAudit('StmtAud', this)">
	<input type=hidden name=AuditInfo value="">
	##TP_ENDIF##
	</th>
</tr>
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=AcctId value="##TP_AcctId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
</form>
</table>
<br>

##TP_ENDIF##

<!-- Username Change -->
##TP_IF {[OT_CfgGet FUNC_CHANGE_USERNAME 1] && ([tpBindGet Owner] != "F" || [regexp {^(STR|VAR|OCC|REG|LOG)$} [tpBindGet OwnerType]] != 1)}##
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th class=title colspan=2>
	Customer Username
	</th>
</tr>
<tr>
	<td align=left colspan=2>
		<i>Please enter new username twice</i>
	</td>
</tr>
<tr>
	<td class=caption>Username</td>
	<td align=left>
	<input type="text" name="Username_1" size=32>
	</td>
</tr>
<tr>
	<td class=caption>&nbsp;</td>
	<td>
	<input type="text" name="Username_2" size=32>
	</td>
</tr>
<tr>
	<th colspan=2 class=buttons>
	<input type="button" class="btn_def" value="Update Username" onClick="return fs(this,'UpdUname')">
	</th>
</tr>
<input type=hidden name=CustId     value="##TP_CustId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action     value=ADMIN::CUST::DoCust>
</form>
</table>
<br>
##TP_ENDIF##
##TP_IF {[OT_CfgGet FUNC_INTERNET_ACTIVATION 0]}##
##TP_IF {[tpGetVar InternetActivated 0] == 0}##
<!-- Internet Activation -->

<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th class=title colspan=2>
	Internet Activation
	</th>
</tr>
<tr>
	<td align=left colspan=2>
		<i>Please enter chosen username and password twice to Internet Activate account<br>Customer will need to change password when they first log in to the Website</i>
	</td>
</tr>
<tr>
	<td class=caption>Username</td>
	<td align=left>
	<input type="text" name="Username_1" size=32>
	</td>
</tr>
<tr>
	<td class=caption>&nbsp;</td>
	<td>
	<input type="text" name="Username_2" size=32>
	</td>
</tr>
<tr>
	<td class=caption>Password</td>
	<td align=left>
	<input type="password" name="Password_1" size=32>
	</td>
</tr>
<tr>
	<td class=caption>&nbsp;</td>
	<td>
	<input type="password" name="Password_2" size=32>
	</td>
</tr>
<tr>
	<th colspan=2 class=buttons>
	<input type="button" class="btn_def" value="Internet Activate" onClick="return fs(this,'InternetActivate')">
	</th>
</tr>
<input type=hidden name=CustId     value="##TP_CustId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action     value=ADMIN::CUST::DoCust>
</form>
</table>
<br>
##TP_ENDIF##
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_TEXT_BETTING_SUPPORT 0] == 1}##
<!-- SMS registration Changes or additions-->

<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<tr>
	<th class=title colspan=2>
	SMS betting details
	</th>
</tr>
<tr>
	<td align=left colspan=2>
		##TP_IF {[tpBindGet Mobile] != ""} ##
			<li>Current number:&nbsp;##TP_Mobile##
		##TP_ELSE##
			<li>No mobile number currently set
		##TP_ENDIF##
	</td>
</tr>

##TP_IF {[tpGetVar MobilePinExists] == 1} ##
<tr>
	<td align=left colspan=2>
		<li>Customer has registered a PIN for Text Betting
	</td>
</tr>
##TP_ELSE##
	##TP_IF {[tpGetVar MustChangeMobile] == 1}##
<tr>
	<td align=left colspan=2>
		<li>Customer's mobile number has been registered for Text Betting on another account.<br>They must use a different mobile number if they wish to register a PIN for Text Betting.
	</td>
</tr>
	##TP_ELSE##
<tr>
	<td align=left colspan=2>
		<li>Customer has not yet registered a PIN for Text Betting
	</td>
</tr>
	##TP_ENDIF##
##TP_ENDIF##
<tr>
	<td align=left colspan=2>
		<i>Please enter new details below</i>
	</td>
</tr>
<tr>
	<td class=caption>Country calling code</td>
	<td>
	<input type="text" name="txtCCode" size=5> (e.g. 44)
	</td>
</tr>
<tr>
	<td class=caption>Mobile</td>
	<td align=left>
	<input type="text" name="mobile" size=32> (e.g. 7766237624)
	</td>
</tr>
<tr>
	<td class=caption>Pin</td>
	<td>
	<input type="password" name="txtPIN" size=4> (4 digits)
	</td>
</tr>
<tr>
	<td class=caption>Confirm Pin</td>
	<td>
	<input type="password" name="txtPIN2" size=4>
	</td>
</tr>
<tr>
	<th colspan=2 class=buttons>
	<input type="button" class="btn_def" value="Update SMS details" onClick="return fs(this,'UpdSMS')">
	</th>
</tr>
<input type=hidden name=CustId     value="##TP_CustId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action     value=ADMIN::CUST::DoCust>
</form>
</table>
<br>
##TP_ENDIF##

##TP_IF {[OT_CfgGet ENABLE_STRALFORS 0]}##
<table border=0 cellspacing=0 cellpadding=2>
<form method="get" action="##TP_CGI_URL##">
<input type=hidden name=action     value="ADMIN::STRALFORS::DoStralfors">
<input type=hidden name=SubmitName value="">
<input type=hidden name=CustId     value="##TP_CustId##">
<input type=hidden name=FromStralfors value="##TP_FromStralfors##">
<tr>
	<th class=title colspan=6>
	Stralfors Code
	</th>
<tr>
	<th nowrap class=colhead colspan=6 align=left>Flagged</th>
</tr>
<tr>
	<td align=center colspan=6>##TP_Stral_Flag_Value##</td>
</tr>
	##TP_IF {[tpGetVar stral_exported] && ![tpGetVar stral_flagged]}##
<tr>
##TP_IF {[op_allowed UpdateStralfors]}##
<!-- Button to Add a Stralfors Flag if there isn't one already on the account -->
	<td align=center colspan=6><input type="button" class="btn_def" value="Add Stralfor Flag" onClick="return fs(this,'Add Stralfor')"></td>
##TP_ENDIF##
</tr>
	##TP_ENDIF##

<tr>
	<th nowrap class=colhead>Print Code</th>
	<th nowrap class=colhead>Account Type</th>
	<th nowrap class=colhead>Letter</th>
	<th nowrap class=colhead>Tel. No.</th>
	<th nowrap class=colhead>Postage</th>
			##TP_IF {[tpGetVar stral_exported]==1}##
	<th nowrap class=colhead>Export Date</th>
			##TP_ELSE##
	<input type=hidden name=Stralfor_Id value="##TP_Stralfor_Id##">
	<th nowrap class=colhead>Edit</th>
			##TP_ENDIF##
</tr>
<tr>
	<td align=center>##TP_Stral_print_code##</td>
	<td align=center>##TP_Stral_account_type##</td>
	<td align=center>##TP_Stral_letter##</td>
	<td align=center>##TP_Stral_tel_no##</td>
	<td align=center>##TP_Stral_bus_cond##</td>
##TP_IF {[tpGetVar stral_exported]}##
	<td align=center>##TP_Stral_export_date##</td>
##TP_ELSE##
	##TP_IF {[op_allowed UpdateStralfors]}##
		<td align=center><input type="button" class="btn_def" value="Edit" onClick="return fs(this,'EditCode')"></td>
	##TP_ENDIF##
##TP_ENDIF##
</tr>
<tr>
	<td align=center colspan=2><input type="button" class="btn_def" value="Replacement Card" onClick="return fs(this,'ReplaceCard')"></td>
	<td align=center colspan=2><input type="button" class="btn_def" value="Replacement Welcome Pack" onClick="return fs(this,'ReplaceWelcomePack')"></td>
	<td align=center colspan=2><input type="button" class="btn_def" value="Cancel Welcome Pack" onClick="return fs(this,'CancelWelcomePack')"></td>
</tr>

</form>
</table>
<br>
##TP_ENDIF##

##TP_IF {[OT_CfgGet PLAYTECH_AFFILIATES_UNITED 0]}##
<table border=0 cellspacing=0 cellpadding=2>
<tr>
	<th class=title colspan=2>
	Affiliates United Banner Tag
	</th>
</tr>
<tr>
##TP_IF {[tpGetVar BannerTagExists]}##
	<td class=caption>Affiliate ID</td>
	<td align=left>##TP_AUAffiliateID##</td>
</tr>
<tr>
	<td class=caption>Advertiser</td>
	<td align=left>##TP_AUAdvertiser##</td>
</tr>
<tr>
	<td class=caption>Promotional Code</td>
	<td align=left>##TP_AUPromoCode##</td>
##TP_ELSE##
	<td align=center><i>(none)</i></td>
##TP_ENDIF##
</tr>
##TP_ENDIF##
##TP_IF {[OT_CfgGetTrue FUNC_NETREFER_AFFILIATE_SYSTEM] && [op_allowed BannerTagAccess]}##
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get onSubmit="return false;">
<a name="NetReferLink"/>
<tr>
	<th class=title colspan=2>
	NetRefer Customer Banner
	</th>
</tr>
<tr>
	<td align=left colspan=2>
		<i>Please enter the banner tag to link this account to</i>
	</td>
</tr>
<tr>
	<td class=caption>Banner Tag</td>
	<td align=left>
	<input type="text" name="BannerTag" size="50" value="##TP_BannerTag##">
	</td>
</tr>
##TP_IF {[tpBindGet BannerTag] == ""}##
<tr>
	<td class=caption>&nbsp;</td>
	<td>
	<input type=checkbox name="RequestReport" value="Y">
	Check to include current months player activity in tomorrows data dump?
	</td>
</tr>
##TP_ENDIF##
<tr>
	<th colspan=2 class=buttons>
	<input type="button" class="btn_def" value="Tag Customer" onClick="return fs(this,'DoNetReferTag')">
	</th>
</tr>
<input type=hidden name=CustId     value="##TP_CustId##">
<input type=hidden name=NetRefDate value="##TP_NetRefDate##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action     value=ADMIN::CUST::DoCust>
</form>
</table>
<br>
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_AUTO_LETTERS 0]}##
<table border=0 cellspacing=0 cellpadding=2>
<form action="##TP_CGI_URL##" method=get>
<input type=hidden name=CustId     value="##TP_CustId##">
<input type=hidden name=SubmitName value="">
<input type=hidden name=action     value="ADMIN::AUTO_LETTERS::DoLetter">

<tr>
	<th class=title colspan=4>
	Automated Customer Letters
	</th>
</tr>

<tr>
	<th nowrap class=colhead>Name</th>
	<th nowrap class=colhead>Created</th>
	<th nowrap class=colhead>Last Sent</th>
	<th nowrap class=colhead>Sent</th>
</tr>
##TP_IF {[tpGetVar NumLetters 0]==0}##
<tr>
	<td  colspan=4>
	No Letters
	</td>
</tr>
##TP_ELSE##
##TP_LOOP l_idx {[tpGetVar NumLetters]}##
<tr>
	<td>
		##TP_template_name##
	</td>
	<td>
		##TP_cr_date##
	</td>
	<td>
		##TP_last_sent##
	</td>
	<td>
		##TP_sent##
	</td>
</tr>
##TP_ENDLOOP##
##TP_ENDIF##

##TP_IF {[tpGetVar NumLettersAvail 0]>0}##
<tr>
	<td colspan=4>
		<select name="letter_id">
			<script>
				write_select(''
				##TP_LOOP la_idx {[tpGetVar NumLettersAvail]}##
					,'##TP_avail_letter_id##', '##TP_avail_template_name## - ##TP_avail_cr_date##'
				##TP_ENDLOOP##
				)
			</script>
		</select>
		<input type="button" class="btn_def" value="Add Letter" onClick="return fs(this,'AddCustLetter')">
	</td>
</tr>
##TP_ELSE##
<tr>
	<td colspan=4>Customer attached to all available letters</td>
</tr>
##TP_ENDIF##
</form>
</table>
<br>
##TP_ENDIF##

##TP_IF {[OT_CfgGet CUST_TNC 0]}##
<table border=0 cellspacing=0>

<tr>
	<th class=title colspan=3>
	Customer Terms and Conditions
	</th>
</tr>

<tr>
	<th nowrap class=colhead>Name</th>
	<th nowrap class=colhead>Date Accepted</th>
	<th nowrap class=colhead>Version</th>
</tr>
##TP_IF {[tpGetVar tnc_nrows 0]==0}##
<tr>
	<td colspan=3>
		No Terms and Conditions found
	</td>
</tr>
##TP_ELSE##
##TP_LOOP c_idx {[tpGetVar tnc_nrows]}##
<tr>
	<td>
		##TP_tnc_name##
	</td>
	<td>
		##TP_date_accepted##
	</td>
	<td>
		##TP_version_accepted##
	</td>
</tr>
##TP_ENDLOOP##
##TP_ENDIF##
</table>
<br>
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_CUST_CANCEL_BETS 0]}##
<table border="0" cellspacing="0" cellpadding="2">
<tr>
	<th class="title">Pending Bets</th></A>
</tr>
<tr>
<th class="buttons" align="left">
	<input type="button" class="btn_def" value="View Pending Bets" onclick="location.href='##TP_CGI_URL##?action=ADMIN::BET::GoCancelAllBetsForCust&CustId=##TP_CustId##&ShowCancelAllBets=1'">
</th>
</tr>
</table>
<br>
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_KYC 0]}##
	##TP_PLAY -nocache kyc_cust.html##
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_OVS 0]}##
	##TP_PLAY -nocache age_ver_cust.html##
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_MANUALLY_LINK_ACCTS 0] && [op_allowed ExtIdFunc]}##
<table border=0 cellspacing=0 cellpadding=2>
	<form action="##TP_CGI_URL##" method=get>
		<tr>
			<th class=title colspan=2>
			Manually Link Customer Accounts
			</th>
		</tr>
		<tr>
			<td class=caption>Link ##TP_Username## to: </td>
			<td align=left>
			<input type="text" name="LinkUsername" size=32>
			##TP_IF {[OT_CfgGetTrue FUNC_SHOP_FIELDING_ACCOUNTS]}##
			&nbsp;&nbsp;(LBO account:
			<input type="checkbox" id="LBOCheck" name="LBOCustomer" value="Y">
			&nbsp;)
			##TP_ENDIF##
			</td>
		</tr>
		<tr>
			<td class=caption>Add ##TP_Username## to group: </td>
			<td align=left>
			<input type="text" name="ExtCustId" size=32>
			</td>
		</tr>
		<tr>
			<th colspan="2" class="buttons">
				<input type="button" value="Update" onClick="return fs(this,'UpdManLinkAcct')">
				##TP_IF {[tpGetVar ExtGroupsCount] > 0 && [tpBindGet ExtCustGroupCount] > 1}##
				<input type="button" value="Remove From Group" onclick="return fs(this,'RemoveLinkAcct')">
				##TP_ENDIF##
			</th>
		</tr>
		<input type="hidden" name="Username"     value="##TP_Username##">
		<input type="hidden" name="CustId"       value="##TP_CustId##">
		<input type="hidden" name="ExtCustGroup" value="##TP_ExtCustGroup##">
		<input type="hidden" name="ExtCustGroupVersion" value="##TP_ExtCustGroupVersion##">
		<input type="hidden" name="ExtCustGroupCount" value="##TP_ExtCustGroupCount##">
		<input type="hidden" name="IdentCode"    value="##TP_IdentCode##">
		<input type="hidden" name="SubmitName"   value="">
		<input type="hidden" name="action"       value="ADMIN::CUST::DoCust">
	</form>
</table>
<br>
##TP_ENDIF##

##TP_IF {[OT_CfgGet FUNC_IOVATION_SNARE 0] && [op_allowed IovManageAccount]}##
<form action="##TP_CGI_URL##" method="get">
	<input type="hidden" name="action"  value="ADMIN::IOVATION::DoControlCustTrig"/>
	<input type="hidden" name="SubmitName" value=""/>
	<input type="hidden" name="ReturnPage" value="GoCust"/>
	<input type="hidden" name="CustId" value="##TP_CustId##"/>
	<input type="hidden" name="NumCustTrig" value="##TP_TCL {tpGetVar num_iova_ctrl}##"/>
	<table border="0" cellspacing="0" cellpadding="3">
		<tr>
			<th colspan="4" class="title">
				Iovation Account Level Triggers settings
			</th>
		</tr>
		<tr>
			<td align="left" colspan="4">
				<i>Leave empty values to use System Level settings</i>
			</td>
		</tr>
		<tr>
			<th class="colhead">Trigger Type</th>
			<th class="colhead">Enabled</th>
			<th class="colhead">Frequency</th>
			<th class="colhead">Max Count</th>
		</tr>
		##TP_LOOP iova_ctrl_idx {[tpGetVar num_iova_ctrl]}##
		<input type="hidden" name="CustId_##TP_TCL {tpGetVar iova_ctrl_idx}##" value="##TP_CustId##"/>
		<input type="hidden" name="TrigType_##TP_TCL {tpGetVar iova_ctrl_idx}##" value="##TP_iova_ctrl_trig_type##"/>
		<tr>
			<td nowrap>##TP_iova_ctrl_trig_desc##</td>
			<td nowrap align="center">
				<select name="Enabled_##TP_TCL {tpGetVar iova_ctrl_idx}##">
					<script>
						write_select('##TP_iova_ctrl_trig_enabled##','','System','Y','Yes','N','No')
					</script>
				</select>
			</td>
			<td nowrap align="center"><input type="text" name="FreqStr_##TP_TCL {tpGetVar iova_ctrl_idx}##" size="10" value="##TP_iova_ctrl_trig_freq_str##"/></td>
			<td nowrap align="center"><input type="text" name="MaxCount_##TP_TCL {tpGetVar iova_ctrl_idx}##" size="5" value="##TP_iova_ctrl_trig_max_count##"/></td>
		</tr>
		##TP_ENDLOOP##
		<tr>
			<th class="buttons" colspan="4">
				<input type="button" class="btn_def" value="Update" onClick="return fs(this,null)"/>
			</th>
		</tr>
	<table>
</form>
<br/>
##TP_ENDIF##

##TP_IF {[op_allowed AdHocTokenReward]}##
<table>
  <form name="RewardAdhocToken" action="##TP_CGI_URL##" method=get>
	<tr>
	  <th class=title colspan=2>
		Reward Adhoc Token
	  </th>
	</tr>
	<tr>
	  <td class=caption>##TP_AcctCCY##</td>
	  <td>
		<input type=text name=Value>
		<input type=hidden name=CcyCode value="##TP_AcctCCY##">
	  </td>
	</tr>
	<tr>
	  <td class=caption>Redemption Value</td>
	  <td>
		<select name="RValID">
		  <script>
			write_select(''
			##TP_LOOP rval_idx {[tpGetVar NumRVals]}##
			,'##TP_RValID##', '##TP_RValName##'
			##TP_ENDLOOP##
			)
		  </script>
		</select>
	  </td>
	</tr>
	<tr>
	  <td class=caption>Absolute Expiry</td>
	  <td>
		<input name="AbsoluteEx" value="##TP_AbsoluteEx##">
		&nbsp;<i>(yyyy-mm-dd hh:mm:ss)</i>
	  </td>
	</tr>
	<tr>
	  <td class=caption>Relative Expiry</td>
	  <td>
		<input name="RelativeEx">
		&nbsp;<i>(dd hh:mm)</i>
	  </td>
	</tr>
	<tr>
	  <td class=buttons colspan=2>
		<input type=button value="Reward token" onclick="return fs(this, 'RewardAdhocToken')">
	  </td>
	</tr>
	<input type="hidden" name="CustId" value="##TP_CustId##">
	<input type="hidden" name="SubmitName" value="">
	<input type="hidden" name="action" value="ADMIN::CUST::DoCust">
  </form>
</table>
<br>
##TP_ENDIF##

<table cellspacing=0 cellpadding=2 border=0>
<form method=get action="##TP_CGI_URL##" name=Cust_QualBet_Criteria>
<tr>
	<th colspan=2 class=title>
	Video Streaming Qualifying Bets
	</th>
</tr>
<tr>
	<td class=captionindex valign="top">##TP_XL {Admin.Txn_Query.DATE_RANGE}##</td>
	<td>
		<input type="text" name="BetDate1" value="" size=10>
		&nbsp;##TP_XL {to}##&nbsp;
		<input type="text" name="BetDate2" value="" size=10>
	</td>
</tr>
<tr>
	<td colspan=2>
		All dates must be in following format: yyyy-mm-dd [hh:mm:ss]
	</td>
</tr>
<tr>
	<th class=buttons colspan=2>
	<input type=button class="btn_def" value="##TP_XL {Admin.Txn_Query.LIST_TXN_BUTTON}##" onClick="return fs(this,'GoCustQualBets')">
	</th>
</tr>
<input type=hidden name=SubmitName value="">
<input type=hidden name=CustId value="##TP_CustId##">
<input type=hidden name=action value=ADMIN::CUST::DoCust>
</form>
</table>

<br>

<!-- begin alerts -->
##TP_IF {[OT_CfgGet FUNC_ALERTS 0] && [op_allowed ManageAlerts]}##
##TP_PLAY -nocache {alert_acct_list.html}##
<br>
##TP_PLAY -nocache {alert_list.html}##
<br>
##TP_ENDIF##
<!-- end alerts -->

##TP_IF {[OT_CfgGetTrue FUNC_EXT_CUST]}##
	<!-- This section is for any non openbet - operator specific implementation.
	     Must create the below file -->
	##TP_PLAY -nocache "ext/ext_cust.html"##
##TP_ENDIF##
##TP_ELSE##
<font color=orange>
<b>You do not have permission to view customer details. - (Account No: ##TP_AcctNo##)</b>
</font>
##TP_ENDIF##

</body>
</html>

