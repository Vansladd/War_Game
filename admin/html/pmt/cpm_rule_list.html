<html>

<head>
<!-- $Id: cpm_rule_list.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $ -->
	<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
	<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
	<title>Customer Payment Method Rules</title>
	<script>
		function fs(b,t)
		{
			b.form.SubmitName.value=t;
			b.form.submit();
			return true;
		}
	</script>
</head>

<body>
	##TP_PLAY msg_rpt.html##
	##TP_PLAY error_rpt.html##

	<table border="0" cellspacing="0" cellpadding="2">
		<tr>
			<th colspan="9" class="title">
				##TP_IF {[tpGetVar CPMRuleType R] == "M"}##
				Deposit-Decline Messages
				##TP_ELSE##
				Customer Payment Method Rules
				##TP_ENDIF##
			</th>
		</tr>

		<tr>
			<th class="colhead">Rule Name</th>
			<th class="colhead">Rule Group</th>
			<th class="colhead">Status</th>
			<th class="colhead">Pay Method</th>
			<th class="colhead">Rule Type</th>
			<th class="colhead">Payment Type</th>
			<th class="colhead">Description</th>
			<th class="colhead">Channels</th>
			##TP_IF {[tpGetVar CPMRuleType R] == "M"}##
			<th class="colhead">Priority</th>
			##TP_ENDIF##
		</tr>
		##TP_IF {[tpGetVar NumCPMRules 0]>0}##

		##TP_LOOP cpmrule_idx {[tpGetVar NumCPMRules]}##

		<tr
		##TP_IF     {$CPM_RULES([tpGetVar cpmrule_idx],status) == "A"}##bgcolor="#9CCF9C"
		##TP_ELSEIF {$CPM_RULES([tpGetVar cpmrule_idx],status) == "S"}##bgcolor="#f3eec7"
		##TP_ELSEIF {$CPM_RULES([tpGetVar cpmrule_idx],status) == "X"}##bgcolor="#CE9A9C"
		##TP_ENDIF##
		>
			<td><a href="##TP_CGI_URL##?action=ADMIN::CPM_RULES::GoCPMRule&RuleId=##TP_CPMRuleId##&SubmitName=Edit&CPMRuleType=##TP_TCL {tpGetVar CPMRuleType}##&this_action=##TP_this_action##&back_action=##TP_back_action##">##TP_CPMRuleName##</a></td>
			<td><a href="##TP_CGI_URL##?action=ADMIN::CPM_RULES::GoGroupRules&RuleGroup=##TP_CPMRuleGrp##&this_action=##TP_this_action##&back_action=##TP_back_action##">##TP_CPMRuleGrp##</a></td>

			<td>
			##TP_IF {$CPM_RULES([tpGetVar cpmrule_idx],status) == "A"}##Active
			##TP_ELSEIF {$CPM_RULES([tpGetVar cpmrule_idx],status) == "S"}##Suspended
			##TP_ELSEIF {$CPM_RULES([tpGetVar cpmrule_idx],status) == "X"}##Removed
			##TP_ENDIF##
			</td>

			<td>##TP_CPMPayMthd##</td>
			<td>##TP_CPMRuleType##</td>
			<td>##TP_CPMPmtType##</td>
			<td>##TP_CPMRuleDesc##</td>
			<td>##TP_CPMChannels##</td>
			##TP_IF {[tpGetVar CPMRuleType R] == "M"}##
			<td>##TP_CPMPriority##</td>
			##TP_ENDIF##
		</tr>


		##TP_ENDLOOP##

		##TP_ELSE##
		<tr>
			<td colspan="8">
			<b>No Customer Payment Method Rules are currently defined.</b>
			</td>
		</tr>

		##TP_ENDIF##

		<tr>
			<form action="##TP_CGI_URL##" method="get">
				<th colspan="8" class="buttons">
						##TP_IF {[op_allowed EditCPMRules]}##
						<input type="button" class="btn_def" value="Add" onClick="return fs(this,'Add')" />
						##TP_ENDIF##
						
						<input type="button" class="btn_def" value="Test Rules/Messages" onClick="return fs(this,'Test')" />
						
						##TP_IF {[tpGetVar showDeleted]}##
						<input type="button" class="btn_def" value="Hide Deleted" onClick="return fs(this,'Refresh')" />
						<input type="hidden" name="showDeleted"   value="0" />
						##TP_ELSE##
						<input type="button" class="btn_def" value="Show Deleted" onClick="return fs(this,'Refresh')" />
						<input type="hidden" name="showDeleted"   value="1" />
						##TP_ENDIF##
				</th>

				<input type="hidden" name="SubmitName" value="" />
				<input type="hidden" name="action" value="ADMIN::CPM_RULES::GoCPMRule" />
				<input type="hidden" name="CPMRuleType" value="##TP_TCL {tpGetVar CPMRuleType}##" />

				<input type="hidden" name="this_action" value="##TP_this_action##" />
				<input type="hidden" name="back_action" value="##TP_back_action##" />
			</form>
		</tr>

	</table>





	##TP_IF {[OT_CfgGet FUNC_CPM_MSG 0]}##

	<br><br><br>

	<table border="0" cellspacing="0" cellpadding="2">
		<tr>
			<th colspan="7" class="title">
				Customer Payment Method Messages
			</th>
		</tr>

		<tr>
			<th class="colhead">Rule Name</th>
			<th class="colhead">Rule Group</th>
			<th class="colhead">Status</th>
			<th class="colhead">Description</th>
			<th class="colhead">Message</th>
			<th class="colhead">Message Point</th>
			<th class="colhead">Channels</th>
		</tr>
		##TP_IF {[tpGetVar NumCPMRules 0]>0}##

		##TP_LOOP cpmrule_idx {[tpGetVar NumCPMRules]}##

		##TP_IF {$CPM_RULES([tpGetVar cpmrule_idx],type) == "M"}##
		<tr
		##TP_IF     {$CPM_RULES([tpGetVar cpmrule_idx],status) == "A"}##bgcolor="#9CCF9C"
		##TP_ELSEIF {$CPM_RULES([tpGetVar cpmrule_idx],status) == "S"}##bgcolor="#f3eec7"
		##TP_ELSEIF {$CPM_RULES([tpGetVar cpmrule_idx],status) == "X"}##bgcolor="#CE9A9C"
		##TP_ENDIF##
		>
			<td><a href="##TP_CGI_URL##?action=ADMIN::CPM_RULES::GoCPMRule&RuleId=##TP_CPMRuleId##&SubmitName=Edit&CPMRuleType=M&this_action=##TP_this_action##&back_action=##TP_back_action##">##TP_CPMRuleName##</a></td>
			<td><a href="##TP_CGI_URL##?action=ADMIN::CPM_RULES::GoGroupRules&RuleGroup=##TP_CPMRuleGrp##&this_action=##TP_this_action##&back_action=##TP_back_action##">##TP_CPMRuleGrp##</a></td>
			<td>
			##TP_IF     {$CPM_RULES([tpGetVar cpmrule_idx],status) == "A"}##Active
			##TP_ELSEIF {$CPM_RULES([tpGetVar cpmrule_idx],status) == "S"}##Suspended
			##TP_ELSEIF {$CPM_RULES([tpGetVar cpmrule_idx],status) == "X"}##Removed
			##TP_ENDIF##
			</td>

			<td>##TP_CPMRuleDesc##</td>
			<td>##TP_CPMMsg##</td>
			<td>##TP_CPMMsgPoint##</td>
			<td>##TP_CPMChannels##</td>

		</tr>
		##TP_ENDIF##


		##TP_ENDLOOP##

		##TP_ELSE##
		<tr>
			<td colspan="7">
			<b>No Customer Payment Method Messages are currently defined.</b>
			</td>
		</tr>

		##TP_ENDIF##

		<tr>
			<form action="##TP_CGI_URL##" method="get">
				<th colspan="7" class="buttons">
					##TP_IF {[op_allowed EditCPMRules]}##
					<input type="button" class="btn_def" value="Add" onClick="return fs(this,'Add')">
					##TP_ENDIF##
					
					<input type="button" class="btn_def" value="Test Rules/Messages" onClick="return fs(this,'Test')">
					
					##TP_IF {[tpGetVar showDeleted]}##
					<input type="button" class="btn_def" value="Hide Deleted" onClick="return fs(this,'Refresh')" />
					<input type="hidden" name="showDeleted"   value="0" />
					##TP_ELSE##
					<input type="button" class="btn_def" value="Show Deleted" onClick="return fs(this,'Refresh')" />
					<input type="hidden" name="showDeleted"   value="1" />
					##TP_ENDIF##
				</th>

				<input type="hidden" name="SubmitName" value="">
				<input type="hidden" name="action" value="ADMIN::CPM_RULES::GoCPMRule">
				<input type="hidden" name="CPMRuleType" value="M" />

				<input type="hidden" name="this_action" value="##TP_this_action##" />
				<input type="hidden" name="back_action" value="##TP_back_action##" />
			</form>
		</tr>

	</table>

	##TP_ENDIF##

	<br><br><br>

	<table border="0" cellspacing="0" cellpadding="2">
		<tr>
			<th colspan="6" class="title">
				Rules : Payment Methods
			</th>
		</tr>

		<tr>
			<th class="colhead">Rule Pay Method</th>
			<th class="colhead">Pay Method / Type</th>
			<th class="colhead">Deposit Allowed</th>
			<th class="colhead">Withdrawals Allowed</th>
			<th class="colhead"><a href="##TP_CGI_URL##?action=ADMIN::CPM_RULES::GoCPMRules&OrderBy=Dep"><font color="#ffff33">Deposit Order</font></a></th>
			<th class="colhead"><a href="##TP_CGI_URL##?action=ADMIN::CPM_RULES::GoCPMRules&OrderBy=Wtd"><font color="#ffff33">Withdraw Order</font></a></th>
		</tr>

		##TP_IF {[tpGetVar NumMthds 0]>0}##

		##TP_LOOP allow_idx {[tpGetVar NumMthds]}##

		<tr>
			<td>##TP_AllowDesc##</td>
			<td>##TP_AllowPayMthd## / ##TP_AllowType##</td>
			<td>##TP_AllowDep##</td>
			<td>##TP_AllowWtd##</td>
			<td>##TP_AllowDepOrder##</td>
			<td>##TP_AllowWtdOrder##</td>
		</tr>


		##TP_ENDLOOP##

		##TP_ELSE##
		<tr>
			<td colspan="6">
			<b>No Rules Payment Methods are currently defined.</b>
			</td>
		</tr>

		##TP_ENDIF##
	</table>

	<br><br><br><br><br><br><br><br><br>

</body>

</html>
