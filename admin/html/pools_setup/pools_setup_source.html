<html>
	<head>
	  <meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
		<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
		  <title>OpenBet Pools Setup</title>
		  ##TP_PLAY JS_WriteSelect.html##
			<script language=javascript>

				var i = 0;
				var ccy = new Array();
				var div = new Array();
				function load_values() {
					i = 0;
					##TP_LOOP idx 0 {[tpGetVar count]}##
					ccy[i] = "##TP_ccy##";
					div[i] = "##TP_div##";
					i++;
					##TP_ENDLOOP##
				}

				function initial_value(i) {
					document.sourceform.currency.value = ccy[i];
					document.sourceform.dividend.value = div[i];
				}

				function update_form(i) {
					document.sourceform.currency.value = ccy[i];
					document.sourceform.dividend.value = div[i];

					##TP_IF {[tpGetVar TYPE] == 1}##
					document.sourceform.view_pools.click();
					##TP_ENDIF##
				}

				function fs(b,t)
				{
					b.disabled = true;
					b.value = "Busy...";
					b.form.SubmitName.value=t;
					b.form.sid.value = document.sourceform.source.options[document.sourceform.source.selectedIndex].value;
					b.form.submit();
					return true;
				}
		  </script>
	</head>

	<body onLoad="load_values();initial_value(##TP_choice##);">
	  ##TP_PLAY error_rpt.html##
	  <table border=0 cellspacing=0 cellpadding=3 bgcolor=#10137c>
		<form name="sourceform" action="##TP_CGI_URL##?action=ADMIN::POOLS::SETUP::go_pools" method="get">
			<input type=hidden name="SubmitName" value="">
			<input type=hidden name=sid value="">
			<input type=hidden name=action value="ADMIN::POOLS::SETUP::go_pools">
		  <tr>
			<th colspan=4 class=title>
			  View Pools Sources
			</th>
		  </tr>
		  <tr>
			<td class=caption>Source</td>
			<td>
				<select name="source" onChange="javascript:update_form(this.selectedIndex)">
					##TP_LOOP idx 0 {[tpGetVar count]}##
					<option value="##TP_sid##" ##TP_IF {[tpGetVar S_ID] == $SourceArray([tpGetVar idx],s_id)}##selected##TP_ENDIF##>##TP_source##</option>
					##TP_ENDLOOP##
				</select>
			</td>
			<td class=caption>Currency</td>
			<td><input type="text" name="currency" value=""></td>
		  </tr>
		  <tr>
			<td class=caption>Dividend unit</td>
			<td><input type="text" name="dividend" value=""></td>
			<td colspan=2>&nbsp;</td>
		  </tr>
		  <tr>
			<th class=buttons colspan=3>
				<input type=button class="btn_def" value="Add Pool Type" onClick="return fs(this,'AddPoolType')">
			</th>
			<th class=buttons colspan=1>
				<input type=button class="btn_def" name="view_pools" value="View Pool Types" onClick="return fs(this,'ViewPoolType')">
			</th>
		  </tr>
		</form>
	  </table>
<p>
##TP_IF {[tpGetVar TYPE] == 1 }##

	  <table border=0 cellspacing=0 cellpadding=3 bgcolor=#10137c>
		<form name="Typeform" action="##TP_CGI_URL##" method=get>
			<input type=hidden name=action value="ADMIN::POOLS::SETUP::go_pools">
			<input type=hidden name="SubmitName" value="">
			<input type=hidden name="sid" value="">
			<input type=hidden name="tid" value="">
		  <tr>
			<th colspan=4 class=title>
			  View Pool Types
			</th>
		  </tr>
		  <tr>
			<td class=caption>Available Types</td>
			<td>
				<select name="Types">
					##TP_LOOP idx 0 {[tpGetVar tcount]}##
						<option value="##TP_tid##">##TP_tname##</option>
					##TP_ENDLOOP##
				</select>
			</td>
		  </tr>
		  <tr>
			<th class=buttons colspan=1>
				<input type=button class="btn_def" value="Add Pool" onClick="return fs(this,'AddPool')">
			</th>
			<th class=buttons colspan=1>
				<input type=button class="btn_def" value="View Type" onClick="return fs(this,'UpdatePoolType')">
			</th>
			<th class=buttons colspan=1>
				<input type=button class="btn_def" value="Set Dividend" onClick="return fs(this,'ResultPool')">
			</th>
		  </tr>
		 </form>
		</table>


##TP_ENDIF##

	</body>
</html>

