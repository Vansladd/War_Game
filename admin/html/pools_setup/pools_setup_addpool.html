<html>
	<!-- $Id: pools_setup_addpool.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $ -->
	<head>
	  <meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
		<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
		  <title>OpenBet Database Viewer</title>
		  ##TP_PLAY JS_WriteSelect.html##
			<script language=javascript>
					var popup;
function fs(b,t)
{
	b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value=t;
	b.form.submit();
	return true;
}
					function open_popup(n) {
							 popup = window.open("##TP_CGI_URL##?action=ADMIN::POOLS::SETUP::go_pool_pick&no=" + n + "&level=" + document.NewPool.level.value + "&curr_id=" + document.NewPool.id.value + "&class_id=" + document.NewPool.class_id.value + "&type_id=" + document.NewPool.type_id.value + "&ev_id="+ document.NewPool.event_id.value , "popup", "toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,height=400,width=400");
							//popup = window.open("##TP_CGI_URL##?action=ADMIN::POOLS::SETUP::go_pool_pick&no=" + n +"&level=Category", "popup", "toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizeable=yes,height=400,width=400");
							popup.focus();
					}
					function catcher( victim, str, level, id, number, typeid, eventid, classid ) {
						var leg = "leg"+number;
						// fill in the hidden values in the leg box of the form
						eval("document.NewPool.N_"+leg+".value = str;");
						eval("document.NewPool.id_"+leg+".value = id;");
						eval("document.NewPool.level_"+leg+".value = level;");
						// fill in the hidden values at the top of the form to say where we were
						document.NewPool.id.value = id;
						document.NewPool.level.value = level;
						document.NewPool.class_id.value = classid;
						document.NewPool.type_id.value = typeid;
						document.NewPool.event_id.value = eventid;
						// destroy the popup
						victim.close();
					}
		  	</script>
	</head>

	<body>
	  ##TP_PLAY error_rpt.html##
	  <table border=0 cellspacing=0 cellpadding=3 bgcolor=#10137c>
		<form name="NewPool" method="get" action="##TP_CGI_URL##">
		<input type=hidden name="SubmitName" value="">
		<input type=hidden name=action value="ADMIN::POOLS::SETUP::go_pools">
		<input type=hidden name=sid value="##TP_sid##">
		<input type=hidden name=type value="##TP_type##">
		<input type=hidden name=pid value="##TP_pid##">
		<input type=hidden name="count" value="##TP_TCL {tpBufWrite [tpGetVar Numlegs]}##">
		<input type=hidden name=level value="##TP_level##">
		<input type=hidden name=id value="##TP_id##">
		<input type=hidden name="class_id" value = "##TP_classid##">
		<input type=hidden name="type_id" value="##TP_typeid##">
		<input type=hidden name="event_id" value="##TP_evid##">
		  <tr>
			<th colspan=4 class=title>
			  Add pool ##TP_Allup##
			</th>
		  </tr>
		  <tr>
			<td class=caption>Name</td>
			<td>
				<input type=text name="desc" maxlength=120 width=40 value="##TP_Name##">
			</td>
			<td class=caption>Status</td>
			<td>
				<select name="status">
					<script>write_select('##TP_Status##','A','Active','S','Suspended');</script>
				</select>
			</td>
		  </tr>
		  <tr>
			<td class=caption>Displayed</td>
			<td>
				<select name="displayed">
					<script>write_select('##TP_Displayed##','Y','Yes','N','No');</script>
				</select>
			</td>
			<td class=caption>Paid Dividend?</td>
			<td>
				<select name="dividend">
					<script>write_select('##TP_Div##','N','No','Y','Yes');</script>
				</select>
			</td>
		  </tr>
		  <tr>
			<td class=caption>Result confirmed?</td>
			<td><select name="result">
				<script>write_select('##TP_Result##','N','No','Y','Yes');</script>
				</select>
			</td>
			<td class=caption>Settled</td>
			<td><select name="settled">
				<script>write_select('##TP_Settled##','N','No','Y','Yes');</script>
				</select>
			</td>
		  </tr>
		  <tr>

			<!-- spacer row to seperate this from the list of legs -->
			<tr bgcolor=#ffffff>
				<td colspan=4>&nbsp;</td>
			</tr>
		</table>

		<table border=0 cellspacing=0 cellpadding=3 bgcolor=#10137c>

			##TP_LOOP idx 0 {[tpGetVar Numlegs]}##
			<tr>
				<th class=title colspan=3>Leg ##TP_TCL {tpBufWrite [expr 1+ [tpGetVar idx]]}##</th>
				<th class=title align=right>(##TP_Legtype##)</th>
			</tr>

			<tr>
				<td class=caption>##TP_EvMkt##</td>
				<td colspan=2><input type=text name="N_##TP_leg##" value="##TP_MktId##" size=40>
				<input type=hidden name="level_##TP_leg##" value="##TP_lvl##">
				<input type=hidden name="id_##TP_leg##" value="##TP_mktid##"></td>
				<td><input type=button class="btn_def" value="select" onClick="open_popup(##TP_TCL {tpBufWrite [tpGetVar idx]}##)"></td>
			</tr>

			<tr bgcolor=#ffffff>
				<td colspan=4>&nbsp;</td>
			<tr>
			##TP_ENDLOOP##

			<tr>
				<td colspan=4 class=buttons>
				##TP_IF {[tpGetVar UPDATE] == 1}##
					<input type=button class="btn_def" value="Update Pool" onClick="return fs(this,'UpdatePool')"><input type=button class="btn_def" value="Delete Pool" onClick="return fs(this,'DeletePool')">
				##TP_ELSE##
					<input type=button class="btn_def" value="Add Pool" onClick="return fs(this,'DoAddPool')">
				##TP_ENDIF##
					<input type=reset value="Reset">
					<input type=button class="btn_def" value="Back" onClick="return fs(this,'Back')">
				</td>
			</tr>
		</table>


		</form>
	  </table>

	</body>
</html>

