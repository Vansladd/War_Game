<html>
<!-- $Id: seo_urls_main.html,v 1.1.1.1 2011/10/04 10:54:25 xbourgui Exp $ -->
	<head>
		<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
		<title>SEO URLs mapping - Main</title>
		##TP_PLAY JS_WriteSelect.html##
	
	<script type="text/javascript">

		function fs(b,t,p) {
			if (t == 'GoDeleteMapping') {
				if (!confirm("Deleting a mapping could result in a broken link, Do you want to continue?")) {
					return false;
				}
			}
		
			b.disabled = true;
			b.value = "Busy...";
			b.form.SubmitName.value=t;
			b.form.Params.value=p;
			b.form.submit();
			return true;
			
		}


		function setRoot(node) {
			if (node.value == "es")
				document.getElementById("root").innerHTML = "/apuesta/";
			else
				document.getElementById("root").innerHTML = "/bet/";
		}
		
		function checkSEOPath(node) {
			if (node.value.indexOf(".") != -1 || node.value.indexOf("/") != -1)
				document.getElementById("path_error").innerHTML = "The SEO URL cannot contain foward slashes or dots";
			else
 				document.getElementById("path_error").innerHTML = "";
		}

	</script>

	</head>
	
	<body>
	
	##TP_IF {[tpBindGet error_message] != ""}##
		<p style="color:red;"><strong>##TP_error_message##</strong></p>
	##TP_ENDIF##
	##TP_IF {[tpBindGet success_message] != ""}##
		<p style="color:green;"><strong>##TP_success_message##</strong></p>
	##TP_ENDIF##
	

		<form name="seo_form_mappings" method="get" action="##TP_CGI_URL##">
			<input type="hidden" name="action" value="ADMIN::SEO::doSEOURLMap">
			<input type="hidden" name="SubmitName" value="">
			<input type="hidden" name="Params" value="">
			
	##TP_IF {[tpGetVar OP] == "ADD"}##
			<table cellspacing="0" cellpadding="8" border="0">
				<tr>
					<th class="title" colspan="4">Add SEO URLs Mappings
					</th>
				</tr>
				<tr>
					<td class="caption">Language</td>
					<td>
						<select name="language" onChange="setRoot(this)">
							<option value="en">English</option>
							<option value="es">Spanish</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="caption">SEO URL</td>
					<td>
						<span id="root">/bet/</span><input onchange="checkSEOPath(this)" type="text" name="path" id="path" />/ <br />
						<span id="path_error" style="color:red" ></span>
						
					</td>
				</tr>
				<tr>
					<td class="caption">Resource</td>
					<td>
						<input type="radio" name="url_type" value="AWKWARD" checked> Predefined:
							<select name="awkward_path">
								<option value="FOOTBALL_HOMEPAGE">FOOTBALL_HOMEPAGE</option>
								<option value="LIVE_BETTING_HOMEPAGE">LIVE_BETTING_HOMEPAGE</option>
								<option value="RACING_HOMEPAGE">RACING_HOMEPAGE</option>
								<option value="GREYHOUNDS_HOMEPAGE">GREYHOUNDS_HOMEPAGE</option>
								<option value="NOVELTY_HOMEPAGE">NOVELTY_HOMEPAGE</option>
								<option value="TOTE_HOMEPAGE">TOTE_HOMEPAGE</option>
								<option value="NEXT_5_RACES_HORSES">NEXT_5_RACES_HORSES</option>
								<option value="NEXT_3_RACES_GREYHOUNDS">NEXT_3_RACES_GREYHOUNDS</option>
								<option value="EARLY_PRICES_GREYHOUNDS">EARLY_PRICES_GREYHOUNDS</option>
								<option value="MONEYBACK_FOOTBALL">MONEYBACK_FOOTBALL</option>
								<option value="MONEYBACK_HORSES">MONEYBACK_HORSES</option>
							</select>
						
						<br />
						<input type="radio" name="url_type" value="PAGE">"Static" Page URL:<br />
						&nbsp;&nbsp;&nbsp;?action=showpage&page=<input type="text" name="static_path" /><br />
						<input type="radio" name="url_type" value="IFRAME">"IFrame" URL:<br />
						&nbsp;&nbsp;&nbsp;iframe_page=<input type="text" name="iframe_path" maxlength="255"/>
					</td>
				</tr>
				<tr>
					<td class="caption">Status (outbound)</td>
					<td>
						<select name="status">
							<option value="A">Active</option>
							<option value="S">Suspended</option>
						</select>
					</td>
				</tr>
				<tr>
					<th class="buttons">
					<a href="##TP_CGI_URL##?action=ADMIN::SEO::GoSEOURLMap">
						<input type="button" value="Back"/>
					</a>
					</th>
					<th class="buttons" colspan="2" />
					<th class="buttons">
						<input type="button" value="Add" onclick="fs(this,'doAddMapping','')" />
					</th>
				</tr>
			</table>

	##TP_ELSE##

			<table cellspacing="0" cellpadding="2" border="0" width="60%">
				<tr>
					<th class="title" colspan="4">SEO URLs Mappings &nbsp;&nbsp;&nbsp;
					<select name="language">
						<option value="en" ##TP_IF {[tpBindGet LANG] != "es"}## selected ##TP_ENDIF##>English</option>
						<option value="es" ##TP_IF {[tpBindGet LANG] == "es"}## selected ##TP_ENDIF##>Spanish</option>
					</select>
					<input type="button" value="View" onClick="fs(this,'goLanguage','')"/>
					</th>
					<th class="title" colspan="3">&nbsp;</th>
				</tr>
				<tr>
					<th class="colhead" nowrap="">SEO URL</th>
					<th class="colhead" nowrap="">Resource</th>
					<th class="colhead" nowrap="">Status</th>
					<th class="colhead" colspan="3">&nbsp;</th>
				</tr>
				##TP_LOOP mappings_idx {[tpGetVar NUM_MAPPINGS]}##                                                                                                                                                              
					##TP_IF {[tpBindGet Status]=="A"}##
						<tr class="active" style="background-color:#99CC99">
					##TP_ELSE##
						<tr class="suspended" style="background-color:#CC9999">
					##TP_ENDIF##
						<td>##TP_IF {[tpBindGet LANG] == "es"}##/apuesta/##TP_ELSE##/bet/##TP_ENDIF####TP_Url##</td>
						<td>##TP_Res##</td>
						<td>##TP_Status##</td>
						<td>
							##TP_IF {[tpBindGet Status] == "S"}##
								<input type="button" value="Activate" onclick="fs(this,'doStatusMapping','##TP_MapId##,A')"/>
							##TP_ELSE##
								<input type="button" value="Suspend"  onclick="fs(this,'doStatusMapping','##TP_MapId##,S')"/>
							##TP_ENDIF##
						</td>
						<td>
							<input type="button" value="Audit" onClick="return fs(this,'GoMappingAudit','##TP_MapId##')"/>
						</td>
						<td>
							<input type="button" value="Delete" onClick="return fs(this,'GoDeleteMapping','##TP_MapId##')"/>
						</td>                                                                                                                                                
				##TP_ENDLOOP##
				##TP_IF {[tpGetVar NUM_MAPPINGS] == 0}##
					<td colspan="4">No mappings defined</td>
				##TP_ENDIF##
				<tr>
					<td colspan="6" style="font-weight: bold; font-style:italic">Note that suspended mappings are still used when decoding inbound links.</td>
				</tr>
				<tr>
					<th class="buttons" colspan="6">
						<input type="button" value="Add New SEO URL Mapping" onclick="fs(this,'goAddMapping','')" />
					</th>
				</tr>
			</table>
		</form>
		
		
			
		<table cellspacing="0" cellpadding="2" border="0" width="60%">
		</table>
		<table cellspacing="0" cellpadding="2" border="0" width="60%">
			<tr>
				<th class="title" colspan="3">SEO URLs Handler Mappings &nbsp;&nbsp;&nbsp;</th>
			</tr>
			<tr>
				<td colspan="3">Registering the Apache handlers here will prevent the SEO to generate URLs with duplicated items as long as the matching class(es) have the same name</td>
			</tr>
			<tr>
				<td colspan="3"><b>e.g.</b> if a 'racing' handler is defined and the horse racing class has 'racing' for name, then a url which would have been</td>
			</tr>
			<tr>
				<td colspan="3"><i>openbet.com/racing/racing/kempton/...</i> will be trimmed down to <i>openbet.com/racing/kempton/...</i></td>
			</tr>
			<tr>
				<th class="colhead" nowrap="">Handler</th>
				<th class="colhead" nowrap="">Language</th>
				<th class="colhead">&nbsp;</th>
			</tr>
				<form name="seo_form_del_handlers" method="get" action="##TP_CGI_URL##">
					<input type="hidden" name="action" value="ADMIN::SEO::doSEOURLMap">
					<input type="hidden" name="SubmitName" value="">
					<input type="hidden" name="Params" value="">
				
					##TP_LOOP handlers_idx {[tpGetVar NUM_HANDLERS]}##
						<tr class="active" style="background-color:#99CC99">
							<td>##TP_Name##</td>
							<td>##TP_IF {[tpBindGet Lang] == "es"}##Spanish##TP_ELSE##English##TP_ENDIF##</td>
							<td>
								<input type="button" value="Delete" onClick="return fs(this,'GoDeleteHandler','##TP_Name##')"/>
							</td>
						</tr>
					##TP_ENDLOOP##
					##TP_IF {[tpGetVar NUM_HANDLERS] == 0}##
						<td colspan="4">No handlers registered</td>
					##TP_ENDIF##
				
				</form>
			<tr>
				<td colspan="6" style="font-weight: bold; font-style:italic">&nbsp;</td>
			</tr>
			<tr>	
				<form name="seo_form_add_handlers" method="get" action="##TP_CGI_URL##">
					<input type="hidden" name="action" value="ADMIN::SEO::doSEOURLMap">
					<input type="hidden" name="SubmitName" value="">
					<input type="hidden" name="Params" value="">
					
					<th class="buttons" colspan="6">
						<input type="text" value="" name="handler_name" />
						<select name="language">
							<option value="en">English</option>
							<option value="es">Spanish</option>
						</select>
						<input type="button" value="Add New SEO URL Handler" onclick="fs(this,'GoAddHandler','')" />
					</th>
				</form>
			</tr>
		</table>
		##TP_ENDIF##
		
	</body>
</html>

