<html>
<!-- $Id: pmt_upload.html,v 1.1.1.1 2011/10/04 10:54:26 xbourgui Exp $ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=##TP_CHARSET##">
<link rel="stylesheet" type="text/css" href="##TP_CGI_URL##?action=stylesheet">
<title>Uploaded Files</title>
<script>
function fs(b,t)
{
	var filename = document.getElementById('filename').value;

	if (filename.replace(/^\s+|\s+$/g,"") == '') {
		alert('A file has not been selected for upload.\nPlease click "Browse..." to select a file.');
		return false;
	}

	b.disabled = true;
	b.value = "Busy...";
	b.form.SubmitName.value=t;
	b.form.submit();
	return true;
}
##TP_PLAY upload/JS_CheckFileName.html##
</script>
</head>
<body>
##TP_PLAY error_rpt.html##
<table border=0 cellspacing=0 cellpadding=3>
<tr>
	<th colspan=5 class=title>
	Uploaded Files
	</th>
</tr>
<tr>
	<th class=colhead>Type</th>
	<th class=colhead>Time</th>
	<th class=colhead>Filename</th>
	<th class=colhead>Edit</th>
	<th class=colhead>Delete Uploaded File</th>
</tr>
##TP_LOOP file_idx {[tpGetVar NumFiles]}##
<tr>
	<td>##TP_FileType##</td>
	<td>##TP_FileTime##</td>
	<td><a HREF="##TP_CGI_URL##?action=ADMIN::UPLOAD::GoUploadFile&FileType=##TP_FileType##&FullName=##TP_FileKey##&upload_type=##TP_upload_type##">##TP_FileName##</a></td>
	<td>
		##TP_IF {$FILE([tpGetVar file_idx],is_reject)}##
			<a HREF="##TP_CGI_URL##?action=ADMIN::UPLOAD::GoUploadFile&FileType=##TP_FileType##&FullName=##TP_FileKey##&upload_type=##TP_upload_type##&edit=1">Edit</a>
		##TP_ENDIF##
	</td>
	<td valign=top align=center><a HREF="##TP_CGI_URL##?action=ADMIN::UPLOAD::DoUploadFile&SubmitName=FileDel&FileType=##TP_FileType##&FullName=##TP_FileKey##&upload_type=##TP_upload_type##">[delete]</a></td>
</tr>
##TP_ENDLOOP##
</table>
##TP_IF {[tpGetVar UPLOADED 0]==1}##
<font color=green>
<font size=+1>
The file has been successfully uploaded and is now ready to be processed.
</font>
</font>
##TP_ENDIF##
<br>
##TP_IF {[op_allowed UploadPmts]}##
<form method=post action="##TP_CGI_URL##" enctype="multipart/form-data">
<input type="hidden" name="returl" value="##TP_CGI_URL##">
<input type="hidden" name="retaction" value="ADMIN::UPLOAD::GoUpload">
<input type="hidden" name="upload_type" value="##TP_upload_type##">
<input type="hidden" name="action" value="ADMIN::UPLOAD::DoUpload">
<input type="hidden" name="SubmitName" value="">
<table border=0 cellspacing=0 cellpadding=1>
<tr>
	<th colspan=2 class=title>
	Select file to upload
	</th>
</tr>
<tr>
  <td class=caption>File type</td>
  <td>
    <select name="filetype">
    <option value="payments">Payments</option>
    <option value="adjustments">Manual Adjustments</option>
    <option value="cheques">Cheques</option>
    </select>
  </td>
</tr>
<tr>
	<td class=caption>Filename</td>
	<td>
	<input type="file" id="filename" name="filename" size=40>
	</td>
</tr>
<tr>
	<th colspan=2 class=buttons>
	<input type="button" class="btn_def" name="DoIt" value="Upload File" onClick="return fs(this,'DoIt');">
	</th>
</tr>
</table>
</form>
##TP_ENDIF##
<b>Notes</b><br>
Files to be uploaded must be in <a href="#CSV">CSV</a> format.
The first line of each file must contain the appropriate column names for the file. The types of file are as follows:</br>
<table cellspacing=1 border=0 cellpadding=1>
<tr>
	<th colspan=4 class=title>
	File Formats
	</th>
</tr>
<tr>
	<th class=colhead>Payments</th>
</tr>
<tr>
<td valign=top align=left>
<ol>
<li>USERNAME</li>
<li>ACCOUNT NUMBER</li>
<li>LAST NAME</li>
<li>DESCRIPTION</li>
<li>EXTRA INFO</li>
<li>PAYMENT TYPE</li>
<li>AMOUNT</li>
<li>CURRENCY CODE</li>
<li>CHANNEL</li>
</ol>
</td>
</tr>

<tr>
  <th class=colhead>Adjustments</th>
</tr>
<tr>
<td valign=top align=left>
<ol>
<li>USERNAME</li>
<li>ACCOUNT NUMBER</li>
<li>LAST NAME</li>
<li>DESCRIPTION</li>
<li>WITHDRAWABLE</li>
<li>AMOUNT</li>
<li>CURRENCY CODE</li>
<li>TYPE</li>
<li>SUBTYPE</li>
<li>BOOKMAKER ACCOUNT</li>
<li>SYSTEM NAME</li>
</ol>
</td>
</tr>

<tr>
	<th class=colhead>Cheques</th>
</tr>
<tr>
<td valign=top align=left>
<ol>
<li>DATE</li>
<li>BATCHNUMBER</li>
<li>ACCOUNTNUMBER</li>
<li>CHEQUENUMBER</li>
<li>VALUE</li>
</ol>
</td>
</tr>

</table>
<br><br>
<a name="CSV"><b>CSV Files</b></a><br>
<p>A CSV file is a comma-separated file. Fields which themselves contain commas need to be enclosed in double quotes.<p>

##TP_IF {[OT_CfgGet FUNC_XGAME_FILES 0]}##
<p><b>Pools settlement files</b></p>
<p>Pools and lottery settlement files should be in the format agreed with Orbis.</p>
##TP_ENDIF##
</body>
</html>
